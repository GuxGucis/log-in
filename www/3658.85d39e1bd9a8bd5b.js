(self.webpackChunkLogIn=self.webpackChunkLogIn||[]).push([[3658],{3658:(yo,mn,mr)=>{"use strict";mr.r(mn),mr.d(mn,{jeep_sqlite:()=>Xn});var O=mr(5861),Yt=mr(7228);const pr=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{};function pn(){throw new Error("setTimeout has not been defined")}function yn(){throw new Error("clearTimeout has not been defined")}var Lt=pn,Mt=yn;function gn(o){if(Lt===setTimeout)return setTimeout(o,0);if((Lt===pn||!Lt)&&setTimeout)return Lt=setTimeout,setTimeout(o,0);try{return Lt(o,0)}catch{try{return Lt.call(null,o,0)}catch{return Lt.call(this,o,0)}}}"function"==typeof pr.setTimeout&&(Lt=setTimeout),"function"==typeof pr.clearTimeout&&(Mt=clearTimeout);var Qt,jt=[],or=!1,Pr=-1;function hi(){!or||!Qt||(or=!1,Qt.length?jt=Qt.concat(jt):Pr=-1,jt.length&&vn())}function vn(){if(!or){var o=gn(hi);or=!0;for(var t=jt.length;t;){for(Qt=jt,jt=[];++Pr<t;)Qt&&Qt[Pr].run();Pr=-1,t=jt.length}Qt=null,or=!1,function fi(o){if(Mt===clearTimeout)return clearTimeout(o);if((Mt===yn||!Mt)&&clearTimeout)return Mt=clearTimeout,clearTimeout(o);try{return Mt(o)}catch{try{return Mt.call(null,o)}catch{return Mt.call(this,o)}}}(o)}}function bn(o,t){this.fun=o,this.array=t}function Xt(){}bn.prototype.run=function(){this.fun.apply(null,this.array)};var ki=Xt,Ti=Xt,xi=Xt,Pi=Xt,Si=Xt,Di=Xt,Ai=Xt,ar=pr.performance||{},Ni=ar.now||ar.mozNow||ar.msNow||ar.oNow||ar.webkitNow||function(){return(new Date).getTime()},Bi=new Date,$i={nextTick:function di(o){var t=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)t[e-1]=arguments[e];jt.push(new bn(o,t)),1===jt.length&&!or&&gn(vn)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:ki,addListener:Ti,once:xi,off:Pi,removeListener:Si,removeAllListeners:Di,emit:Ai,binding:function Ii(o){throw new Error("process.binding is not supported")},cwd:function ji(){return"/"},chdir:function Ri(o){throw new Error("process.chdir is not supported")},umask:function Oi(){return 0},hrtime:function Ci(o){var t=.001*Ni.call(ar),e=Math.floor(t),r=Math.floor(t%1*1e9);return o&&(e-=o[0],(r-=o[1])<0&&(e--,r+=1e9)),[e,r]},platform:"browser",release:{},config:{},uptime:function Fi(){return(new Date-Bi)/1e3}};const zt=$i;var xt=[],gt=[],Mi=typeof Uint8Array<"u"?Uint8Array:Array,Qr=!1;function _n(){Qr=!0;for(var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0;t<64;++t)xt[t]=o[t],gt[o.charCodeAt(t)]=t;gt["-".charCodeAt(0)]=62,gt["_".charCodeAt(0)]=63}function qi(o){return xt[o>>18&63]+xt[o>>12&63]+xt[o>>6&63]+xt[63&o]}function Zi(o,t,e){for(var n=[],i=t;i<e;i+=3)n.push(qi((o[i]<<16)+(o[i+1]<<8)+o[i+2]));return n.join("")}function Sr(o,t,e,r,n){var i,a,c=8*n-r-1,f=(1<<c)-1,u=f>>1,y=-7,m=e?n-1:0,v=e?-1:1,g=o[t+m];for(m+=v,i=g&(1<<-y)-1,g>>=-y,y+=c;y>0;i=256*i+o[t+m],m+=v,y-=8);for(a=i&(1<<-y)-1,i>>=-y,y+=r;y>0;a=256*a+o[t+m],m+=v,y-=8);if(0===i)i=1-u;else{if(i===f)return a?NaN:1/0*(g?-1:1);a+=Math.pow(2,r),i-=u}return(g?-1:1)*a*Math.pow(2,i-r)}function En(o,t,e,r,n,i){var a,c,f,u=8*i-n-1,y=(1<<u)-1,m=y>>1,v=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,g=r?0:i-1,w=r?1:-1,b=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(c=isNaN(t)?1:0,a=y):(a=Math.floor(Math.log(t)/Math.LN2),t*(f=Math.pow(2,-a))<1&&(a--,f*=2),(t+=a+m>=1?v/f:v*Math.pow(2,1-m))*f>=2&&(a++,f/=2),a+m>=y?(c=0,a=y):a+m>=1?(c=(t*f-1)*Math.pow(2,n),a+=m):(c=t*Math.pow(2,m-1)*Math.pow(2,n),a=0));n>=8;o[e+g]=255&c,g+=w,c/=256,n-=8);for(a=a<<n|c,u+=n;u>0;o[e+g]=255&a,g+=w,a/=256,u-=8);o[e+g-w]|=128*b}var Ui={}.toString,kn=Array.isArray||function(o){return"[object Array]"==Ui.call(o)};function Xr(){return re.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Rt(o,t){if(Xr()<t)throw new RangeError("Invalid typed array length");return re.TYPED_ARRAY_SUPPORT?(o=new Uint8Array(t)).__proto__=re.prototype:(null===o&&(o=new re(t)),o.length=t),o}function re(o,t,e){if(!(re.TYPED_ARRAY_SUPPORT||this instanceof re))return new re(o,t,e);if("number"==typeof o){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return Jr(this,o)}return Tn(this,o,t,e)}function Tn(o,t,e,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer?function Hi(o,t,e,r){if(e<0||t.byteLength<e)throw new RangeError("'offset' is out of bounds");if(t.byteLength<e+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),re.TYPED_ARRAY_SUPPORT?(o=t).__proto__=re.prototype:o=en(o,t),o}(o,t,e,r):"string"==typeof t?function Vi(o,t,e){if(("string"!=typeof e||""===e)&&(e="utf8"),!re.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var r=0|Pn(t,e),n=(o=Rt(o,r)).write(t,e);return n!==r&&(o=o.slice(0,n)),o}(o,t,e):function Ki(o,t){if(Pt(t)){var e=0|tn(t.length);return 0===(o=Rt(o,e)).length||t.copy(o,0,0,e),o}if(t){if(typeof ArrayBuffer<"u"&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||function ms(o){return o!=o}(t.length)?Rt(o,0):en(o,t);if("Buffer"===t.type&&kn(t.data))return en(o,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(o,t)}function xn(o){if("number"!=typeof o)throw new TypeError('"size" argument must be a number');if(o<0)throw new RangeError('"size" argument must not be negative')}function Jr(o,t){if(xn(t),o=Rt(o,t<0?0:0|tn(t)),!re.TYPED_ARRAY_SUPPORT)for(var e=0;e<t;++e)o[e]=0;return o}function en(o,t){var e=t.length<0?0:0|tn(t.length);o=Rt(o,e);for(var r=0;r<e;r+=1)o[r]=255&t[r];return o}function tn(o){if(o>=Xr())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Xr().toString(16)+" bytes");return 0|o}function Pt(o){return!(null==o||!o._isBuffer)}function Pn(o,t){if(Pt(o))return o.length;if(typeof ArrayBuffer<"u"&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(o)||o instanceof ArrayBuffer))return o.byteLength;"string"!=typeof o&&(o=""+o);var e=o.length;if(0===e)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":case void 0:return Ir(o).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e;case"hex":return e>>>1;case"base64":return Cn(o).length;default:if(r)return Ir(o).length;t=(""+t).toLowerCase(),r=!0}}function Yi(o,t,e){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===e||e>this.length)&&(e=this.length),e<=0)||(e>>>=0)<=(t>>>=0))return"";for(o||(o="utf8");;)switch(o){case"hex":return os(this,t,e);case"utf8":case"utf-8":return In(this,t,e);case"ascii":return is(this,t,e);case"latin1":case"binary":return ss(this,t,e);case"base64":return rs(this,t,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return as(this,t,e);default:if(r)throw new TypeError("Unknown encoding: "+o);o=(o+"").toLowerCase(),r=!0}}function Jt(o,t,e){var r=o[t];o[t]=o[e],o[e]=r}function Sn(o,t,e,r,n){if(0===o.length)return-1;if("string"==typeof e?(r=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,isNaN(e)&&(e=n?0:o.length-1),e<0&&(e=o.length+e),e>=o.length){if(n)return-1;e=o.length-1}else if(e<0){if(!n)return-1;e=0}if("string"==typeof t&&(t=re.from(t,r)),Pt(t))return 0===t.length?-1:Dn(o,t,e,r,n);if("number"==typeof t)return t&=255,re.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(o,t,e):Uint8Array.prototype.lastIndexOf.call(o,t,e):Dn(o,[t],e,r,n);throw new TypeError("val must be string, number or Buffer")}function Dn(o,t,e,r,n){var u,i=1,a=o.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(o.length<2||t.length<2)return-1;i=2,a/=2,c/=2,e/=2}function f(g,w){return 1===i?g[w]:g.readUInt16BE(w*i)}if(n){var y=-1;for(u=e;u<a;u++)if(f(o,u)===f(t,-1===y?0:u-y)){if(-1===y&&(y=u),u-y+1===c)return y*i}else-1!==y&&(u-=u-y),y=-1}else for(e+c>a&&(e=a-c),u=e;u>=0;u--){for(var m=!0,v=0;v<c;v++)if(f(o,u+v)!==f(t,v)){m=!1;break}if(m)return u}return-1}function Qi(o,t,e,r){e=Number(e)||0;var n=o.length-e;r?(r=Number(r))>n&&(r=n):r=n;var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var a=0;a<r;++a){var c=parseInt(t.substr(2*a,2),16);if(isNaN(c))return a;o[e+a]=c}return a}function Xi(o,t,e,r){return jr(Ir(t,o.length-e),o,e,r)}function An(o,t,e,r){return jr(function hs(o){for(var t=[],e=0;e<o.length;++e)t.push(255&o.charCodeAt(e));return t}(t),o,e,r)}function Ji(o,t,e,r){return An(o,t,e,r)}function es(o,t,e,r){return jr(Cn(t),o,e,r)}function ts(o,t,e,r){return jr(function ds(o,t){for(var e,r,i=[],a=0;a<o.length&&!((t-=2)<0);++a)r=(e=o.charCodeAt(a))>>8,i.push(e%256),i.push(r);return i}(t,o.length-e),o,e,r)}function rs(o,t,e){return function wn(o){Qr||_n();for(var t,e=o.length,r=e%3,n="",i=[],a=16383,c=0,f=e-r;c<f;c+=a)i.push(Zi(o,c,c+a>f?f:c+a));return 1===r?(n+=xt[(t=o[e-1])>>2],n+=xt[t<<4&63],n+="=="):2===r&&(n+=xt[(t=(o[e-2]<<8)+o[e-1])>>10],n+=xt[t>>4&63],n+=xt[t<<2&63],n+="="),i.push(n),i.join("")}(0===t&&e===o.length?o:o.slice(t,e))}function In(o,t,e){e=Math.min(o.length,e);for(var r=[],n=t;n<e;){var f,u,y,m,i=o[n],a=null,c=i>239?4:i>223?3:i>191?2:1;if(n+c<=e)switch(c){case 1:i<128&&(a=i);break;case 2:128==(192&(f=o[n+1]))&&(m=(31&i)<<6|63&f)>127&&(a=m);break;case 3:u=o[n+2],128==(192&(f=o[n+1]))&&128==(192&u)&&(m=(15&i)<<12|(63&f)<<6|63&u)>2047&&(m<55296||m>57343)&&(a=m);break;case 4:u=o[n+2],y=o[n+3],128==(192&(f=o[n+1]))&&128==(192&u)&&128==(192&y)&&(m=(15&i)<<18|(63&f)<<12|(63&u)<<6|63&y)>65535&&m<1114112&&(a=m)}null===a?(a=65533,c=1):a>65535&&(r.push((a-=65536)>>>10&1023|55296),a=56320|1023&a),r.push(a),n+=c}return function ns(o){var t=o.length;if(t<=jn)return String.fromCharCode.apply(String,o);for(var e="",r=0;r<t;)e+=String.fromCharCode.apply(String,o.slice(r,r+=jn));return e}(r)}re.TYPED_ARRAY_SUPPORT=void 0===pr.TYPED_ARRAY_SUPPORT||pr.TYPED_ARRAY_SUPPORT,re.poolSize=8192,re._augment=function(o){return o.__proto__=re.prototype,o},re.from=function(o,t,e){return Tn(null,o,t,e)},re.TYPED_ARRAY_SUPPORT&&(re.prototype.__proto__=Uint8Array.prototype,re.__proto__=Uint8Array),re.alloc=function(o,t,e){return function Gi(o,t,e,r){return xn(t),t<=0?Rt(o,t):void 0!==e?"string"==typeof r?Rt(o,t).fill(e,r):Rt(o,t).fill(e):Rt(o,t)}(null,o,t,e)},re.allocUnsafe=function(o){return Jr(null,o)},re.allocUnsafeSlow=function(o){return Jr(null,o)},re.isBuffer=function ps(o){return null!=o&&(!!o._isBuffer||Bn(o)||function ys(o){return"function"==typeof o.readFloatLE&&"function"==typeof o.slice&&Bn(o.slice(0,0))}(o))},re.compare=function(t,e){if(!Pt(t)||!Pt(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,a=Math.min(r,n);i<a;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},re.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},re.concat=function(t,e){if(!kn(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return re.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=re.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var a=t[r];if(!Pt(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,i),i+=a.length}return n},re.byteLength=Pn,re.prototype._isBuffer=!0,re.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)Jt(this,e,e+1);return this},re.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)Jt(this,e,e+3),Jt(this,e+1,e+2);return this},re.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)Jt(this,e,e+7),Jt(this,e+1,e+6),Jt(this,e+2,e+5),Jt(this,e+3,e+4);return this},re.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?In(this,0,t):Yi.apply(this,arguments)},re.prototype.equals=function(t){if(!Pt(t))throw new TypeError("Argument must be a Buffer");return this===t||0===re.compare(this,t)},re.prototype.inspect=function(){var t="";return this.length>0&&(t=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(t+=" ... ")),"<Buffer "+t+">"},re.prototype.compare=function(t,e,r,n,i){if(!Pt(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;for(var a=(i>>>=0)-(n>>>=0),c=(r>>>=0)-(e>>>=0),f=Math.min(a,c),u=this.slice(n,i),y=t.slice(e,r),m=0;m<f;++m)if(u[m]!==y[m]){a=u[m],c=y[m];break}return a<c?-1:c<a?1:0},re.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},re.prototype.indexOf=function(t,e,r){return Sn(this,t,e,r,!0)},re.prototype.lastIndexOf=function(t,e,r){return Sn(this,t,e,r,!1)},re.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var a=!1;;)switch(n){case"hex":return Qi(this,t,e,r);case"utf8":case"utf-8":return Xi(this,t,e,r);case"ascii":return An(this,t,e,r);case"latin1":case"binary":return Ji(this,t,e,r);case"base64":return es(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ts(this,t,e,r);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},re.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var jn=4096;function is(o,t,e){var r="";e=Math.min(o.length,e);for(var n=t;n<e;++n)r+=String.fromCharCode(127&o[n]);return r}function ss(o,t,e){var r="";e=Math.min(o.length,e);for(var n=t;n<e;++n)r+=String.fromCharCode(o[n]);return r}function os(o,t,e){var r=o.length;(!t||t<0)&&(t=0),(!e||e<0||e>r)&&(e=r);for(var n="",i=t;i<e;++i)n+=fs(o[i]);return n}function as(o,t,e){for(var r=o.slice(t,e),n="",i=0;i<r.length;i+=2)n+=String.fromCharCode(r[i]+256*r[i+1]);return n}function rt(o,t,e){if(o%1!=0||o<0)throw new RangeError("offset is not uint");if(o+t>e)throw new RangeError("Trying to access beyond buffer length")}function lt(o,t,e,r,n,i){if(!Pt(o))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<i)throw new RangeError('"value" argument is out of bounds');if(e+r>o.length)throw new RangeError("Index out of range")}function Dr(o,t,e,r){t<0&&(t=65535+t+1);for(var n=0,i=Math.min(o.length-e,2);n<i;++n)o[e+n]=(t&255<<8*(r?n:1-n))>>>8*(r?n:1-n)}function Ar(o,t,e,r){t<0&&(t=4294967295+t+1);for(var n=0,i=Math.min(o.length-e,4);n<i;++n)o[e+n]=t>>>8*(r?n:3-n)&255}function Rn(o,t,e,r,n,i){if(e+r>o.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function On(o,t,e,r,n){return n||Rn(o,0,e,4),En(o,t,e,r,23,4),e+4}function Nn(o,t,e,r,n){return n||Rn(o,0,e,8),En(o,t,e,r,52,8),e+8}re.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),re.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=re.prototype;else{var i=e-t;n=new re(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+t]}return n},re.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||rt(t,e,this.length);for(var n=this[t],i=1,a=0;++a<e&&(i*=256);)n+=this[t+a]*i;return n},re.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||rt(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},re.prototype.readUInt8=function(t,e){return e||rt(t,1,this.length),this[t]},re.prototype.readUInt16LE=function(t,e){return e||rt(t,2,this.length),this[t]|this[t+1]<<8},re.prototype.readUInt16BE=function(t,e){return e||rt(t,2,this.length),this[t]<<8|this[t+1]},re.prototype.readUInt32LE=function(t,e){return e||rt(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},re.prototype.readUInt32BE=function(t,e){return e||rt(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},re.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||rt(t,e,this.length);for(var n=this[t],i=1,a=0;++a<e&&(i*=256);)n+=this[t+a]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},re.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||rt(t,e,this.length);for(var n=e,i=1,a=this[t+--n];n>0&&(i*=256);)a+=this[t+--n]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*e)),a},re.prototype.readInt8=function(t,e){return e||rt(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},re.prototype.readInt16LE=function(t,e){e||rt(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},re.prototype.readInt16BE=function(t,e){e||rt(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},re.prototype.readInt32LE=function(t,e){return e||rt(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},re.prototype.readInt32BE=function(t,e){return e||rt(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},re.prototype.readFloatLE=function(t,e){return e||rt(t,4,this.length),Sr(this,t,!0,23,4)},re.prototype.readFloatBE=function(t,e){return e||rt(t,4,this.length),Sr(this,t,!1,23,4)},re.prototype.readDoubleLE=function(t,e){return e||rt(t,8,this.length),Sr(this,t,!0,52,8)},re.prototype.readDoubleBE=function(t,e){return e||rt(t,8,this.length),Sr(this,t,!1,52,8)},re.prototype.writeUIntLE=function(t,e,r,n){t=+t,e|=0,r|=0,n||lt(this,t,e,r,Math.pow(2,8*r)-1,0);var a=1,c=0;for(this[e]=255&t;++c<r&&(a*=256);)this[e+c]=t/a&255;return e+r},re.prototype.writeUIntBE=function(t,e,r,n){t=+t,e|=0,r|=0,n||lt(this,t,e,r,Math.pow(2,8*r)-1,0);var a=r-1,c=1;for(this[e+a]=255&t;--a>=0&&(c*=256);)this[e+a]=t/c&255;return e+r},re.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||lt(this,t,e,1,255,0),re.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},re.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||lt(this,t,e,2,65535,0),re.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):Dr(this,t,e,!0),e+2},re.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||lt(this,t,e,2,65535,0),re.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):Dr(this,t,e,!1),e+2},re.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||lt(this,t,e,4,4294967295,0),re.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):Ar(this,t,e,!0),e+4},re.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||lt(this,t,e,4,4294967295,0),re.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):Ar(this,t,e,!1),e+4},re.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);lt(this,t,e,r,i-1,-i)}var a=0,c=1,f=0;for(this[e]=255&t;++a<r&&(c*=256);)t<0&&0===f&&0!==this[e+a-1]&&(f=1),this[e+a]=(t/c>>0)-f&255;return e+r},re.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);lt(this,t,e,r,i-1,-i)}var a=r-1,c=1,f=0;for(this[e+a]=255&t;--a>=0&&(c*=256);)t<0&&0===f&&0!==this[e+a+1]&&(f=1),this[e+a]=(t/c>>0)-f&255;return e+r},re.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||lt(this,t,e,1,127,-128),re.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},re.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||lt(this,t,e,2,32767,-32768),re.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):Dr(this,t,e,!0),e+2},re.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||lt(this,t,e,2,32767,-32768),re.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):Dr(this,t,e,!1),e+2},re.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||lt(this,t,e,4,2147483647,-2147483648),re.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):Ar(this,t,e,!0),e+4},re.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||lt(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),re.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):Ar(this,t,e,!1),e+4},re.prototype.writeFloatLE=function(t,e,r){return On(this,t,e,!0,r)},re.prototype.writeFloatBE=function(t,e,r){return On(this,t,e,!1,r)},re.prototype.writeDoubleLE=function(t,e,r){return Nn(this,t,e,!0,r)},re.prototype.writeDoubleBE=function(t,e,r){return Nn(this,t,e,!1,r)},re.prototype.copy=function(t,e,r,n){if(r||(r=0),!n&&0!==n&&(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r||0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var a,i=n-r;if(this===t&&r<e&&e<n)for(a=i-1;a>=0;--a)t[a+e]=this[a+r];else if(i<1e3||!re.TYPED_ARRAY_SUPPORT)for(a=0;a<i;++a)t[a+e]=this[a+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+i),e);return i},re.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!re.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var a;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(a=e;a<r;++a)this[a]=t;else{var c=Pt(t)?t:Ir(new re(t,n).toString()),f=c.length;for(a=0;a<r-e;++a)this[a+e]=c[a%f]}return this};var cs=/[^+\/0-9A-Za-z-_]/g;function fs(o){return o<16?"0"+o.toString(16):o.toString(16)}function Ir(o,t){t=t||1/0;for(var e,r=o.length,n=null,i=[],a=0;a<r;++a){if((e=o.charCodeAt(a))>55295&&e<57344){if(!n){if(e>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&i.push(239,191,189);continue}n=e;continue}if(e<56320){(t-=3)>-1&&i.push(239,191,189),n=e;continue}e=65536+(n-55296<<10|e-56320)}else n&&(t-=3)>-1&&i.push(239,191,189);if(n=null,e<128){if((t-=1)<0)break;i.push(e)}else if(e<2048){if((t-=2)<0)break;i.push(e>>6|192,63&e|128)}else if(e<65536){if((t-=3)<0)break;i.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(e<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return i}function Cn(o){return function zi(o){Qr||_n();var t,e,r,n,i,a,c=o.length;if(c%4>0)throw new Error("Invalid string. Length must be a multiple of 4");a=new Mi(3*c/4-(i="="===o[c-2]?2:"="===o[c-1]?1:0)),r=i>0?c-4:c;var f=0;for(t=0,e=0;t<r;t+=4,e+=3)n=gt[o.charCodeAt(t)]<<18|gt[o.charCodeAt(t+1)]<<12|gt[o.charCodeAt(t+2)]<<6|gt[o.charCodeAt(t+3)],a[f++]=n>>16&255,a[f++]=n>>8&255,a[f++]=255&n;return 2===i?(n=gt[o.charCodeAt(t)]<<2|gt[o.charCodeAt(t+1)]>>4,a[f++]=255&n):1===i&&(n=gt[o.charCodeAt(t)]<<10|gt[o.charCodeAt(t+1)]<<4|gt[o.charCodeAt(t+2)]>>2,a[f++]=n>>8&255,a[f++]=255&n),a}(function us(o){if((o=function ls(o){return o.trim?o.trim():o.replace(/^\s+|\s+$/g,"")}(o).replace(cs,"")).length<2)return"";for(;o.length%4!=0;)o+="=";return o}(o))}function jr(o,t,e,r){for(var n=0;n<r&&!(n+e>=t.length||n>=o.length);++n)t[n+e]=o[n];return n}function Bn(o){return!!o.constructor&&"function"==typeof o.constructor.isBuffer&&o.constructor.isBuffer(o)}var qt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Fn(o){if(o.__esModule)return o;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(o).forEach(function(e){var r=Object.getOwnPropertyDescriptor(o,e);Object.defineProperty(t,e,r.get?r:{enumerable:!0,get:function(){return o[e]}})}),t}function Zt(o){throw new Error('Could not dynamically require "'+o+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var $n={exports:{}};const gs=Fn(Object.freeze({__proto__:null,default:{}}));function Ln(o,t){for(var e=0,r=o.length-1;r>=0;r--){var n=o[r];"."===n?o.splice(r,1):".."===n?(o.splice(r,1),e++):e&&(o.splice(r,1),e--)}if(t)for(;e--;e)o.unshift("..");return o}var vs=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,rn=function(o){return vs.exec(o).slice(1)};function Rr(){for(var o="",t=!1,e=arguments.length-1;e>=-1&&!t;e--){var r=e>=0?arguments[e]:"/";if("string"!=typeof r)throw new TypeError("Arguments to path.resolve must be strings");r&&(o=r+"/"+o,t="/"===r.charAt(0))}return(t?"/":"")+(o=Ln(on(o.split("/"),function(n){return!!n}),!t).join("/"))||"."}function nn(o){var t=sn(o),e="/"===_s(o,-1);return!(o=Ln(on(o.split("/"),function(r){return!!r}),!t).join("/"))&&!t&&(o="."),o&&e&&(o+="/"),(t?"/":"")+o}function sn(o){return"/"===o.charAt(0)}function Mn(){return nn(on(Array.prototype.slice.call(arguments,0),function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))}function zn(o,t){function e(u){for(var y=0;y<u.length&&""===u[y];y++);for(var m=u.length-1;m>=0&&""===u[m];m--);return y>m?[]:u.slice(y,m-y+1)}o=Rr(o).substr(1),t=Rr(t).substr(1);for(var r=e(o.split("/")),n=e(t.split("/")),i=Math.min(r.length,n.length),a=i,c=0;c<i;c++)if(r[c]!==n[c]){a=c;break}var f=[];for(c=a;c<r.length;c++)f.push("..");return(f=f.concat(n.slice(a))).join("/")}function Un(o){var t=rn(o),e=t[0],r=t[1];return e||r?(r&&(r=r.substr(0,r.length-1)),e+r):"."}function Wn(o,t){var e=rn(o)[2];return t&&e.substr(-1*t.length)===t&&(e=e.substr(0,e.length-t.length)),e}function Gn(o){return rn(o)[3]}function on(o,t){if(o.filter)return o.filter(t);for(var e=[],r=0;r<o.length;r++)t(o[r],r,o)&&e.push(o[r]);return e}var _s=function(o,t,e){return o.substr(t,e)};const ws=Fn(Object.freeze({__proto__:null,resolve:Rr,normalize:nn,isAbsolute:sn,join:Mn,relative:zn,sep:"/",delimiter:":",dirname:Un,basename:Wn,extname:Gn,default:{extname:Gn,basename:Wn,dirname:Un,sep:"/",delimiter:":",relative:zn,join:Mn,isAbsolute:sn,normalize:nn,resolve:Rr}}));var o,e,r;e=void 0,r=function(n){return e||(e=new Promise(function(i,a){var u,c=typeof n<"u"?n:{},f=c.onAbort;c.onAbort=function(s){a(new Error(s)),f&&f(s)},c.postRun=c.postRun||[],c.postRun.push(function(){i(c)}),o=void 0,u||=typeof c<"u"?c:{},u.onRuntimeInitialized=function(){function s(Z,ce){switch(typeof ce){case"boolean":mo(Z,ce?1:0);break;case"number":lo(Z,ce);break;case"string":fo(Z,ce,-1,-1);break;case"object":if(null===ce)ci(Z);else if(null!=ce.length){var Te=Vt(ce,dr);ho(Z,Te,ce.length,-1),Hr(Te)}else Yr(Z,"Wrong API use : tried to return a value of an unknown type ("+ce+").",-1);break;default:ci(Z)}}function l(Z,ce){for(var Te=[],Ae=0;Ae<Z;Ae+=1){var Be=V(ce+4*Ae,"i32"),Ve=so(Be);if(1===Ve||2===Ve)Be=uo(Be);else if(3===Ve)Be=ao(Be);else if(4===Ve){Be=oo(Ve=Be),Ve=co(Ve);for(var kt=new Uint8Array(Be),bt=0;bt<Be;bt+=1)kt[bt]=ee[Ve+bt];Be=kt}else Be=null;Te.push(Be)}return Te}function h(Z,ce){this.La=Z,this.db=ce,this.Ja=1,this.fb=[]}function E(Z,ce){if(this.db=ce,ce=et(Z)+1,this.Ya=Vr(ce),null===this.Ya)throw Error("Unable to allocate memory for the SQL string");ct(Z,de,this.Ya,ce),this.eb=this.Ya,this.Ua=this.ib=null}function j(Z){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),null!=Z){var ce=this.filename,Te="/",Ae=ce;if(Te&&(Te="string"==typeof Te?Te:nr(Te),Ae=ce?z(Te+"/"+ce):Te),Ae=ur(Ae,4095&(void 0!==(ce=cr(!0,!0))?ce:438)|32768,0),Z){if("string"==typeof Z){Te=Array(Z.length);for(var Be=0,Ve=Z.length;Be<Ve;++Be)Te[Be]=Z.charCodeAt(Be);Z=Te}fr(Ae,146|ce),Wr(Te=It(Ae,577),Z,0,Z.length,0),wr(Te),fr(Ae,ce)}}this.handleError(De(this.filename,K)),this.db=V(K,"i32"),li(this.db),this.Za={},this.Na={}}var K=Kt(4),te=u.cwrap,De=te("sqlite3_open","number",["string","number"]),Me=te("sqlite3_close_v2","number",["number"]),Ne=te("sqlite3_exec","number",["number","string","number","number","number"]),tt=te("sqlite3_changes","number",["number"]),nt=te("sqlite3_prepare_v2","number",["number","string","number","number","number"]),ni=te("sqlite3_sql","string",["number"]),qs=te("sqlite3_normalized_sql","string",["number"]),ii=te("sqlite3_prepare_v2","number",["number","number","number","number","number"]),Zs=te("sqlite3_bind_text","number",["number","number","number","number","number"]),si=te("sqlite3_bind_blob","number",["number","number","number","number","number"]),Us=te("sqlite3_bind_double","number",["number","number","number"]),Ws=te("sqlite3_bind_int","number",["number","number","number"]),Gs=te("sqlite3_bind_parameter_index","number",["number","string"]),Vs=te("sqlite3_step","number",["number"]),Hs=te("sqlite3_errmsg","string",["number"]),Ks=te("sqlite3_column_count","number",["number"]),Ys=te("sqlite3_data_count","number",["number"]),Qs=te("sqlite3_column_double","number",["number","number"]),oi=te("sqlite3_column_text","string",["number","number"]),Xs=te("sqlite3_column_blob","number",["number","number"]),Js=te("sqlite3_column_bytes","number",["number","number"]),eo=te("sqlite3_column_type","number",["number","number"]),to=te("sqlite3_column_name","string",["number","number"]),ro=te("sqlite3_reset","number",["number"]),no=te("sqlite3_clear_bindings","number",["number"]),io=te("sqlite3_finalize","number",["number"]),ai=te("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),so=te("sqlite3_value_type","number",["number"]),oo=te("sqlite3_value_bytes","number",["number"]),ao=te("sqlite3_value_text","string",["number"]),co=te("sqlite3_value_blob","number",["number"]),uo=te("sqlite3_value_double","number",["number"]),lo=te("sqlite3_result_double","",["number","number"]),ci=te("sqlite3_result_null","",["number"]),fo=te("sqlite3_result_text","",["number","string","number","number"]),ho=te("sqlite3_result_blob","",["number","number","number","number"]),mo=te("sqlite3_result_int","",["number","number"]),Yr=te("sqlite3_result_error","",["number","string","number"]),ui=te("sqlite3_aggregate_context","number",["number","number"]),li=te("RegisterExtensionFunctions","number",["number"]);h.prototype.bind=function(Z){if(!this.La)throw"Statement closed";return this.reset(),Array.isArray(Z)?this.wb(Z):null==Z||"object"!=typeof Z||this.xb(Z)},h.prototype.step=function(){if(!this.La)throw"Statement closed";this.Ja=1;var Z=Vs(this.La);switch(Z){case 100:return!0;case 101:return!1;default:throw this.db.handleError(Z)}},h.prototype.rb=function(Z){return null==Z&&(Z=this.Ja,this.Ja+=1),Qs(this.La,Z)},h.prototype.Ab=function(Z){if(null==Z&&(Z=this.Ja,this.Ja+=1),Z=oi(this.La,Z),"function"!=typeof BigInt)throw Error("BigInt is not supported");return BigInt(Z)},h.prototype.Bb=function(Z){return null==Z&&(Z=this.Ja,this.Ja+=1),oi(this.La,Z)},h.prototype.getBlob=function(Z){null==Z&&(Z=this.Ja,this.Ja+=1);var ce=Js(this.La,Z);Z=Xs(this.La,Z);for(var Te=new Uint8Array(ce),Ae=0;Ae<ce;Ae+=1)Te[Ae]=ee[Z+Ae];return Te},h.prototype.get=function(Z,ce){ce=ce||{},null!=Z&&this.bind(Z)&&this.step(),Z=[];for(var Te=Ys(this.La),Ae=0;Ae<Te;Ae+=1)switch(eo(this.La,Ae)){case 1:var Be=ce.useBigInt?this.Ab(Ae):this.rb(Ae);Z.push(Be);break;case 2:Z.push(this.rb(Ae));break;case 3:Z.push(this.Bb(Ae));break;case 4:Z.push(this.getBlob(Ae));break;default:Z.push(null)}return Z},h.prototype.getColumnNames=function(){for(var Z=[],ce=Ks(this.La),Te=0;Te<ce;Te+=1)Z.push(to(this.La,Te));return Z},h.prototype.getAsObject=function(Z,ce){Z=this.get(Z,ce),ce=this.getColumnNames();for(var Te={},Ae=0;Ae<ce.length;Ae+=1)Te[ce[Ae]]=Z[Ae];return Te},h.prototype.getSQL=function(){return ni(this.La)},h.prototype.getNormalizedSQL=function(){return qs(this.La)},h.prototype.run=function(Z){return null!=Z&&this.bind(Z),this.step(),this.reset()},h.prototype.nb=function(Z,ce){null==ce&&(ce=this.Ja,this.Ja+=1),Z=st(Z);var Te=Vt(Z,dr);this.fb.push(Te),this.db.handleError(Zs(this.La,ce,Te,Z.length-1,0))},h.prototype.vb=function(Z,ce){null==ce&&(ce=this.Ja,this.Ja+=1);var Te=Vt(Z,dr);this.fb.push(Te),this.db.handleError(si(this.La,ce,Te,Z.length,0))},h.prototype.mb=function(Z,ce){null==ce&&(ce=this.Ja,this.Ja+=1),this.db.handleError((Z===(0|Z)?Ws:Us)(this.La,ce,Z))},h.prototype.yb=function(Z){null==Z&&(Z=this.Ja,this.Ja+=1),si(this.La,Z,0,0,0)},h.prototype.ob=function(Z,ce){switch(null==ce&&(ce=this.Ja,this.Ja+=1),typeof Z){case"string":return void this.nb(Z,ce);case"number":return void this.mb(Z,ce);case"bigint":return void this.nb(Z.toString(),ce);case"boolean":return void this.mb(Z+0,ce);case"object":if(null===Z)return void this.yb(ce);if(null!=Z.length)return void this.vb(Z,ce)}throw"Wrong API use : tried to bind a value of an unknown type ("+Z+")."},h.prototype.xb=function(Z){var ce=this;return Object.keys(Z).forEach(function(Te){var Ae=Gs(ce.La,Te);0!==Ae&&ce.ob(Z[Te],Ae)}),!0},h.prototype.wb=function(Z){for(var ce=0;ce<Z.length;ce+=1)this.ob(Z[ce],ce+1);return!0},h.prototype.reset=function(){return this.freemem(),0===no(this.La)&&0===ro(this.La)},h.prototype.freemem=function(){for(var Z;void 0!==(Z=this.fb.pop());)Hr(Z)},h.prototype.free=function(){this.freemem();var Z=0===io(this.La);return delete this.db.Za[this.La],this.La=0,Z},E.prototype.next=function(){if(null===this.Ya)return{done:!0};if(null!==this.Ua&&(this.Ua.free(),this.Ua=null),!this.db.db)throw this.gb(),Error("Database closed");var Z=Tr(),ce=Kt(4);D(K),D(ce);try{this.db.handleError(ii(this.db.db,this.eb,-1,K,ce)),this.eb=V(ce,"i32");var Te=V(K,"i32");return 0===Te?(this.gb(),{done:!0}):(this.Ua=new h(Te,this.db),this.db.Za[Te]=this.Ua,{value:this.Ua,done:!1})}catch(Ae){throw this.ib=ne(this.eb),this.gb(),Ae}finally{xr(Z)}},E.prototype.gb=function(){Hr(this.Ya),this.Ya=null},E.prototype.getRemainingSQL=function(){return null!==this.ib?this.ib:ne(this.eb)},"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator&&(E.prototype[Symbol.iterator]=function(){return this}),j.prototype.run=function(Z,ce){if(!this.db)throw"Database closed";if(ce){Z=this.prepare(Z,ce);try{Z.step()}finally{Z.free()}}else this.handleError(Ne(this.db,Z,0,0,K));return this},j.prototype.exec=function(Z,ce,Te){if(!this.db)throw"Database closed";var Ae=Tr(),Be=null;try{var Ve=Ft(Z),kt=Kt(4);for(Z=[];0!==V(Ve,"i8");){D(K),D(kt),this.handleError(ii(this.db,Ve,-1,K,kt));var bt=V(K,"i32");if(Ve=V(kt,"i32"),0!==bt){var yt=null;for(Be=new h(bt,this),null!=ce&&Be.bind(ce);Be.step();)null===yt&&(yt={columns:Be.getColumnNames(),values:[]},Z.push(yt)),yt.values.push(Be.get(null,Te));Be.free()}}return Z}catch(Tt){throw Be&&Be.free(),Tt}finally{xr(Ae)}},j.prototype.each=function(Z,ce,Te,Ae,Be){"function"==typeof ce&&(Ae=Te,Te=ce,ce=void 0),Z=this.prepare(Z,ce);try{for(;Z.step();)Te(Z.getAsObject(null,Be))}finally{Z.free()}if("function"==typeof Ae)return Ae()},j.prototype.prepare=function(Z,ce){if(D(K),this.handleError(nt(this.db,Z,-1,K,0)),0===(Z=V(K,"i32")))throw"Nothing to prepare";var Te=new h(Z,this);return null!=ce&&Te.bind(ce),this.Za[Z]=Te},j.prototype.iterateStatements=function(Z){return new E(Z,this)},j.prototype.export=function(){Object.values(this.Za).forEach(function(ce){ce.free()}),Object.values(this.Na).forEach($t),this.Na={},this.handleError(Me(this.db));var Z=function hn(s){var l,h=It(s,h||0);s=Gt(s).size;var E=new Uint8Array(s);return hr(h,E,0,s,0),l=E,wr(h),l}(this.filename);return this.handleError(De(this.filename,K)),this.db=V(K,"i32"),li(this.db),Z},j.prototype.close=function(){null!==this.db&&(Object.values(this.Za).forEach(function(Z){Z.free()}),Object.values(this.Na).forEach($t),this.Na={},this.handleError(Me(this.db)),_r("/"+this.filename),this.db=null)},j.prototype.handleError=function(Z){if(0===Z)return null;throw Z=Hs(this.db),Error(Z)},j.prototype.getRowsModified=function(){return tt(this.db)},j.prototype.create_function=function(Z,ce){Object.prototype.hasOwnProperty.call(this.Na,Z)&&($t(this.Na[Z]),delete this.Na[Z]);var Te=Gr(function(Ae,Be,Ve){Be=l(Be,Ve);try{var kt=ce.apply(null,Be)}catch(bt){return void Yr(Ae,bt,-1)}s(Ae,kt)},"viii");return this.Na[Z]=Te,this.handleError(ai(this.db,Z,ce.length,1,0,Te,0,0,0)),this},j.prototype.create_aggregate=function(Z,ce){var Te=ce.init||function(){return null},Ae=ce.finalize||function(yt){return yt},Be=ce.step;if(!Be)throw"An aggregate function must have a step function in "+Z;var Ve={};Object.hasOwnProperty.call(this.Na,Z)&&($t(this.Na[Z]),delete this.Na[Z]),ce=Z+"__finalize",Object.hasOwnProperty.call(this.Na,ce)&&($t(this.Na[ce]),delete this.Na[ce]);var kt=Gr(function(yt,Tt,dn){var sr=ui(yt,1);Object.hasOwnProperty.call(Ve,sr)||(Ve[sr]=Te()),Tt=l(Tt,dn),Tt=[Ve[sr]].concat(Tt);try{Ve[sr]=Be.apply(null,Tt)}catch(po){delete Ve[sr],Yr(yt,po,-1)}},"viii"),bt=Gr(function(yt){var Tt=ui(yt,1);try{var dn=Ae(Ve[Tt])}catch(sr){return delete Ve[Tt],void Yr(yt,sr,-1)}s(yt,dn),delete Ve[Tt]},"vi");return this.Na[Z]=kt,this.Na[ce]=bt,this.handleError(ai(this.db,Z,Be.length-1,1,0,0,kt,bt,0)),this},u.Database=j};var T,k,S,y=Object.assign({},u),m="./this.program",v="object"==typeof window,g="function"==typeof importScripts,w="object"==typeof zt&&"object"==typeof zt.versions&&"string"==typeof zt.versions.node,b="";if(w){var N=gs,M=ws;b=g?M.dirname(b)+"/":"/Volumes/Development_Lacie/Development/new/jeep-sqlite/node_modules/sql.js/dist/",T=(s,l)=>(s=Ze(s)?new URL(s):M.normalize(s),N.readFileSync(s,l?void 0:"utf8")),S=s=>((s=T(s,!0)).buffer||(s=new Uint8Array(s)),s),k=(s,l,h,E=!0)=>{s=Ze(s)?new URL(s):M.normalize(s),N.readFile(s,E?void 0:"utf8",(j,K)=>{j?h(j):l(E?K.buffer:K)})},!u.thisProgram&&1<zt.argv.length&&(m=zt.argv[1].replace(/\\/g,"/")),zt.argv.slice(2),o.exports=u,u.inspect=()=>"[Emscripten Module object]"}else(v||g)&&(g?b=self.location.href:typeof document<"u"&&document.currentScript&&(b=document.currentScript.src),b=0!==b.indexOf("blob:")?b.substr(0,b.replace(/[?#].*/,"").lastIndexOf("/")+1):"",T=s=>{var l=new XMLHttpRequest;return l.open("GET",s,!1),l.send(null),l.responseText},g&&(S=s=>{var l=new XMLHttpRequest;return l.open("GET",s,!1),l.responseType="arraybuffer",l.send(null),new Uint8Array(l.response)}),k=(s,l,h)=>{var E=new XMLHttpRequest;E.open("GET",s,!0),E.responseType="arraybuffer",E.onload=()=>{200==E.status||0==E.status&&E.response?l(E.response):h()},E.onerror=h,E.send(null)});var q,A=u.print||console.log.bind(console),G=u.printErr||console.error.bind(console);Object.assign(u,y),y=null,u.thisProgram&&(m=u.thisProgram),u.wasmBinary&&(q=u.wasmBinary),"object"!=typeof WebAssembly&&ve("no native wasm support detected");var Q,ee,de,I,L,p,J,Pe,H=!1;function ae(){var s=Q.buffer;u.HEAP8=ee=new Int8Array(s),u.HEAP16=I=new Int16Array(s),u.HEAPU8=de=new Uint8Array(s),u.HEAPU16=new Uint16Array(s),u.HEAP32=L=new Int32Array(s),u.HEAPU32=p=new Uint32Array(s),u.HEAPF32=J=new Float32Array(s),u.HEAPF64=Pe=new Float64Array(s)}var Ie=[],fe=[],Se=[];function W(){var s=u.preRun.shift();Ie.unshift(s)}var U=0,Ee=null;function ve(s){throw u.onAbort?.(s),G(s="Aborted("+s+")"),H=!0,new WebAssembly.RuntimeError(s+". Build with -sASSERTIONS for more info.")}var He,ge=s=>s.startsWith("data:application/octet-stream;base64,"),Ze=s=>s.startsWith("file://");if(!ge(He="sql-wasm.wasm")){var Ce=He;He=u.locateFile?u.locateFile(Ce,b):b+Ce}function $e(s){if(s==He&&q)return new Uint8Array(q);if(S)return S(s);throw"both async and sync fetching of the wasm failed"}function Ge(s,l,h){return function Je(s){if(!q&&(v||g)){if("function"==typeof fetch&&!Ze(s))return fetch(s,{credentials:"same-origin"}).then(l=>{if(!l.ok)throw"failed to load wasm binary file at '"+s+"'";return l.arrayBuffer()}).catch(()=>$e(s));if(k)return new Promise((l,h)=>{k(s,E=>l(new Uint8Array(E)),h)})}return Promise.resolve().then(()=>$e(s))}(s).then(E=>WebAssembly.instantiate(E,l)).then(E=>E).then(h,E=>{G(`failed to asynchronously prepare wasm: ${E}`),ve(E)})}var we,d,Y=s=>{for(;0<s.length;)s.shift()(u)};function V(s,l="i8"){switch(l.endsWith("*")&&(l="*"),l){case"i1":case"i8":return ee[s>>0];case"i16":return I[s>>1];case"i32":return L[s>>2];case"i64":ve("to do getValue(i64) use WASM_BIGINT");case"float":return J[s>>2];case"double":return Pe[s>>3];case"*":return p[s>>2];default:ve(`invalid type for getValue: ${l}`)}}function D(s){var l="i32";switch(l.endsWith("*")&&(l="*"),l){case"i1":case"i8":ee[s>>0]=0;break;case"i16":I[s>>1]=0;break;case"i32":L[s>>2]=0;break;case"i64":ve("to do setValue(i64) use WASM_BIGINT");case"float":J[s>>2]=0;break;case"double":Pe[s>>3]=0;break;case"*":p[s>>2]=0;break;default:ve(`invalid type for setValue: ${l}`)}}var P=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,C=(s,l,h)=>{var E=l+h;for(h=l;s[h]&&!(h>=E);)++h;if(16<h-l&&s.buffer&&P)return P.decode(s.subarray(l,h));for(E="";l<h;){var j=s[l++];if(128&j){var K=63&s[l++];if(192==(224&j))E+=String.fromCharCode((31&j)<<6|K);else{var te=63&s[l++];65536>(j=224==(240&j)?(15&j)<<12|K<<6|te:(7&j)<<18|K<<12|te<<6|63&s[l++])?E+=String.fromCharCode(j):(j-=65536,E+=String.fromCharCode(55296|j>>10,56320|1023&j))}}else E+=String.fromCharCode(j)}return E},ne=(s,l)=>s?C(de,s,l):"",se=(s,l)=>{for(var h=0,E=s.length-1;0<=E;E--){var j=s[E];"."===j?s.splice(E,1):".."===j?(s.splice(E,1),h++):h&&(s.splice(E,1),h--)}if(l)for(;h;h--)s.unshift("..");return s},z=s=>{var l="/"===s.charAt(0),h="/"===s.substr(-1);return(s=se(s.split("/").filter(E=>!!E),!l).join("/"))||l||(s="."),s&&h&&(s+="/"),(l?"/":"")+s},he=s=>{var l=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(s).slice(1);return s=l[0],l=l[1],s||l?(l&&=l.substr(0,l.length-1),s+l):"."},be=s=>{if("/"===s)return"/";var l=(s=(s=z(s)).replace(/\/$/,"")).lastIndexOf("/");return-1===l?s:s.substr(l+1)},ke=s=>(ke=(()=>{if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues)return h=>crypto.getRandomValues(h);if(w)try{var s=mr(1902);if(s.randomFillSync)return h=>s.randomFillSync(h);var l=s.randomBytes;return h=>(h.set(l(h.byteLength)),h)}catch{}ve("initRandomDevice")})())(s);function Le(){for(var s="",l=!1,h=arguments.length-1;-1<=h&&!l;h--){if("string"!=typeof(l=0<=h?arguments[h]:"/"))throw new TypeError("Arguments to path.resolve must be strings");if(!l)return"";s=l+"/"+s,l="/"===l.charAt(0)}return(l?"/":"")+(s=se(s.split("/").filter(E=>!!E),!l).join("/"))||"."}var Re=[],et=s=>{for(var l=0,h=0;h<s.length;++h){var E=s.charCodeAt(h);127>=E?l++:2047>=E?l+=2:55296<=E&&57343>=E?(l+=4,++h):l+=3}return l},ct=(s,l,h,E)=>{if(!(0<E))return 0;var j=h;E=h+E-1;for(var K=0;K<s.length;++K){var te=s.charCodeAt(K);if(55296<=te&&57343>=te&&(te=65536+((1023&te)<<10)|1023&s.charCodeAt(++K)),127>=te){if(h>=E)break;l[h++]=te}else{if(2047>=te){if(h+1>=E)break;l[h++]=192|te>>6}else{if(65535>=te){if(h+2>=E)break;l[h++]=224|te>>12}else{if(h+3>=E)break;l[h++]=240|te>>18,l[h++]=128|te>>12&63}l[h++]=128|te>>6&63}l[h++]=128|63&te}}return l[h]=0,h-j};function st(s,l){var h=Array(et(s)+1);return s=ct(s,h,0,h.length),l&&(h.length=s),h}var wt=[];function Ue(s,l){wt[s]={input:[],output:[],Xa:l},vr(s,Dt)}var Dt={open(s){var l=wt[s.node.rdev];if(!l)throw new ye(43);s.tty=l,s.seekable=!1},close(s){s.tty.Xa.fsync(s.tty)},fsync(s){s.tty.Xa.fsync(s.tty)},read(s,l,h,E){if(!s.tty||!s.tty.Xa.sb)throw new ye(60);for(var j=0,K=0;K<E;K++){try{var te=s.tty.Xa.sb(s.tty)}catch{throw new ye(29)}if(void 0===te&&0===j)throw new ye(6);if(null==te)break;j++,l[h+K]=te}return j&&(s.node.timestamp=Date.now()),j},write(s,l,h,E){if(!s.tty||!s.tty.Xa.jb)throw new ye(60);try{for(var j=0;j<E;j++)s.tty.Xa.jb(s.tty,l[h+j])}catch{throw new ye(29)}return E&&(s.node.timestamp=Date.now()),j}},tr={sb(){e:{if(!Re.length){var s=null;if(w){var l=re.alloc(256),h=0,E=zt.stdin.fd;try{h=N.readSync(E,l)}catch(j){if(!j.toString().includes("EOF"))throw j;h=0}s=0<h?l.slice(0,h).toString("utf-8"):null}else typeof window<"u"&&"function"==typeof window.prompt?null!==(s=window.prompt("Input: "))&&(s+="\n"):"function"==typeof readline&&null!==(s=readline())&&(s+="\n");if(!s){s=null;break e}Re=st(s,!0)}s=Re.shift()}return s},jb(s,l){null===l||10===l?(A(C(s.output,0)),s.output=[]):0!=l&&s.output.push(l)},fsync(s){s.output&&0<s.output.length&&(A(C(s.output,0)),s.output=[])},Mb:()=>({Ib:25856,Kb:5,Hb:191,Jb:35387,Gb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}),Nb:()=>0,Ob:()=>[24,80]},mt={jb(s,l){null===l||10===l?(G(C(s.output,0)),s.output=[]):0!=l&&s.output.push(l)},fsync(s){s.output&&0<s.output.length&&(G(C(s.output,0)),s.output=[])}};function Ot(s,l){var h=s.Ia?s.Ia.length:0;h>=l||(l=Math.max(l,h*(1048576>h?2:1.125)>>>0),0!=h&&(l=Math.max(l,256)),h=s.Ia,s.Ia=new Uint8Array(l),0<s.Ma&&s.Ia.set(h.subarray(0,s.Ma),0))}var je={Qa:null,Ra:()=>je.createNode(null,"/",16895,0),createNode(s,l,h,E){if(24576==(61440&h)||4096==(61440&h))throw new ye(63);return je.Qa||(je.Qa={dir:{node:{Pa:je.Ga.Pa,Oa:je.Ga.Oa,lookup:je.Ga.lookup,ab:je.Ga.ab,rename:je.Ga.rename,unlink:je.Ga.unlink,rmdir:je.Ga.rmdir,readdir:je.Ga.readdir,symlink:je.Ga.symlink},stream:{Ta:je.Ha.Ta}},file:{node:{Pa:je.Ga.Pa,Oa:je.Ga.Oa},stream:{Ta:je.Ha.Ta,read:je.Ha.read,write:je.Ha.write,lb:je.Ha.lb,bb:je.Ha.bb,cb:je.Ha.cb}},link:{node:{Pa:je.Ga.Pa,Oa:je.Ga.Oa,readlink:je.Ga.readlink},stream:{}},pb:{node:{Pa:je.Ga.Pa,Oa:je.Ga.Oa},stream:fn}}),ut((h=Fr(s,l,h,E)).mode)?(h.Ga=je.Qa.dir.node,h.Ha=je.Qa.dir.stream,h.Ia={}):32768==(61440&h.mode)?(h.Ga=je.Qa.file.node,h.Ha=je.Qa.file.stream,h.Ma=0,h.Ia=null):40960==(61440&h.mode)?(h.Ga=je.Qa.link.node,h.Ha=je.Qa.link.stream):8192==(61440&h.mode)&&(h.Ga=je.Qa.pb.node,h.Ha=je.Qa.pb.stream),h.timestamp=Date.now(),s&&(s.Ia[l]=h,s.timestamp=h.timestamp),h},Lb:s=>s.Ia?s.Ia.subarray?s.Ia.subarray(0,s.Ma):new Uint8Array(s.Ia):new Uint8Array(0),Ga:{Pa(s){var l={};return l.dev=8192==(61440&s.mode)?s.id:1,l.ino=s.id,l.mode=s.mode,l.nlink=1,l.uid=0,l.gid=0,l.rdev=s.rdev,l.size=ut(s.mode)?4096:32768==(61440&s.mode)?s.Ma:40960==(61440&s.mode)?s.link.length:0,l.atime=new Date(s.timestamp),l.mtime=new Date(s.timestamp),l.ctime=new Date(s.timestamp),l.zb=4096,l.blocks=Math.ceil(l.size/l.zb),l},Oa(s,l){if(void 0!==l.mode&&(s.mode=l.mode),void 0!==l.timestamp&&(s.timestamp=l.timestamp),void 0!==l.size&&s.Ma!=(l=l.size))if(0==l)s.Ia=null,s.Ma=0;else{var h=s.Ia;s.Ia=new Uint8Array(l),h&&s.Ia.set(h.subarray(0,Math.min(l,s.Ma))),s.Ma=l}},lookup(){throw yr[44]},ab:(s,l,h,E)=>je.createNode(s,l,h,E),rename(s,l,h){if(ut(s.mode)){try{var E=Ct(l,h)}catch{}if(E)for(var j in E.Ia)throw new ye(55)}delete s.parent.Ia[s.name],s.parent.timestamp=Date.now(),s.name=h,l.Ia[h]=s,l.timestamp=s.parent.timestamp,s.parent=l},unlink(s,l){delete s.Ia[l],s.timestamp=Date.now()},rmdir(s,l){var E,h=Ct(s,l);for(E in h.Ia)throw new ye(55);delete s.Ia[l],s.timestamp=Date.now()},readdir(s){var h,l=[".",".."];for(h of Object.keys(s.Ia))l.push(h);return l},symlink:(s,l,h)=>((s=je.createNode(s,l,41471,0)).link=h,s),readlink(s){if(40960!=(61440&s.mode))throw new ye(28);return s.link}},Ha:{read(s,l,h,E,j){var K=s.node.Ia;if(j>=s.node.Ma)return 0;if(8<(s=Math.min(s.node.Ma-j,E))&&K.subarray)l.set(K.subarray(j,j+s),h);else for(E=0;E<s;E++)l[h+E]=K[j+E];return s},write(s,l,h,E,j,K){if(l.buffer===ee.buffer&&(K=!1),!E)return 0;if((s=s.node).timestamp=Date.now(),l.subarray&&(!s.Ia||s.Ia.subarray)){if(K)return s.Ia=l.subarray(h,h+E),s.Ma=E;if(0===s.Ma&&0===j)return s.Ia=l.slice(h,h+E),s.Ma=E;if(j+E<=s.Ma)return s.Ia.set(l.subarray(h,h+E),j),E}if(Ot(s,j+E),s.Ia.subarray&&l.subarray)s.Ia.set(l.subarray(h,h+E),j);else for(K=0;K<E;K++)s.Ia[j+K]=l[h+K];return s.Ma=Math.max(s.Ma,j+E),E},Ta(s,l,h){if(1===h?l+=s.position:2===h&&32768==(61440&s.node.mode)&&(l+=s.node.Ma),0>l)throw new ye(28);return l},lb(s,l,h){Ot(s.node,l+h),s.node.Ma=Math.max(s.node.Ma,l+h)},bb(s,l,h,E,j){if(32768!=(61440&s.node.mode))throw new ye(43);if(s=s.node.Ia,2&j||s.buffer!==ee.buffer){if((0<h||h+l<s.length)&&(s=s.subarray?s.subarray(h,h+l):Array.prototype.slice.call(s,h,h+l)),h=!0,l=65536*Math.ceil(l/65536),(j=ti(65536,l))?(de.fill(0,j,j+l),l=j):l=0,!l)throw new ye(48);ee.set(s,l)}else h=!1,l=s.byteOffset;return{Db:l,ub:h}},cb:(s,l,h,E)=>(je.Ha.write(s,l,0,E,h,!1),0)}},cr=(s,l)=>{var h=0;return s&&(h|=365),l&&(h|=146),h},dt=null,rr={},pt=[],Nt=1,At=null,Cr=!0,ye=null,yr={};function ot(s,l={}){if(!(s=Le(s)))return{path:"",node:null};if(8<(l=Object.assign({qb:!0,kb:0},l)).kb)throw new ye(32);s=s.split("/").filter(te=>!!te);for(var h=dt,E="/",j=0;j<s.length;j++){var K=j===s.length-1;if(K&&l.parent)break;if(h=Ct(h,s[j]),E=z(E+"/"+s[j]),h.Va&&(!K||K&&l.qb)&&(h=h.Va.root),!K||l.Sa)for(K=0;40960==(61440&h.mode);)if(h=Wt(E),h=ot(E=Le(he(E),h),{kb:l.kb+1}).node,40<K++)throw new ye(32)}return{path:E,node:h}}function nr(s){for(var l;;){if(s===s.parent)return s=s.Ra.tb,l?"/"!==s[s.length-1]?`${s}/${l}`:s+l:s;l=l?`${s.name}/${l}`:s.name,s=s.parent}}function gr(s,l){for(var h=0,E=0;E<l.length;E++)h=(h<<5)-h+l.charCodeAt(E)|0;return(s+h>>>0)%At.length}function Br(s){var l=gr(s.parent.id,s.name);if(At[l]===s)At[l]=s.Wa;else for(l=At[l];l;){if(l.Wa===s){l.Wa=s.Wa;break}l=l.Wa}}function Ct(s,l){var h;if(h=(h=Ut(s,"x"))?h:s.Ga.lookup?0:2)throw new ye(h,s);for(h=At[gr(s.id,l)];h;h=h.Wa)if(h.parent.id===s.id&&h.name===l)return h;return s.Ga.lookup(s,l)}function Fr(s,l,h,E){return l=gr((s=new Jn(s,l,h,E)).parent.id,s.name),s.Wa=At[l],At[l]=s}function ut(s){return 16384==(61440&s)}function $r(s){var l=["r","w","rw"][3&s];return 512&s&&(l+="w"),l}function Ut(s,l){return Cr?0:!l.includes("r")||292&s.mode?l.includes("w")&&!(146&s.mode)||l.includes("x")&&!(73&s.mode)?2:0:2}function Lr(s,l){try{return Ct(s,l),20}catch{}return Ut(s,"wx")}function Mr(s,l,h){try{var E=Ct(s,l)}catch(j){return j.Ka}if(s=Ut(s,"wx"))return s;if(h){if(!ut(E.mode))return 54;if(E===E.parent||"/"===nr(E))return 10}else if(ut(E.mode))return 31;return 0}function it(s){if(!(s=pt[s]))throw new ye(8);return s}function zr(s,l=-1){return F||((F=function(){this.$a={}}).prototype={},Object.defineProperties(F.prototype,{object:{get(){return this.node},set(h){this.node=h}},flags:{get(){return this.$a.flags},set(h){this.$a.flags=h}},position:{get(){return this.$a.position},set(h){this.$a.position=h}}})),s=Object.assign(new F,s),-1==l&&(l=function ln(){for(var s=0;4096>=s;s++)if(!pt[s])return s;throw new ye(33)}()),s.fd=l,pt[l]=s}var R,fn={open(s){s.Ha=rr[s.node.rdev].Ha,s.Ha.open?.(s)},Ta(){throw new ye(70)}};function vr(s,l){rr[s]={Ha:l}}function qr(s,l){var h="/"===l,E=!l;if(h&&dt)throw new ye(10);if(!h&&!E){var j=ot(l,{qb:!1});if(l=j.path,(j=j.node).Va)throw new ye(10);if(!ut(j.mode))throw new ye(54)}(s=s.Ra(l={type:s,Pb:{},tb:l,Cb:[]})).Ra=l,l.root=s,h?dt=s:j&&(j.Va=l,j.Ra&&j.Ra.Cb.push(l))}function ur(s,l,h){var E=ot(s,{parent:!0}).node;if(!(s=be(s))||"."===s||".."===s)throw new ye(28);var j=Lr(E,s);if(j)throw new ye(j);if(!E.Ga.ab)throw new ye(63);return E.Ga.ab(E,s,l,h)}function vt(s,l){return ur(s,1023&(void 0!==l?l:511)|16384,0)}function lr(s,l,h){typeof h>"u"&&(h=l,l=438),ur(s,8192|l,h)}function br(s,l){if(!Le(s))throw new ye(44);var h=ot(l,{parent:!0}).node;if(!h)throw new ye(44);var E=Lr(h,l=be(l));if(E)throw new ye(E);if(!h.Ga.symlink)throw new ye(63);h.Ga.symlink(h,l,s)}function Zr(s){var l=ot(s,{parent:!0}).node,h=Ct(l,s=be(s)),E=Mr(l,s,!0);if(E)throw new ye(E);if(!l.Ga.rmdir)throw new ye(63);if(h.Va)throw new ye(10);l.Ga.rmdir(l,s),Br(h)}function _r(s){var l=ot(s,{parent:!0}).node;if(!l)throw new ye(44);var h=Ct(l,s=be(s)),E=Mr(l,s,!1);if(E)throw new ye(E);if(!l.Ga.unlink)throw new ye(63);if(h.Va)throw new ye(10);l.Ga.unlink(l,s),Br(h)}function Wt(s){if(!(s=ot(s).node))throw new ye(44);if(!s.Ga.readlink)throw new ye(28);return Le(nr(s.parent),s.Ga.readlink(s))}function Gt(s,l){if(!(s=ot(s,{Sa:!l}).node))throw new ye(44);if(!s.Ga.Pa)throw new ye(63);return s.Ga.Pa(s)}function Bt(s){return Gt(s,!0)}function fr(s,l){if(!(s="string"==typeof s?ot(s,{Sa:!0}).node:s).Ga.Oa)throw new ye(63);s.Ga.Oa(s,{mode:4095&l|-4096&s.mode,timestamp:Date.now()})}function ir(s,l){if(0>l)throw new ye(28);if(!(s="string"==typeof s?ot(s,{Sa:!0}).node:s).Ga.Oa)throw new ye(63);if(ut(s.mode))throw new ye(31);if(32768!=(61440&s.mode))throw new ye(28);var h=Ut(s,"w");if(h)throw new ye(h);s.Ga.Oa(s,{size:l,timestamp:Date.now()})}function It(s,l,h){if(""===s)throw new ye(44);if("string"==typeof l){var E={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[l];if(typeof E>"u")throw Error(`Unknown file open mode: ${l}`);l=E}if(h=64&l?4095&(typeof h>"u"?438:h)|32768:0,"object"==typeof s)var j=s;else{s=z(s);try{j=ot(s,{Sa:!(131072&l)}).node}catch{}}if(E=!1,64&l)if(j){if(128&l)throw new ye(20)}else j=ur(s,h,0),E=!0;if(!j)throw new ye(44);if(8192==(61440&j.mode)&&(l&=-513),65536&l&&!ut(j.mode))throw new ye(54);if(!E&&(h=j?40960==(61440&j.mode)?32:ut(j.mode)&&("r"!==$r(l)||512&l)?31:Ut(j,$r(l)):44))throw new ye(h);return 512&l&&!E&&ir(j,0),l&=-131713,(j=zr({node:j,path:nr(j),flags:l,seekable:!0,position:0,Ha:j.Ha,Fb:[],error:!1})).Ha.open&&j.Ha.open(j),!u.logReadFiles||1&l||(X||={},s in X||(X[s]=1)),j}function wr(s){if(null===s.fd)throw new ye(8);s.hb&&(s.hb=null);try{s.Ha.close&&s.Ha.close(s)}catch(l){throw l}finally{pt[s.fd]=null}s.fd=null}function Ur(s,l,h){if(null===s.fd)throw new ye(8);if(!s.seekable||!s.Ha.Ta)throw new ye(70);if(0!=h&&1!=h&&2!=h)throw new ye(28);s.position=s.Ha.Ta(s,l,h),s.Fb=[]}function hr(s,l,h,E,j){if(0>E||0>j)throw new ye(28);if(null===s.fd)throw new ye(8);if(1==(2097155&s.flags))throw new ye(8);if(ut(s.node.mode))throw new ye(31);if(!s.Ha.read)throw new ye(28);var K=typeof j<"u";if(K){if(!s.seekable)throw new ye(70)}else j=s.position;return l=s.Ha.read(s,l,h,E,j),K||(s.position+=l),l}function Wr(s,l,h,E,j){if(0>E||0>j)throw new ye(28);if(null===s.fd)throw new ye(8);if(!(2097155&s.flags))throw new ye(8);if(ut(s.node.mode))throw new ye(31);if(!s.Ha.write)throw new ye(28);s.seekable&&1024&s.flags&&Ur(s,0,2);var K=typeof j<"u";if(K){if(!s.seekable)throw new ye(70)}else j=s.position;return l=s.Ha.write(s,l,h,E,j,void 0),K||(s.position+=l),l}function _(){ye||((ye=function(s,l){this.name="ErrnoError",this.node=l,this.Eb=function(h){this.Ka=h},this.Eb(s),this.message="FS error"}).prototype=Error(),ye.prototype.constructor=ye,[44].forEach(s=>{yr[s]=new ye(s),yr[s].stack="<generic error, no stack>"}))}function x(s,l,h){s=z("/dev/"+s);var E=cr(!!l,!!h);$||=64;var j=$++<<8|0;vr(j,{open(K){K.seekable=!1},close(){h?.buffer?.length&&h(10)},read(K,te,De,Me){for(var Ne=0,tt=0;tt<Me;tt++){try{var nt=l()}catch{throw new ye(29)}if(void 0===nt&&0===Ne)throw new ye(6);if(null==nt)break;Ne++,te[De+tt]=nt}return Ne&&(K.node.timestamp=Date.now()),Ne},write(K,te,De,Me){for(var Ne=0;Ne<Me;Ne++)try{h(te[De+Ne])}catch{throw new ye(29)}return Me&&(K.node.timestamp=Date.now()),Ne}}),lr(s,E,j)}var $,F,X,B={};function oe(s,l,h){if("/"===l.charAt(0))return l;if(s=-100===s?"/":it(s).path,0==l.length){if(!h)throw new ye(44);return s}return z(s+"/"+l)}function ue(s,l,h){try{var E=s(l)}catch(K){if(K&&K.node&&z(l)!==z(nr(K.node)))return-54;throw K}L[h>>2]=E.dev,L[h+4>>2]=E.mode,p[h+8>>2]=E.nlink,L[h+12>>2]=E.uid,L[h+16>>2]=E.gid,L[h+20>>2]=E.rdev,d=[E.size>>>0,(we=E.size,1<=+Math.abs(we)?0<we?+Math.floor(we/4294967296)>>>0:~~+Math.ceil((we-+(~~we>>>0))/4294967296)>>>0:0)],L[h+24>>2]=d[0],L[h+28>>2]=d[1],L[h+32>>2]=4096,L[h+36>>2]=E.blocks,s=E.atime.getTime(),l=E.mtime.getTime();var j=E.ctime.getTime();return d=[Math.floor(s/1e3)>>>0,(we=Math.floor(s/1e3),1<=+Math.abs(we)?0<we?+Math.floor(we/4294967296)>>>0:~~+Math.ceil((we-+(~~we>>>0))/4294967296)>>>0:0)],L[h+40>>2]=d[0],L[h+44>>2]=d[1],p[h+48>>2]=s%1e3*1e3,d=[Math.floor(l/1e3)>>>0,(we=Math.floor(l/1e3),1<=+Math.abs(we)?0<we?+Math.floor(we/4294967296)>>>0:~~+Math.ceil((we-+(~~we>>>0))/4294967296)>>>0:0)],L[h+56>>2]=d[0],L[h+60>>2]=d[1],p[h+64>>2]=l%1e3*1e3,d=[Math.floor(j/1e3)>>>0,(we=Math.floor(j/1e3),1<=+Math.abs(we)?0<we?+Math.floor(we/4294967296)>>>0:~~+Math.ceil((we-+(~~we>>>0))/4294967296)>>>0:0)],L[h+72>>2]=d[0],L[h+76>>2]=d[1],p[h+80>>2]=j%1e3*1e3,d=[E.ino>>>0,(we=E.ino,1<=+Math.abs(we)?0<we?+Math.floor(we/4294967296)>>>0:~~+Math.ceil((we-+(~~we>>>0))/4294967296)>>>0:0)],L[h+88>>2]=d[0],L[h+92>>2]=d[1],0}var le=void 0;function pe(){var s=L[+le>>2];return le+=4,s}var at,Ht,Et,_e=(s,l)=>l+2097152>>>0<4194305-!!s?(s>>>0)+4294967296*l:NaN,Oe=[0,31,60,91,121,152,182,213,244,274,305,335],ze=[0,31,59,90,120,151,181,212,243,273,304,334],qe=s=>{var l=et(s)+1,h=Vr(l);return h&&ct(s,de,h,l),h},Ke={},Ye=()=>{if(!at){var l,s={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:m||"./this.program"};for(l in Ke)void 0===Ke[l]?delete s[l]:s[l]=Ke[l];var h=[];for(l in s)h.push(`${l}=${s[l]}`);at=h}return at},Ft=s=>{var l=et(s)+1,h=Kt(l);return ct(s,de,h,l),h},dr=0,Vt=(s,l)=>(l=1==l?Kt(s.length):Vr(s.length),s.subarray||s.slice||(s=new Uint8Array(s)),de.set(s,l),l),kr=[],$t=s=>{Ht.delete(Et.get(s)),Et.set(s,null),kr.push(s)},Gr=(s,l)=>{if(!Ht){var h=Et.length;if(Ht=new WeakMap)for(var E=0;E<0+h;E++){var j=Et.get(E);j&&Ht.set(j,E)}}if(h=Ht.get(s)||0)return h;if(kr.length)h=kr.pop();else{try{Et.grow(1)}catch(De){throw De instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":De}h=Et.length-1}try{Et.set(h,s)}catch(De){if(!(De instanceof TypeError))throw De;if("function"==typeof WebAssembly.Function){E=WebAssembly.Function,j={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"};for(var K={parameters:[],results:"v"==l[0]?[]:[j[l[0]]]},te=1;te<l.length;++te)K.parameters.push(j[l[te]]);l=new E(K,s)}else{for(E=[1],j=l.slice(0,1),l=l.slice(1),K={i:127,p:127,j:126,f:125,d:124,e:111},E.push(96),128>(te=l.length)?E.push(te):E.push(te%128|128,te>>7),te=0;te<l.length;++te)E.push(K[l[te]]);"v"==j?E.push(0):E.push(1,K[j]),l=[0,97,115,109,1,0,0,0,1],128>(j=E.length)?l.push(j):l.push(j%128|128,j>>7),l.push.apply(l,E),l.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),l=new WebAssembly.Module(new Uint8Array(l)),l=new WebAssembly.Instance(l,{e:{f:s}}).exports.f}Et.set(h,l)}return Ht.set(s,h),h};function Jn(s,l,h,E){s||=this,this.parent=s,this.Ra=s.Ra,this.Va=null,this.id=Nt++,this.name=l,this.mode=h,this.Ga={},this.Ha={},this.rdev=E}Object.defineProperties(Jn.prototype,{read:{get:function(){return 365==(365&this.mode)},set:function(s){s?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146==(146&this.mode)},set:function(s){s?this.mode|=146:this.mode&=-147}}}),_(),At=Array(4096),qr(je,"/"),vt("/tmp"),vt("/home"),vt("/home/web_user"),function(){vt("/dev"),vr(259,{read:()=>0,write:(E,j,K,te)=>te}),lr("/dev/null",259),Ue(1280,tr),Ue(1536,mt),lr("/dev/tty",1280),lr("/dev/tty1",1536);var s=new Uint8Array(1024),l=0,h=()=>(0===l&&(l=ke(s).byteLength),s[--l]);x("random",h),x("urandom",h),vt("/dev/shm"),vt("/dev/shm/tmp")}(),function(){vt("/proc");var s=vt("/proc/self");vt("/proc/self/fd"),qr({Ra(){var l=Fr(s,"fd",16895,73);return l.Ga={lookup(h,E){var j=it(+E);return(h={parent:null,Ra:{tb:"fake"},Ga:{readlink:()=>j.path}}).parent=h}},l}},"/proc/self/fd")}();var zs={a:(s,l,h,E)=>{ve(`Assertion failed: ${s?C(de,s):""}, at: `+[l?l?C(de,l):"":"unknown filename",h,E?E?C(de,E):"":"unknown function"])},h:function(s,l){try{return fr(s=s?C(de,s):"",l),0}catch(h){if(typeof B>"u"||"ErrnoError"!==h.name)throw h;return-h.Ka}},H:function(s,l,h){try{if(l=oe(s,l=l?C(de,l):""),-8&h)return-28;var E=ot(l,{Sa:!0}).node;return E?(s="",4&h&&(s+="r"),2&h&&(s+="w"),1&h&&(s+="x"),s&&Ut(E,s)?-2:0):-44}catch(j){if(typeof B>"u"||"ErrnoError"!==j.name)throw j;return-j.Ka}},i:function(s,l){try{return fr(it(s).node,l),0}catch(E){if(typeof B>"u"||"ErrnoError"!==E.name)throw E;return-E.Ka}},g:function(s){try{var l=it(s).node,h="string"==typeof l?ot(l,{Sa:!0}).node:l;if(!h.Ga.Oa)throw new ye(63);return h.Ga.Oa(h,{timestamp:Date.now()}),0}catch(E){if(typeof B>"u"||"ErrnoError"!==E.name)throw E;return-E.Ka}},b:function(s,l,h){le=h;try{var E=it(s);switch(l){case 0:var j=pe();if(0>j)return-28;for(;pt[j];)j++;return zr(E,j).fd;case 1:case 2:case 6:case 7:return 0;case 3:return E.flags;case 4:return j=pe(),E.flags|=j,0;case 5:return j=pe(),I[j+0>>1]=2,0;case 16:case 8:default:return-28;case 9:return L[ei()>>2]=28,-1}}catch(K){if(typeof B>"u"||"ErrnoError"!==K.name)throw K;return-K.Ka}},f:function(s,l){try{return ue(Gt,it(s).path,l)}catch(E){if(typeof B>"u"||"ErrnoError"!==E.name)throw E;return-E.Ka}},n:function(s,l,h){l=_e(l,h);try{if(isNaN(l))return 61;var E=it(s);if(!(2097155&E.flags))throw new ye(28);return ir(E.node,l),0}catch(j){if(typeof B>"u"||"ErrnoError"!==j.name)throw j;return-j.Ka}},C:function(s,l){try{if(0===l)return-28;var h=et("/")+1;return l<h?-68:(ct("/",de,s,l),h)}catch(E){if(typeof B>"u"||"ErrnoError"!==E.name)throw E;return-E.Ka}},F:function(s,l){try{return ue(Bt,s=s?C(de,s):"",l)}catch(h){if(typeof B>"u"||"ErrnoError"!==h.name)throw h;return-h.Ka}},z:function(s,l,h){try{return l=oe(s,l=l?C(de,l):""),"/"===(l=z(l))[l.length-1]&&(l=l.substr(0,l.length-1)),vt(l,h),0}catch(E){if(typeof B>"u"||"ErrnoError"!==E.name)throw E;return-E.Ka}},E:function(s,l,h,E){try{return ue(256&E?Bt:Gt,l=oe(s,l=l?C(de,l):"",4096&E),h)}catch(K){if(typeof B>"u"||"ErrnoError"!==K.name)throw K;return-K.Ka}},y:function(s,l,h,E){le=E;try{return It(l=oe(s,l=l?C(de,l):""),h,E?pe():0).fd}catch(K){if(typeof B>"u"||"ErrnoError"!==K.name)throw K;return-K.Ka}},w:function(s,l,h,E){try{if(l=oe(s,l=l?C(de,l):""),0>=E)return-28;var j=Wt(l),K=Math.min(E,et(j)),te=ee[h+K];return ct(j,de,h,E+1),ee[h+K]=te,K}catch(De){if(typeof B>"u"||"ErrnoError"!==De.name)throw De;return-De.Ka}},v:function(s){try{return Zr(s=s?C(de,s):""),0}catch(l){if(typeof B>"u"||"ErrnoError"!==l.name)throw l;return-l.Ka}},G:function(s,l){try{return ue(Gt,s=s?C(de,s):"",l)}catch(h){if(typeof B>"u"||"ErrnoError"!==h.name)throw h;return-h.Ka}},r:function(s,l,h){try{return l=oe(s,l=l?C(de,l):""),0===h?_r(l):512===h?Zr(l):ve("Invalid flags passed to unlinkat"),0}catch(E){if(typeof B>"u"||"ErrnoError"!==E.name)throw E;return-E.Ka}},q:function(s,l,h){try{if(l=oe(s,l=l?C(de,l):"",!0),h){var E=p[h>>2]+4294967296*L[h+4>>2],j=L[h+8>>2];K=1e3*E+j/1e6,te=1e3*(E=p[(h+=16)>>2]+4294967296*L[h+4>>2])+(j=L[h+8>>2])/1e6}else var K=Date.now(),te=K;s=K;var De=ot(l,{Sa:!0}).node;return De.Ga.Oa(De,{timestamp:Math.max(s,te)}),0}catch(Me){if(typeof B>"u"||"ErrnoError"!==Me.name)throw Me;return-Me.Ka}},l:function(s,l,h){s=new Date(1e3*_e(s,l)),L[h>>2]=s.getSeconds(),L[h+4>>2]=s.getMinutes(),L[h+8>>2]=s.getHours(),L[h+12>>2]=s.getDate(),L[h+16>>2]=s.getMonth(),L[h+20>>2]=s.getFullYear()-1900,L[h+24>>2]=s.getDay(),l=s.getFullYear(),L[h+28>>2]=(l%4!=0||l%100==0&&l%400!=0?ze:Oe)[s.getMonth()]+s.getDate()-1|0,L[h+36>>2]=-60*s.getTimezoneOffset(),l=new Date(s.getFullYear(),6,1).getTimezoneOffset();var E=new Date(s.getFullYear(),0,1).getTimezoneOffset();L[h+32>>2]=0|(l!=E&&s.getTimezoneOffset()==Math.min(E,l))},j:function(s,l,h,E,j,K,te,De){j=_e(j,K);try{if(isNaN(j))return 61;var Me=it(E);if(2&l&&!(2&h)&&2!=(2097155&Me.flags))throw new ye(2);if(1==(2097155&Me.flags))throw new ye(2);if(!Me.Ha.bb)throw new ye(43);var Ne=Me.Ha.bb(Me,s,j,l,h),tt=Ne.Db;return L[te>>2]=Ne.ub,p[De>>2]=tt,0}catch(nt){if(typeof B>"u"||"ErrnoError"!==nt.name)throw nt;return-nt.Ka}},k:function(s,l,h,E,j,K,te){K=_e(K,te);try{if(isNaN(K))return 61;var De=it(j);if(2&h){if(32768!=(61440&De.node.mode))throw new ye(43);if(!(2&E)){var Me=de.slice(s,s+l);De.Ha.cb&&De.Ha.cb(De,Me,K,l,E)}}}catch(Ne){if(typeof B>"u"||"ErrnoError"!==Ne.name)throw Ne;return-Ne.Ka}},s:(s,l,h)=>{function E(Me){return(Me=Me.toTimeString().match(/\(([A-Za-z ]+)\)$/))?Me[1]:"GMT"}var j=(new Date).getFullYear(),K=new Date(j,0,1),te=new Date(j,6,1);j=K.getTimezoneOffset();var De=te.getTimezoneOffset();p[s>>2]=60*Math.max(j,De),L[l>>2]=+(j!=De),s=E(K),l=E(te),s=qe(s),l=qe(l),De<j?(p[h>>2]=s,p[h+4>>2]=l):(p[h>>2]=l,p[h+4>>2]=s)},d:()=>Date.now(),t:()=>2147483648,c:()=>performance.now(),o:s=>{var l=de.length;if(2147483648<(s>>>=0))return!1;for(var h=1;4>=h;h*=2){var E=l*(1+.2/h);E=Math.min(E,s+100663296);var j=Math;E=Math.max(s,E);e:{j=(j.min.call(j,2147483648,E+(65536-E%65536)%65536)-Q.buffer.byteLength+65535)/65536;try{Q.grow(j),ae();var K=1;break e}catch{}K=void 0}if(K)return!0}return!1},A:(s,l)=>{var h=0;return Ye().forEach((E,j)=>{var K=l+h;for(j=p[s+4*j>>2]=K,K=0;K<E.length;++K)ee[j++>>0]=E.charCodeAt(K);ee[j>>0]=0,h+=E.length+1}),0},B:(s,l)=>{var h=Ye();p[s>>2]=h.length;var E=0;return h.forEach(j=>E+=j.length+1),p[l>>2]=E,0},e:function(s){try{return wr(it(s)),0}catch(h){if(typeof B>"u"||"ErrnoError"!==h.name)throw h;return h.Ka}},p:function(s,l){try{var h=it(s);return ee[l>>0]=h.tty?2:ut(h.mode)?3:40960==(61440&h.mode)?7:4,I[l+2>>1]=0,d=[0,(we=0,1<=+Math.abs(we)?0<we?+Math.floor(we/4294967296)>>>0:~~+Math.ceil((we-+(~~we>>>0))/4294967296)>>>0:0)],L[l+8>>2]=d[0],L[l+12>>2]=d[1],d=[0,(we=0,1<=+Math.abs(we)?0<we?+Math.floor(we/4294967296)>>>0:~~+Math.ceil((we-+(~~we>>>0))/4294967296)>>>0:0)],L[l+16>>2]=d[0],L[l+20>>2]=d[1],0}catch(E){if(typeof B>"u"||"ErrnoError"!==E.name)throw E;return E.Ka}},x:function(s,l,h,E){try{e:{var j=it(s);s=l;for(var K,te=l=0;te<h;te++){var De=p[s>>2],Me=p[s+4>>2];s+=8;var Ne=hr(j,ee,De,Me,K);if(0>Ne){var tt=-1;break e}if(l+=Ne,Ne<Me)break;typeof K<"u"&&(K+=Ne)}tt=l}return p[E>>2]=tt,0}catch(nt){if(typeof B>"u"||"ErrnoError"!==nt.name)throw nt;return nt.Ka}},m:function(s,l,h,E,j){l=_e(l,h);try{if(isNaN(l))return 61;var K=it(s);return Ur(K,l,E),d=[K.position>>>0,(we=K.position,1<=+Math.abs(we)?0<we?+Math.floor(we/4294967296)>>>0:~~+Math.ceil((we-+(~~we>>>0))/4294967296)>>>0:0)],L[j>>2]=d[0],L[j+4>>2]=d[1],K.hb&&0===l&&0===E&&(K.hb=null),0}catch(te){if(typeof B>"u"||"ErrnoError"!==te.name)throw te;return te.Ka}},D:function(s){try{var l=it(s);return l.Ha?.fsync?l.Ha.fsync(l):0}catch(h){if(typeof B>"u"||"ErrnoError"!==h.name)throw h;return h.Ka}},u:function(s,l,h,E){try{e:{var j=it(s);s=l;for(var K,te=l=0;te<h;te++){var De=p[s>>2],Me=p[s+4>>2];s+=8;var Ne=Wr(j,ee,De,Me,K);if(0>Ne){var tt=-1;break e}l+=Ne,typeof K<"u"&&(K+=Ne)}tt=l}return p[E>>2]=tt,0}catch(nt){if(typeof B>"u"||"ErrnoError"!==nt.name)throw nt;return nt.Ka}}},xe=function(){function s(h){return Q=(xe=h.exports).I,ae(),Et=xe.Aa,fe.unshift(xe.J),U--,u.monitorRunDependencies?.(U),0==U&&Ee&&(h=Ee,Ee=null,h()),xe}var l={a:zs};if(U++,u.monitorRunDependencies?.(U),u.instantiateWasm)try{return u.instantiateWasm(l,s)}catch(h){return G(`Module.instantiateWasm callback failed with error: ${h}`),!1}return function ht(s,l){var h=He;q||"function"!=typeof WebAssembly.instantiateStreaming||ge(h)||Ze(h)||w||"function"!=typeof fetch?Ge(h,s,l):fetch(h,{credentials:"same-origin"}).then(E=>WebAssembly.instantiateStreaming(E,s).then(l,function(j){return G(`wasm streaming compile failed: ${j}`),G("falling back to ArrayBuffer instantiation"),Ge(h,s,l)}))}(l,function(h){s(h.instance)}),{}}();u._sqlite3_free=s=>(u._sqlite3_free=xe.K)(s),u._sqlite3_value_text=s=>(u._sqlite3_value_text=xe.L)(s);var ei=()=>(ei=xe.M)();u._sqlite3_prepare_v2=(s,l,h,E,j)=>(u._sqlite3_prepare_v2=xe.N)(s,l,h,E,j),u._sqlite3_step=s=>(u._sqlite3_step=xe.O)(s),u._sqlite3_finalize=s=>(u._sqlite3_finalize=xe.P)(s),u._sqlite3_reset=s=>(u._sqlite3_reset=xe.Q)(s),u._sqlite3_clear_bindings=s=>(u._sqlite3_clear_bindings=xe.R)(s),u._sqlite3_value_blob=s=>(u._sqlite3_value_blob=xe.S)(s),u._sqlite3_value_bytes=s=>(u._sqlite3_value_bytes=xe.T)(s),u._sqlite3_value_double=s=>(u._sqlite3_value_double=xe.U)(s),u._sqlite3_value_int=s=>(u._sqlite3_value_int=xe.V)(s),u._sqlite3_value_type=s=>(u._sqlite3_value_type=xe.W)(s),u._sqlite3_result_blob=(s,l,h,E)=>(u._sqlite3_result_blob=xe.X)(s,l,h,E),u._sqlite3_result_double=(s,l)=>(u._sqlite3_result_double=xe.Y)(s,l),u._sqlite3_result_error=(s,l,h)=>(u._sqlite3_result_error=xe.Z)(s,l,h),u._sqlite3_result_int=(s,l)=>(u._sqlite3_result_int=xe._)(s,l),u._sqlite3_result_int64=(s,l,h)=>(u._sqlite3_result_int64=xe.$)(s,l,h),u._sqlite3_result_null=s=>(u._sqlite3_result_null=xe.aa)(s),u._sqlite3_result_text=(s,l,h,E)=>(u._sqlite3_result_text=xe.ba)(s,l,h,E),u._sqlite3_aggregate_context=(s,l)=>(u._sqlite3_aggregate_context=xe.ca)(s,l),u._sqlite3_column_count=s=>(u._sqlite3_column_count=xe.da)(s),u._sqlite3_data_count=s=>(u._sqlite3_data_count=xe.ea)(s),u._sqlite3_column_blob=(s,l)=>(u._sqlite3_column_blob=xe.fa)(s,l),u._sqlite3_column_bytes=(s,l)=>(u._sqlite3_column_bytes=xe.ga)(s,l),u._sqlite3_column_double=(s,l)=>(u._sqlite3_column_double=xe.ha)(s,l),u._sqlite3_column_text=(s,l)=>(u._sqlite3_column_text=xe.ia)(s,l),u._sqlite3_column_type=(s,l)=>(u._sqlite3_column_type=xe.ja)(s,l),u._sqlite3_column_name=(s,l)=>(u._sqlite3_column_name=xe.ka)(s,l),u._sqlite3_bind_blob=(s,l,h,E,j)=>(u._sqlite3_bind_blob=xe.la)(s,l,h,E,j),u._sqlite3_bind_double=(s,l,h)=>(u._sqlite3_bind_double=xe.ma)(s,l,h),u._sqlite3_bind_int=(s,l,h)=>(u._sqlite3_bind_int=xe.na)(s,l,h),u._sqlite3_bind_text=(s,l,h,E,j)=>(u._sqlite3_bind_text=xe.oa)(s,l,h,E,j),u._sqlite3_bind_parameter_index=(s,l)=>(u._sqlite3_bind_parameter_index=xe.pa)(s,l),u._sqlite3_sql=s=>(u._sqlite3_sql=xe.qa)(s),u._sqlite3_normalized_sql=s=>(u._sqlite3_normalized_sql=xe.ra)(s),u._sqlite3_errmsg=s=>(u._sqlite3_errmsg=xe.sa)(s),u._sqlite3_exec=(s,l,h,E,j)=>(u._sqlite3_exec=xe.ta)(s,l,h,E,j),u._sqlite3_changes=s=>(u._sqlite3_changes=xe.ua)(s),u._sqlite3_close_v2=s=>(u._sqlite3_close_v2=xe.va)(s),u._sqlite3_create_function_v2=(s,l,h,E,j,K,te,De,Me)=>(u._sqlite3_create_function_v2=xe.wa)(s,l,h,E,j,K,te,De,Me),u._sqlite3_open=(s,l)=>(u._sqlite3_open=xe.xa)(s,l);var Vr=u._malloc=s=>(Vr=u._malloc=xe.ya)(s),Hr=u._free=s=>(Hr=u._free=xe.za)(s);u._RegisterExtensionFunctions=s=>(u._RegisterExtensionFunctions=xe.Ba)(s);var Kr,ti=(s,l)=>(ti=xe.Ca)(s,l),Tr=()=>(Tr=xe.Da)(),xr=s=>(xr=xe.Ea)(s),Kt=s=>(Kt=xe.Fa)(s);function ri(){function s(){if(!Kr&&(Kr=!0,u.calledRun=!0,!H)){if(u.noFSInit||R||(R=!0,_(),u.stdin=u.stdin,u.stdout=u.stdout,u.stderr=u.stderr,u.stdin?x("stdin",u.stdin):br("/dev/tty","/dev/stdin"),u.stdout?x("stdout",null,u.stdout):br("/dev/tty","/dev/stdout"),u.stderr?x("stderr",null,u.stderr):br("/dev/tty1","/dev/stderr"),It("/dev/stdin",0),It("/dev/stdout",1),It("/dev/stderr",1)),Cr=!1,Y(fe),u.onRuntimeInitialized&&u.onRuntimeInitialized(),u.postRun)for("function"==typeof u.postRun&&(u.postRun=[u.postRun]);u.postRun.length;){var l=u.postRun.shift();Se.unshift(l)}Y(Se)}}if(!(0<U)){if(u.preRun)for("function"==typeof u.preRun&&(u.preRun=[u.preRun]);u.preRun.length;)W();Y(Ie),0<U||(u.setStatus?(u.setStatus("Running..."),setTimeout(function(){setTimeout(function(){u.setStatus("")},1),s()},1)):s())}}if(u.stackAlloc=Kt,u.stackSave=Tr,u.stackRestore=xr,u.cwrap=(s,l,h,E)=>{var j=!h||h.every(K=>"number"===K||"boolean"===K);return"string"!==l&&j&&!E?u["_"+s]:function(){return((s,l,h,E)=>{var j={string:Ne=>{var tt=0;return null!=Ne&&0!==Ne&&(tt=Ft(Ne)),tt},array:Ne=>{var tt=Kt(Ne.length);return ee.set(Ne,tt),tt}};s=u["_"+s];var Ne,K=[],te=0;if(E)for(var De=0;De<E.length;De++){var Me=j[h[De]];Me?(0===te&&(te=Tr()),K[De]=Me(E[De])):K[De]=E[De]}return Ne=h=s.apply(null,K),0!==te&&xr(te),"string"===l?Ne?C(de,Ne):"":"boolean"===l?!!Ne:Ne})(s,l,h,arguments)}},u.addFunction=Gr,u.removeFunction=$t,u.UTF8ToString=ne,u.ALLOC_NORMAL=dr,u.allocate=Vt,u.allocateUTF8OnStack=Ft,Ee=function s(){Kr||ri(),Kr||(Ee=s)},u.preInit)for("function"==typeof u.preInit&&(u.preInit=[u.preInit]);0<u.preInit.length;)u.preInit.pop()();return ri(),c}),e)},(o=$n).exports=r,o.exports.default=r;const Es=$n.exports;class Fe{static getDBFromStore(t,e){return(0,O.Z)(function*(){try{const r=yield e.getItem(t);return Promise.resolve(r)}catch(r){return Promise.reject(`GetDBFromStore: ${r.message}`)}})()}static setInitialDBToStore(t,e){return(0,O.Z)(function*(){try{return yield e.setItem(t,null),Promise.resolve()}catch(r){return Promise.reject(`SetInitialDBToStore: ${r.message}`)}})()}static setDBToStore(t,e,r){return(0,O.Z)(function*(){try{const n=t.export();return yield Fe.saveDBToStore(e,n,r),Promise.resolve()}catch(n){return Promise.reject(`SetDBToStore: ${n.message}`)}})()}static saveDBToStore(t,e,r){return(0,O.Z)(function*(){try{return yield r.setItem(t,e),Promise.resolve()}catch(n){return Promise.reject(`SaveDBToStore: ${n.message}`)}})()}static removeDBFromStore(t,e){return(0,O.Z)(function*(){try{return yield e.removeItem(t),Promise.resolve()}catch(r){return Promise.reject(`RemoveDBFromStore: ${r.message}`)}})()}static isDBInStore(t,e){return(0,O.Z)(function*(){try{const r=yield e.getItem(t);return Promise.resolve(null!=r&&r.length>0)}catch(r){return Promise.reject(`IsDBInStore: ${r}`)}})()}static restoreDBFromStore(t,e,r){return(0,O.Z)(function*(){const n=`${e}-${t}`;try{if(yield Fe.isDBInStore(n,r)){if(yield Fe.isDBInStore(t,r)){const c=yield Fe.getDBFromStore(n,r);return yield Fe.saveDBToStore(t,c,r),yield Fe.removeDBFromStore(n,r),Promise.resolve()}return Promise.reject(new Error(`RestoreDBFromStore: ${t} does not exist`))}return Promise.reject(new Error(`RestoreDBFromStore: ${n} does not exist`))}catch(i){return Promise.reject(`RestoreDBFromStore: ${i.message}`)}})()}static copyDBToStore(t,e,r){return(0,O.Z)(function*(){try{if(yield Fe.isDBInStore(t,r)){const i=yield Fe.getDBFromStore(t,r);return yield Fe.saveDBToStore(e,i,r),Promise.resolve()}return Promise.reject(new Error(`CopyDBToStore: ${t} does not exist`))}catch(n){return Promise.reject(`CopyDBToStore: ${n.message}`)}})()}static getDBListFromStore(t){return(0,O.Z)(function*(){try{const e=yield t.keys();return Promise.resolve(e)}catch(e){return Promise.reject(`GetDBListFromStore: ${e.message}`)}})()}}class _t{static getTablesNames(t){return(0,O.Z)(function*(){let e="SELECT name FROM sqlite_master WHERE ";e+="type='table' AND name NOT LIKE 'sync_table' ",e+="AND name NOT LIKE '_temp_%' ",e+="AND name NOT LIKE 'sqlite_%' ",e+="ORDER BY rootpage DESC;";const r=[];try{const n=yield ie.queryAll(t,"SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sync_table' AND name NOT LIKE '_temp_%' AND name NOT LIKE 'sqlite_%' ORDER BY rootpage DESC;",[]);for(const i of n)r.push(i.name);return Promise.resolve(r)}catch(n){return Promise.reject(new Error(`GetTablesNames: ${n.message}`))}})()}static getViewsNames(t){return(0,O.Z)(function*(){let e="SELECT name FROM sqlite_master WHERE ";e+="type='view' AND name NOT LIKE 'sqlite_%' ",e+="ORDER BY rootpage DESC;";const r=[];try{const n=yield ie.queryAll(t,"SELECT name FROM sqlite_master WHERE type='view' AND name NOT LIKE 'sqlite_%' ORDER BY rootpage DESC;",[]);for(const i of n)r.push(i.name);return Promise.resolve(r)}catch(n){return Promise.reject(new Error(`getViewsNames: ${n.message}`))}})()}static dropElements(t,e){return(0,O.Z)(function*(){let r="",n="AND name NOT LIKE ('sqlite_%')";switch(e){case"index":r="DropIndexes";break;case"trigger":r="DropTriggers";break;case"table":r="DropTables",n+=" AND name NOT IN ('sync_table')";break;case"view":r="DropViews";break;default:return Promise.reject(new Error(`DropElements: ${e} not found`))}let i="SELECT name FROM sqlite_master WHERE ";i+=`type = '${e}' ${n};`;try{const a=yield ie.queryAll(t,i,[]);if(a.length>0){const c=e.toUpperCase(),f=[];for(const u of a){let y=`DROP ${c} IF EXISTS `;y+=`${u.name};`,f.push(y)}for(const u of f)if((yield ie.run(t,u,[],!1,"no"))<0)return Promise.reject(new Error(`DropElements: ${r}: lastId < 0`))}return Promise.resolve()}catch(a){return Promise.reject(new Error(`DropElements: ${r}: ${a.message}`))}})()}static dropAll(t){return(0,O.Z)(function*(){try{return yield _t.dropElements(t,"table"),yield _t.dropElements(t,"index"),yield _t.dropElements(t,"trigger"),yield _t.dropElements(t,"view"),yield ie.run(t,"VACUUM;",[],!1,"no"),Promise.resolve()}catch(e){return Promise.reject(new Error(`DropAll: ${e.message}`))}})()}static dropTempTables(t,e){return(0,O.Z)(function*(){const r=Object.keys(e),n=[];for(const i of r){let a="DROP TABLE IF EXISTS ";a+=`_temp_${i};`,n.push(a)}try{return(yield ie.execute(t,n.join("\n"),!1))<0?Promise.reject(new Error("DropTempTables: changes < 0")):Promise.resolve()}catch(i){return Promise.reject(new Error(`DropTempTables: ${i.message}`))}})()}}class We{static isJsonSQLite(t){return(0,O.Z)(function*(){const e=["database","version","overwrite","encrypted","mode","tables","views"];if(null==t||0===Object.keys(t).length&&t.constructor===Object)return!1;for(const r of Object.keys(t)){if(-1===e.indexOf(r)||"database"===r&&"string"!=typeof t[r]||"version"===r&&"number"!=typeof t[r]||"overwrite"===r&&"boolean"!=typeof t[r]||"encrypted"===r&&"boolean"!=typeof t[r]||"mode"===r&&"string"!=typeof t[r]||"tables"===r&&"object"!=typeof t[r])return!1;if("tables"===r)for(const n of t[r])if(!(yield We.isTable(n)))return!1;if("views"===r&&"object"!=typeof t[r])return!1;if("views"===r)for(const n of t[r])if(!(yield We.isView(n)))return!1}return!0})()}static isTable(t){return(0,O.Z)(function*(){const e=["name","schema","indexes","triggers","values"];let r=0;if(null==t||0===Object.keys(t).length&&t.constructor===Object)return!1;for(const n of Object.keys(t)){if(-1===e.indexOf(n)||"name"===n&&"string"!=typeof t[n]||"schema"===n&&"object"!=typeof t[n]||"indexes"===n&&"object"!=typeof t[n]||"triggers"===n&&"object"!=typeof t[n]||"values"===n&&"object"!=typeof t[n])return!1;if("schema"===n){t.schema.forEach(i=>{i.column&&r++});for(let i=0;i<r;i++)if(!(yield We.isSchema(t[n][i])))return!1}if("indexes"===n)for(const i of t[n])if(!(yield We.isIndexes(i)))return!1;if("triggers"===n)for(const i of t[n])if(!(yield We.isTriggers(i)))return!1;if("values"===n&&r>0)for(const i of t[n])if("object"!=typeof i||i.length!=r)return!1}return!0})()}static isSchema(t){return(0,O.Z)(function*(){const e=["column","value","foreignkey","primarykey","constraint"];if(null==t||0===Object.keys(t).length&&t.constructor===Object)return!1;for(const r of Object.keys(t))if(-1===e.indexOf(r)||"column"===r&&"string"!=typeof t[r]||"value"===r&&"string"!=typeof t[r]||"foreignkey"===r&&"string"!=typeof t[r]||"primarykey"===r&&"string"!=typeof t[r]||"constraint"===r&&"string"!=typeof t[r])return!1;return!0})()}static isIndexes(t){return(0,O.Z)(function*(){const e=["name","value","mode"];if(null==t||0===Object.keys(t).length&&t.constructor===Object)return!1;for(const r of Object.keys(t))if(-1===e.indexOf(r)||"name"===r&&"string"!=typeof t[r]||"value"===r&&"string"!=typeof t[r]||"mode"===r&&("string"!=typeof t[r]||"UNIQUE"!=t[r].toUpperCase()))return!1;return!0})()}static isTriggers(t){return(0,O.Z)(function*(){const e=["name","timeevent","condition","logic"];if(null==t||0===Object.keys(t).length&&t.constructor===Object)return!1;for(const r of Object.keys(t))if(-1===e.indexOf(r)||"name"===r&&"string"!=typeof t[r]||"timeevent"===r&&"string"!=typeof t[r]||"condition"===r&&"string"!=typeof t[r]||"logic"===r&&"string"!=typeof t[r])return!1;return!0})()}static isView(t){return(0,O.Z)(function*(){const e=["name","value"];if(null==t||0===Object.keys(t).length&&t.constructor===Object)return!1;for(const r of Object.keys(t))if(-1===e.indexOf(r)||"name"===r&&"string"!=typeof t[r]||"value"===r&&"string"!=typeof t[r])return!1;return!0})()}static checkSchemaValidity(t){return(0,O.Z)(function*(){for(let e=0;e<t.length;e++){const r={},n=Object.keys(t[e]);if(n.includes("column")&&(r.column=t[e].column),n.includes("value")&&(r.value=t[e].value),n.includes("foreignkey")&&(r.foreignkey=t[e].foreignkey),n.includes("constraint")&&(r.constraint=t[e].constraint),!(yield We.isSchema(r)))return Promise.reject(new Error(`CheckSchemaValidity: schema[${e}] not valid`))}return Promise.resolve()})()}static checkIndexesValidity(t){return(0,O.Z)(function*(){for(let e=0;e<t.length;e++){const r={},n=Object.keys(t[e]);if(n.includes("value")&&(r.value=t[e].value),n.includes("name")&&(r.name=t[e].name),n.includes("mode")&&(r.mode=t[e].mode),!(yield We.isIndexes(r)))return Promise.reject(new Error(`CheckIndexesValidity: indexes[${e}] not valid`))}return Promise.resolve()})()}static checkTriggersValidity(t){return(0,O.Z)(function*(){for(let e=0;e<t.length;e++){const r={},n=Object.keys(t[e]);if(n.includes("logic")&&(r.logic=t[e].logic),n.includes("name")&&(r.name=t[e].name),n.includes("timeevent")&&(r.timeevent=t[e].timeevent),n.includes("condition")&&(r.condition=t[e].condition),!(yield We.isTriggers(r)))return Promise.reject(new Error(`CheckTriggersValidity: triggers[${e}] not valid`))}return Promise.resolve()})()}static checkViewsValidity(t){return(0,O.Z)(function*(){for(let e=0;e<t.length;e++){const r={},n=Object.keys(t[e]);if(n.includes("value")&&(r.value=t[e].value),n.includes("name")&&(r.name=t[e].name),!(yield We.isView(r)))return Promise.reject(new Error(`CheckViewsValidity: views[${e}] not valid`))}return Promise.resolve()})()}static getTableColumnNamesTypes(t,e){return(0,O.Z)(function*(){let r=[];const n=[],i=[],a=`PRAGMA table_info('${e}');`;try{if(r=yield ie.queryAll(t,a,[]),r.length>0)for(const c of r)n.push(c.name),i.push(c.type);return Promise.resolve({names:n,types:i})}catch(c){return Promise.reject(new Error(`GetTableColumnNamesTypes: ${c.message}`))}})()}static getValues(t,e,r){return(0,O.Z)(function*(){const n=[];try{const i=yield We.getTableColumnNamesTypes(t,r);let a=[];if(!Object.keys(i).includes("names"))return Promise.reject(new Error(`GetValues: Table ${r} no names`));a=i.names;const c=yield ie.queryAll(t,e,[]);for(const f of c){const u=[];for(const y of a)Object.keys(f).includes(y)?u.push(f[y]):u.push(null);n.push(u)}return Promise.resolve(n)}catch(i){return Promise.reject(new Error(`GetValues: ${i.message}`))}})()}}let er=(()=>{class o{static extractTableName(e){const n=e.match(/(?:INSERT\s+INTO|UPDATE|DELETE\s+FROM)\s+([^\s]+)/i);return n&&n[1]?n[1]:null}static extractWhereClause(e){const n=e.match(/WHERE(.+?)(?:ORDER\s+BY|LIMIT|$)/i);return n&&n[1]?n[1].trim():null}static addPrefixToWhereClause(e,r,n,i){let a;return a=e.includes("AND")?e.split("AND").map(u=>u.trim()):[e],a.map(f=>{const u=f.match(/(\w+)\s*(=|<|<=|<>|>|>=|IN|BETWEEN|LIKE)\s*(.+)/);if(!u)return f;const y=u[1].trim(),m=u[2].trim();let v=u[3].trim(),g=y;const w=o.findIndexOfStringInArray(y,n);return-1!==w&&(g=o.getStringAtIndex(r,w)),`${i}${g} ${m} ${v}`}).join(" AND ")}static findIndexOfStringInArray(e,r){return r.indexOf(e)}static getStringAtIndex(e,r){if(r>=0&&r<e.length)return e[r]}static extractForeignKeyInfo(e){const n=e.match(/\bFOREIGN\s+KEY\s*\(([^)]+)\)\s+REFERENCES\s+(\w+)\s*\(([^)]+)\)\s+(ON\s+DELETE\s+(RESTRICT|CASCADE|SET\s+NULL|SET\s+DEFAULT|NO\s+ACTION))?/);if(n)return{forKeys:n[1].split(",").map(a=>a.trim()),tableName:n[2],refKeys:n[3].split(",").map(a=>a.trim()),action:n[5]?n[5]:"NO ACTION"};throw new Error("extractForeignKeyInfo: No FOREIGN KEY found")}static extractColumnNames(e){const r=new Set(["AND","OR","IN","VALUES","LIKE","BETWEEN","NOT"]),n=/\b[a-zA-Z]\w*\b(?=\s*(?:<=?|>=?|<>?|=|AND|OR|BETWEEN|NOT|IN|LIKE))|\b[a-zA-Z]\w*\b\s+BETWEEN\s+'[^']+'\s+AND\s+'[^']+'|\(([^)]+)\)\s+IN\s+\(?\s*VALUES\s*\(/g;let i;const a=[];for(;null!==(i=n.exec(e));){const c=i[1];if(c){const f=c.split(",");for(const u of f)a.push(u.trim())}else{const f=i[0];r.has(f.trim().toUpperCase())||a.push(f.trim())}}return a}static flattenMultilineString(e){return e.split(/\r?\n/).join(" ")}static getStmtAndRetColNames(e,r){const i={stmt:e,names:""},a=e.toUpperCase().indexOf("RETURNING");if(-1!==a){const c=e.substring(0,a);if(i.stmt=`${c};`,"wA"===r.substring(0,2)){const u=e.substring(a+9).trim();i.names=u.endsWith(";")?u.substring(0,u.length-1):u}}return i}static extractCombinedPrimaryKey(e){const n=new RegExp(/WHERE\s*\((.+?)\)\s*(?:=|IN)\s*\((.+?)\)/g),i=e.matchAll(n),a=[];for(const c of i){const u=c[1].trim().split(",").map(y=>y.trim());a.push(u)}return 0===a.length?null:a}static getWhereStmtForCombinedPK(e,r,n,i){let a=e;for(const c of i){const f=c.join(",")===r.join(",")?n:r;for(const[u,y]of c.entries())a=o.replaceAllString(a,y,f[u])}return a}static replaceAllString(e,r,n){return e.split(r).join(n)}static indicesOf(e,r,n=0){const i=[];let a=e.indexOf(r,n);for(;-1!==a;)i.push(a),a=e.indexOf(r,a+1);return i}static getWhereStmtForNonCombinedPK(e,r,n){let i="",a=e.substring(6);for(let c=0;c<r.length;c++){let f="withRefsNames",u=o.indicesOf(a,r[c]);if(0===u.length&&(u=o.indicesOf(a,n[c]),f="colNames"),u.length>0){let y="";const m=o.indicesOf(a,"=",u[0]);if(m.length>0){const v=o.indicesOf(a,"AND",m[0]);v.length>0?(y=a.substring(m[0]+1,v[0]-1),a=a.substring(v[0]+3)):y=a.substring(m[0]+1),c>0&&(i+=" AND "),i+="withRefsNames"===f?n[c]+" = "+y:r[c]+" = "+y}}}return i="WHERE "+i,i}static updateWhere(e,r,n){let i="";if(e.length<=0||"WHERE"!==e.toUpperCase().substring(0,5))return i;if(r.length===n.length){const a=o.extractCombinedPrimaryKey(e);i=a?o.getWhereStmtForCombinedPK(e,r,n,a):o.getWhereStmtForNonCombinedPK(e,r,n)}return i}}return o.replaceString=(t,e,r)=>{const n=t.indexOf(e);return-1!==n?t.substring(0,n)+r+t.substring(n+e.length):t},o})();class Xe{static findReferencesAndUpdate(t){return new Xe(t)}static getRefs(t){return new Xe(t)}static getReferences(t){return new Xe(t)}static searchForRelatedItems(t){return new Xe(t)}static upDateWhereForDefault(t){return new Xe(t)}static upDateWhereForRestrict(t){return new Xe(t)}static upDateWhereForCascade(t){return new Xe(t)}static executeUpdateForDelete(t){return new Xe(t)}constructor(t){this.message=t}}class St{static findReferencesAndUpdate(t,e,r,n,i){return(0,O.Z)(function*(){try{let a=!0;const c=yield St.getReferences(t,e),f=c.retRefs,u=c.tableWithRefs;if(f.length<=0||e===u)return a;for(const y of f){const m=er.extractForeignKeyInfo(y),v=m.tableName;if(""===v||v!==e)continue;const g=m.forKeys,w=m.refKeys;if(w.length!==g.length)throw Xe.findReferencesAndUpdate("findReferencesAndUpdate: mismatch length");const b=m.action;if("NO_ACTION"===b)continue;let T=u,k=g,S={uWhereStmt:"",setStmt:""};if(St.checkValuesMatch(g,n))throw Xe.findReferencesAndUpdate("Not implemented. Please transfer your example to the maintener");{const N=yield St.searchForRelatedItems(t,T,e,r,g,w,i);if(0===N.relatedItems.length&&N.key.length<=0)continue;if(T!==e)switch(b){case"RESTRICT":S=yield St.upDateWhereForRestrict(N);break;case"CASCADE":S=yield St.upDateWhereForCascade(N);break;default:S=yield St.upDateWhereForDefault(g,N)}}S.setStmt.length>0&&S.uWhereStmt.length>0&&St.executeUpdateForDelete(t,T,S.uWhereStmt,S.setStmt,k,i)}return a}catch(a){throw a instanceof Xe?Xe.findReferencesAndUpdate(a.message?a.message:a):a}})()}static getReferences(t,e){return(0,O.Z)(function*(){const r="SELECT sql FROM sqlite_master WHERE sql LIKE('%FOREIGN KEY%') AND sql LIKE('%REFERENCES%') AND sql LIKE('%"+e+"%') AND sql LIKE('%ON DELETE%');";try{const n=yield ie.queryAll(t,r,[]);let i=[],a="";if(n.length>0){let c=St.getRefs(n[0].sql);i=c.foreignKeys,a=c.tableName}return Promise.resolve({tableWithRefs:a,retRefs:i})}catch(n){throw Xe.getReferences(`getReferences: ${n.message?n.message:n}`)}})()}static getRefs(t){let e="";const r=[],n=er.flattenMultilineString(t);try{const a=n.match(/CREATE\s+TABLE\s+(\w+)\s+\(/);a&&(e=a[1]);const f=n.matchAll(/FOREIGN\s+KEY\s+\([^)]+\)\s+REFERENCES\s+(\w+)\s*\([^)]+\)\s+ON\s+DELETE\s+(CASCADE|RESTRICT|SET\s+DEFAULT|SET\s+NULL|NO\s+ACTION)/g);for(const u of f)r.push(u[0])}catch(i){throw Xe.getRefs(`getRefs: Error creating regular expression: ${i}`)}return{tableName:e,foreignKeys:r}}static getReferencedTableName(t){return(0,O.Z)(function*(){var e="";if(t.length>0){const r=t.split(new RegExp("REFERENCES","i"));if(2===r.length){const n=r[1].indexOf("(");e=r[1].substring(0,n).trim()}}return e})()}static searchForRelatedItems(t,e,r,n,i,a,c){return(0,O.Z)(function*(){const f=[];let u="";const y=i.map(v=>`t1.${v}`),m=a.map(v=>`t2.${v}`);try{let v=er.addPrefixToWhereClause(n,a,i,"t2.");v.endsWith(";")&&(v=v.slice(0,-1));const g=y.map((T,k)=>`${T} = ${m[k]}`).join(" AND "),w=`SELECT t1.rowid FROM ${e} t1 JOIN ${r} t2 ON ${g} WHERE ${v} AND t1.sql_deleted = 0;`,b=yield ie.queryAll(t,w,c);return b.length>0&&(u=Object.keys(b[0])[0],f.push(...b)),{key:u,relatedItems:f}}catch(v){throw Xe.searchForRelatedItems(v.message?v.message:v)}})()}static upDateWhereForDefault(t,e){return(0,O.Z)(function*(){let r="",n="";try{const i=e.key,a=[];for(const c of e.relatedItems){const f=c[i];void 0!==f&&a.push(f)}for(const c of t)r+=`${c} = NULL, `;r+="sql_deleted = 0",n=`WHERE ${i} IN (`;for(const c of a)n+=`${c},`;n.endsWith(",")&&(n=n.slice(0,-1)),n+=");"}catch(i){throw Xe.upDateWhereForDefault(i.message?i.message:i)}return{setStmt:r,uWhereStmt:n}})()}static upDateWhereForRestrict(t){return(0,O.Z)(function*(){try{const e="",r="";if(t.relatedItems.length>0)throw Xe.upDateWhereForRestrict("Restrict mode related items exist, please delete them first");return{setStmt:e,uWhereStmt:r}}catch(e){throw Xe.upDateWhereForRestrict(e.message?e.message:e)}})()}static upDateWhereForCascade(t){return(0,O.Z)(function*(){let e="",r="";try{const n=t.key,i=[];for(const a of t.relatedItems){const c=a[n];void 0!==c&&i.push(c)}e+="sql_deleted = 1",r=`WHERE ${n} IN (`;for(const a of i)r+=`${a},`;r.endsWith(",")&&(r=r.slice(0,-1)),r+=");"}catch(n){throw Xe.upDateWhereForCascade(n.message?n.message:n)}return{setStmt:e,uWhereStmt:r}})()}static executeUpdateForDelete(t,e,r,n,i,a){try{let c=-1;const f=`UPDATE ${e} SET ${n} ${r}`,u=[];if(a.length>0){const m=r.split("?");";"===m[m.length-1]&&m.pop();for(let v=0;v<m.length;v++)for(const g of i)er.indicesOf(m[v],g).length>0&&u.push(a[v])}if(c=ie.run(t,f,u,!1,"no").lastId,-1===c)throw Xe.executeUpdateForDelete(`UPDATE sql_deleted failed for table: ${e}`)}catch(c){throw Xe.executeUpdateForDelete(c.message?c.message:c)}}static getCurrentTimeAsInteger(){return Math.floor(Date.now()/1e3)}static checkValuesMatch(t,e){for(const r of t)if(!e.includes(r))return!1;return!0}}class ie{static beginTransaction(t,e){return(0,O.Z)(function*(){const r="BeginTransaction: ";if(!e)return Promise.reject(new Error(`${r}database not opened`));try{return t.exec("BEGIN"),Promise.resolve()}catch(n){return Promise.reject(new Error(`${r}${n.message}`))}})()}static rollbackTransaction(t,e){return(0,O.Z)(function*(){const r="RollbackTransaction: ";if(!e)return Promise.reject(new Error(`${r}database not opened`));try{return t.exec("ROLLBACK"),Promise.resolve()}catch(n){return Promise.reject(new Error(`${r}${n.message}`))}})()}static commitTransaction(t,e){const r="CommitTransaction: ";if(!e)return Promise.reject(new Error(`${r}database not opened`));try{return t.exec("COMMIT"),Promise.resolve()}catch(i){return Promise.reject(new Error(`${r}${i.message}`))}}static dbChanges(t){return(0,O.Z)(function*(){let r=0;try{return r=t.exec("SELECT total_changes()")[0].values[0][0],Promise.resolve(r)}catch(n){return Promise.reject(new Error(`DbChanges failed: ${n.message}`))}})()}static getLastId(t){return(0,O.Z)(function*(){let r=-1;try{return r=t.exec("SELECT last_insert_rowid()")[0].values[0][0],Promise.resolve(r)}catch(n){return Promise.reject(new Error(`GetLastId failed: ${n.message}`))}})()}static setForeignKeyConstraintsEnabled(t,e){return(0,O.Z)(function*(){let r="PRAGMA foreign_keys=OFF";e&&(r="PRAGMA foreign_keys=ON");try{return t.run(r),Promise.resolve()}catch(n){return Promise.reject(new Error(`SetForeignKey: ${n.message?n.message:n}`))}})()}static getVersion(t){return(0,O.Z)(function*(){let e=0;try{return e=t.exec("PRAGMA user_version;")[0].values[0][0],Promise.resolve(e)}catch(r){return Promise.reject(new Error(`GetVersion: ${r.message}`))}})()}static setVersion(t,e){return(0,O.Z)(function*(){try{return t.exec(`PRAGMA user_version = ${e}`),Promise.resolve()}catch(r){return Promise.reject(new Error(`SetVersion: ${r.message}`))}})()}static execute(t,e,r){return(0,O.Z)(function*(){try{var n=e;if(!r&&e.toLowerCase().includes("DELETE FROM".toLowerCase())){let c=(n=e.replace(/\n/g,"")).split(";");var i=[];for(const f of c)if("DELETE FROM"===f.trim().substring(0,11).toUpperCase()&&f.toLowerCase().includes("WHERE".toLowerCase())){const y=f.trim(),m=yield ie.deleteSQL(t,y,[]);i.push(m)}else i.push(f);n=i.join(";")}t.exec(n);const a=yield ie.dbChanges(t);return Promise.resolve(a)}catch(a){return Promise.reject(new Error(`Execute: ${a.message}`))}})()}static executeSet(t,e,r,n){return(0,O.Z)(function*(){const i=[];let a=-1,c={};for(let f=0;f<e.length;f++){const u="statement"in e[f]?e[f].statement:null,y="values"in e[f]&&e[f].values.length>0?e[f].values:[];if(null==u){let m="ExecuteSet: Error No statement";return m+=` for index ${f}`,Promise.reject(new Error(m))}try{if(Array.isArray(y[0]))for(const m of y){const v=yield ie.replaceUndefinedByNull(m);c=yield ie.run(t,u,v,r,n),a=c.lastId,Object.keys(c).includes("values")&&c.values.length>0&&i.push(c.values)}else{const m=yield ie.replaceUndefinedByNull(y);c=yield ie.run(t,u,m,r,n),a=c.lastId,Object.keys(c).includes("values")&&c.values.length>0&&i.push(c.values)}}catch(m){return Promise.reject(new Error(`ExecuteSet: ${m.message}`))}}return c.lastId=a,c.values="all"===n?i:"one"===n?i[0]:[],Promise.resolve(c)})()}static queryAll(t,e,r){return(0,O.Z)(function*(){try{let n=[];if(n=null!=r&&r.length>0?t.exec(e,r):t.exec(e),0==n.length)return Promise.resolve([]);const i=n[0].values.map(a=>{const c={};return n[0].columns.forEach((f,u)=>{c[f]=a[u]}),c});return Promise.resolve(i)}catch(n){return Promise.reject(new Error(`queryAll: ${n.message}`))}})()}static run(t,e,r,n,i){return(0,O.Z)(function*(){let a=e.replace(/\n/g,"").trim().substring(0,6).toUpperCase(),c=e,f=[],u={};try{!n&&"DELETE"===a&&(c=yield ie.deleteSQL(t,e,r));const y=r||[];let m;if(y.length>0){const g=yield ie.replaceUndefinedByNull(y);m=t.exec(c,g)}else m=t.exec(c);("all"===i||"one"===i)&&m&&m.length>0&&(f=ie.getReturnedValues(m[0],i));let v=yield ie.getLastId(t);return u.lastId=v,null!=f&&f.length>0&&(u.values=f),Promise.resolve(u)}catch(y){return Promise.reject(new Error(`run: ${y.message}`))}})()}static getReturnedValues(t,e){const r=[];for(let n=0;n<t.values.length;n++){let i={};for(let a=0;a<t.columns.length;a++)i[t.columns[a]]=t.values[n][a];if(r.push(i),"one"===e)break}return r}static deleteSQL(t,e,r){return(0,O.Z)(function*(){let n=e;try{const i=yield ie.isLastModified(t,!0),a=yield ie.isSqlDeleted(t,!0);if(!i||!a)return n;const c=er.extractWhereClause(n);if(!c)return Promise.reject(new Error("deleteSQL: cannot find a WHERE clause"));const f=er.extractTableName(n);if(!f)return Promise.reject(new Error("deleteSQL: cannot find a WHERE clause"));const u=er.extractColumnNames(c);if(0===u.length)return Promise.reject(new Error("deleteSQL: Did not find column names in the WHERE Statement"));const y="sql_deleted = 1";return n=(yield St.findReferencesAndUpdate(t,f,c,u,r))?`UPDATE ${f} SET ${y} WHERE ${c.endsWith(";")?c.slice(0,-1):c} AND sql_deleted = 0;`:"",Promise.resolve(n)}catch(i){return Promise.reject(new Error(`deleteSQL: ${i.message?i.message:i}`))}})()}static getTableList(t){return(0,O.Z)(function*(){try{const e=yield _t.getTablesNames(t);return Promise.resolve(e)}catch(e){return Promise.reject(new Error(`getTableList: ${e.message}`))}})()}static isTableExists(t,e){return(0,O.Z)(function*(){try{let r="SELECT name FROM sqlite_master WHERE ";r+=`type='table' AND name='${e}';`;const i=(yield ie.queryAll(t,r,[])).length>0;return Promise.resolve(i)}catch(r){return Promise.reject(new Error(`isTableExists: ${r.message}`))}})()}static isLastModified(t,e){return(0,O.Z)(function*(){if(!e)return Promise.reject("isLastModified: database not opened");try{const r=yield _t.getTablesNames(t);for(const n of r)if((yield We.getTableColumnNamesTypes(t,n)).names.includes("last_modified"))return Promise.resolve(!0)}catch(r){return Promise.reject(`isLastModified: ${r}`)}})()}static isSqlDeleted(t,e){return(0,O.Z)(function*(){if(!e)return Promise.reject("isSqlDeleted: database not opened");try{const r=yield _t.getTablesNames(t);for(const n of r)if((yield We.getTableColumnNamesTypes(t,n)).names.includes("sql_deleted"))return Promise.resolve(!0)}catch(r){return Promise.reject(`isSqlDeleted: ${r}`)}})()}static replaceUndefinedByNull(t){return(0,O.Z)(function*(){const e=[];for(const r of t){let n=r;typeof r>"u"&&(n=null),e.push(n)}return Promise.resolve(e)})()}static backupTables(t){return(0,O.Z)(function*(){let r={};try{const n=yield _t.getTablesNames(t);for(const i of n)try{const a=yield ie.backupTable(t,i);r[`${i}`]=a}catch(a){return Promise.reject(new Error(`BackupTables: table ${i}: ${a.message}`))}return Promise.resolve(r)}catch(n){return Promise.reject(new Error(`BackupTables: ${n.message}`))}})()}static backupTable(t,e){return(0,O.Z)(function*(){try{yield ie.beginTransaction(t,!0);const r=yield ie.getTableColumnNames(t,e),n=`_temp_${e}`,i=`DROP TABLE IF EXISTS ${n};`;yield ie.run(t,i,[],!1,"no");let a=`ALTER TABLE ${e} RENAME `;if(a+=`TO ${n};`,(yield ie.run(t,a,[],!1,"no"))<0){let f="BackupTable: lastId < 0";try{yield ie.rollbackTransaction(t,!0)}catch(u){f+=`: ${u.message}`}return Promise.reject(new Error(`${f}`))}try{return yield ie.commitTransaction(t,!0),Promise.resolve(r)}catch(f){return Promise.reject(new Error(`BackupTable: ${f.message}`))}}catch(r){return Promise.reject(new Error(`BackupTable: ${r.message}`))}})()}static getTableColumnNames(t,e){return(0,O.Z)(function*(){let r=[];const n=[],i=`PRAGMA table_info('${e}');`;try{if(r=yield ie.queryAll(t,i,[]),r.length>0)for(const a of r)n.push(a.name);return Promise.resolve(n)}catch(a){return Promise.reject(new Error(`GetTableColumnNames: ${a.message}`))}})()}static findCommonColumns(t,e){return(0,O.Z)(function*(){let r={};try{const n=yield _t.getTablesNames(t);if(0===n.length)return Promise.reject(new Error("FindCommonColumns: get table's names failed"));for(const i of n){const a=yield ie.getTableColumnNames(t,i);Object.keys(e).includes(i)&&(r[i]=ie.arraysIntersection(e[i],a))}return Promise.resolve(r)}catch(n){return Promise.reject(new Error(`FindCommonColumns: ${n.message}`))}})()}static arraysIntersection(t,e){if(null!=t&&null!=e){const r=new Set(t),n=new Set(e);return[...r].filter(i=>n.has(i))}return[]}static updateNewTablesData(t,e){return(0,O.Z)(function*(){try{yield ie.beginTransaction(t,!0);const r=[];if(Object.keys(e).forEach(a=>{const c=e[a].join(",");let f=`INSERT INTO ${a} `;f+=`(${c}) `,f+=`SELECT ${c} FROM _temp_${a};`,r.push(f)}),(yield ie.execute(t,r.join("\n"),!1))<0){let a="updateNewTablesData: changes < 0";try{yield ie.rollbackTransaction(t,!0)}catch(c){a+=`: ${c.message}`}return Promise.reject(new Error(`${a}`))}try{return yield ie.commitTransaction(t,!0),Promise.resolve()}catch(a){return Promise.reject(new Error(`updateNewTablesData: ${a.message}`))}}catch(r){return Promise.reject(new Error(`updateNewTablesData: ${r.message}`))}})()}}class ft{static createDatabaseSchema(t,e){return(0,O.Z)(function*(){let r=-1;const n=e.version;try{return yield ie.setVersion(t.mDb,n),"full"===e.mode&&(yield _t.dropAll(t.mDb)),r=yield ft.createSchema(t,e),Promise.resolve(r)}catch(i){return Promise.reject(new Error(`CreateDatabaseSchema: ${i.message}`))}})()}static createSchema(t,e){return(0,O.Z)(function*(){let r=0;const n=t.mDb;try{yield ie.beginTransaction(n,!0),t.setIsTransActive(!0)}catch(a){return Promise.reject(new Error(`CreateSchema: ${a.message}`))}const i=yield ft.createSchemaStatement(e);if(i.length>0){const a=i.join("\n");try{if(r=yield ie.execute(n,a,!0),r<0)try{yield ie.rollbackTransaction(n,!0),t.setIsTransActive(!1)}catch(c){return Promise.reject(new Error(`CreateSchema: changes < 0 ${c.message}`))}}catch(c){const f=c.message;try{return yield ie.rollbackTransaction(n,!0),t.setIsTransActive(!1),Promise.reject(new Error(`CreateSchema: ${f}`))}catch(u){return Promise.reject(new Error(`CreateSchema: changes < 0 ${u.message}: ${f}`))}}}try{return yield ie.commitTransaction(n,!0),t.setIsTransActive(!1),Promise.resolve(r)}catch(a){return Promise.reject(new Error(`CreateSchema: commit ${a.message}`))}})()}static createSchemaStatement(t){return(0,O.Z)(function*(){const e=[];let r=!1,n=!1;try{for(const i of t.tables){if(null!=i.schema&&i.schema.length>=1){e.push(`CREATE TABLE IF NOT EXISTS ${i.name} (`);for(let a=0;a<i.schema.length;a++)a===i.schema.length-1?i.schema[a].column?(e.push(`${i.schema[a].column} ${i.schema[a].value}`),"last_modified"===i.schema[a].column&&(r=!0),"sql_deleted"===i.schema[a].column&&(n=!0)):i.schema[a].foreignkey?e.push(`FOREIGN KEY (${i.schema[a].foreignkey}) ${i.schema[a].value}`):i.schema[a].constraint&&e.push(`CONSTRAINT ${i.schema[a].constraint} ${i.schema[a].value}`):i.schema[a].column?e.push(`${i.schema[a].column} ${i.schema[a].value},`):i.schema[a].foreignkey?e.push(`FOREIGN KEY (${i.schema[a].foreignkey}) ${i.schema[a].value},`):i.schema[a].primarykey?e.push(`FOREIGN KEY ${i.schema[a].value},`):i.schema[a].constraint&&e.push(`CONSTRAINT ${i.schema[a].constraint} ${i.schema[a].value},`);if(e.push(");"),r&&n){let a="CREATE TRIGGER IF NOT EXISTS ";a+=`${i.name}`,a+="_trigger_last_modified ",a+=`AFTER UPDATE ON ${i.name} `,a+="FOR EACH ROW WHEN NEW.last_modified < ",a+="OLD.last_modified BEGIN UPDATE ",a+=`${i.name} `,a+="SET last_modified = ",a+="(strftime('%s','now')) WHERE id=OLD.id; END;",e.push(a)}}if(null!=i.indexes&&i.indexes.length>=1)for(const a of i.indexes){const c=i.name;let f=`CREATE ${Object.keys(a).includes("mode")?a.mode+" ":""} INDEX IF NOT EXISTS `;f+=`${a.name} ON ${c} (${a.value});`,e.push(f)}if(null!=i.triggers&&i.triggers.length>=1)for(const a of i.triggers){const c=i.name;a.timeevent.toUpperCase().endsWith(" ON")&&(a.timeevent=a.timeevent.substring(0,a.timeevent.length-3));let f="CREATE TRIGGER IF NOT EXISTS ";f+=`${a.name} ${a.timeevent} ON ${c} `,a.condition&&(f+=`${a.condition} `),f+=`${a.logic};`,e.push(f)}}return Promise.resolve(e)}catch(i){return Promise.reject(i)}})()}static createTablesData(t,e,r){return(0,O.Z)(function*(){let n=0,i=!1,a=-1,c="",f=-1;const u=t.mDb;try{f=yield ie.dbChanges(u),yield ie.beginTransaction(u,!0),t.setIsTransActive(!0)}catch(y){return Promise.reject(new Error(`createTablesData: ${y.message}`))}for(const y of e.tables)if(null!=y.values&&y.values.length>=1)try{if(a=yield ft.createTableData(u,y,e.mode),r.emit({progress:`create table data ${y.name}`}),a<0)break;i=!0}catch(m){c=m.message,i=!1;break}if(i)try{return yield ie.commitTransaction(u,!0),t.setIsTransActive(!1),n=(yield ie.dbChanges(u))-f,Promise.resolve(n)}catch(y){return Promise.reject(new Error(`CreateTablesData: ${y.message}`))}else{if(!(c.length>0))return Promise.resolve(0);try{return yield ie.rollbackTransaction(u,!0),t.setIsTransActive(!1),Promise.reject(new Error(`CreateTablesData: ${c}`))}catch(y){return Promise.reject(new Error(`CreateTablesData: ${y.message}: ${c}`))}}})()}static createTableData(t,e,r){return(0,O.Z)(function*(){let n=-1;try{if(!(yield ie.isTableExists(t,e.name)))return Promise.reject(new Error(`CreateTableData: Table ${e.name} does not exist`));const a=yield We.getTableColumnNamesTypes(t,e.name),f=a.names;if(0===a.types.length)return Promise.reject(new Error(`CreateTableData: Table ${e.name} info does not exist`));for(let u=0;u<e.values.length;u++){let y=e.values[u],m=!0;const v=yield ft.createRowStatement(t,f,y,u,e.name,r);if(m=yield ft.checkUpdate(t,v,y,e.name,f),m){if("DELETE"===v.substring(0,6).toUpperCase()&&(y=[]),n=yield ie.run(t,v,y,!0,"no"),n<0)return Promise.reject(new Error("CreateTableData: lastId < 0"))}else n=0}return Promise.resolve(n)}catch(i){return Promise.reject(new Error(`CreateTableData: ${i.message}`))}})()}static createRowStatement(t,e,r,n,i,a){return(0,O.Z)(function*(){if(r.length!=e.length||0===r.length||0===e.length)return Promise.reject(new Error(`CreateRowStatement: Table ${i} values row ${n} not correct length`));try{const c=yield ft.isIdExists(t,i,e[0],r[0]);let f;if("full"===a||"partial"===a&&!c){const u=e.join(),y=yield ft.createQuestionMarkString(e.length);f=`INSERT INTO ${i} (${u}) VALUES (`,f+=`${y});`}else{let u=!0;const m=e.findIndex(v=>"sql_deleted"===v);if(m>=0&&1===r[m]&&(u=!1,f=`DELETE FROM ${i} WHERE `,f+="string"==typeof r[0]?`${e[0]} = '${r[0]}';`:`${e[0]} = ${r[0]};`),u){const v=yield ft.setNameForUpdate(e);if(0===v.length)return Promise.reject(new Error(`CreateRowStatement: Table ${i} values row ${n} not set to String`));f=`UPDATE ${i} SET ${v} WHERE `,f+="string"==typeof r[0]?`${e[0]} = '${r[0]}';`:`${e[0]} = ${r[0]};`}}return Promise.resolve(f)}catch(c){return Promise.reject(new Error(`CreateRowStatement: ${c.message}`))}})()}static checkUpdate(t,e,r,n,i){return(0,O.Z)(function*(){if("UPDATE"!==e.substring(0,6))return Promise.resolve(!0);try{let c=`SELECT * FROM ${n} WHERE `;c+="string"==typeof r[0]?`${i[0]} = '${r[0]}';`:`${i[0]} = ${r[0]};`;const f=yield We.getValues(t,c,n);let u=[];if(f.length>0&&(u=f[0]),r.length>0&&u.length>0&&r.length===u.length){for(let y=0;y<r.length;y++)if(r[y]!==u[y])return Promise.resolve(!0);return Promise.resolve(!1)}return Promise.reject(new Error("CheckUpdate: Both arrays not the same length"))}catch(c){return Promise.reject(new Error(`CheckUpdate: ${c.message}`))}})()}static isIdExists(t,e,r,n){return(0,O.Z)(function*(){let i=!1,a=`SELECT ${r} FROM ${e} WHERE ${r} = `;"number"==typeof n&&(a+=`${n};`),"string"==typeof n&&(a+=`'${n}';`);try{return 1===(yield ie.queryAll(t,a,[])).length&&(i=!0),Promise.resolve(i)}catch(c){return Promise.reject(new Error(`IsIdExists: ${c.message}`))}})()}static isType(t,e){return(0,O.Z)(function*(){let r=!1;return"NULL"===t&&"object"==typeof e&&(r=!0),"TEXT"===t&&"string"==typeof e&&(r=!0),"INTEGER"===t&&"number"==typeof e&&(r=!0),"REAL"===t&&"number"==typeof e&&(r=!0),"BLOB"===t&&"string"==typeof e&&(r=!0),r?Promise.resolve():Promise.reject(new Error("IsType: not a SQL Type"))})()}static checkColumnTypes(t,e){return(0,O.Z)(function*(){for(let r=0;r<e.length;r++)if(null!=e[r])try{yield ft.isType(t[r],e[r])}catch{return Promise.reject(new Error("CheckColumnTypes: Type not found"))}return Promise.resolve()})()}static createQuestionMarkString(t){return(0,O.Z)(function*(){let e="";for(let r=0;r<t;r++)e+="?,";return e.length>1?(e=e.slice(0,-1),Promise.resolve(e)):Promise.reject(new Error("CreateQuestionMarkString: length = 0"))})()}static setNameForUpdate(t){return(0,O.Z)(function*(){let e="";for(const r of t)e+=`${r} = ? ,`;return e.length>1?(e=e.slice(0,-1),Promise.resolve(e)):Promise.reject(new Error("SetNameForUpdate: length = 0"))})()}static createView(t,e){return(0,O.Z)(function*(){const r=`CREATE VIEW IF NOT EXISTS ${e.name} AS ${e.value};`;try{return(yield ie.execute(t,r,!0))<0?Promise.reject(new Error(`CreateView: ${e.name} failed`)):Promise.resolve()}catch(n){return Promise.reject(new Error(`CreateView: ${n.message}`))}})()}static createViews(t,e){return(0,O.Z)(function*(){const r=t.mDb;let n=!1,i="",a=-1,c=-1;try{a=yield ie.dbChanges(r),yield ie.beginTransaction(r,!0),t.setIsTransActive(!0)}catch(f){return Promise.reject(new Error(`createViews: ${f.message}`))}for(const f of e.views)if(null!=f.value)try{yield ft.createView(r,f),n=!0}catch(u){i=u.message,n=!1;break}if(n)try{return yield ie.commitTransaction(r,!0),t.setIsTransActive(!1),c=(yield ie.dbChanges(r))-a,Promise.resolve(c)}catch(f){return Promise.reject(new Error(`createViews: ${f.message}`))}else{if(!(i.length>0))return Promise.resolve(0);try{return yield ie.rollbackTransaction(r,!0),t.setIsTransActive(!1),Promise.reject(new Error(`createViews: ${i}`))}catch(f){return Promise.reject(new Error(`createViews: ${f.message}: ${i}`))}}})()}}class Qe{static createExportObject(t,e,r){return(0,O.Z)(function*(){const n={};let i=[],a=[],c="";try{a=yield Qe.getViewsName(t);const f=yield Qe.getTablesNameSQL(t);if(0===f.length)return Promise.reject(new Error("createExportObject: table's names failed"));if(!(yield ie.isTableExists(t,"sync_table"))&&"partial"===e.mode)return Promise.reject(new Error("No sync_table available"));switch(e.mode){case"partial":i=yield Qe.getTablesPartial(t,f,r);break;case"full":i=yield Qe.getTablesFull(t,f,r);break;default:c="createExportObject: expMode "+e.mode+" not defined"}return c.length>0?Promise.reject(new Error(c)):(i.length>0&&(n.database=e.database,n.version=e.version,n.encrypted=e.encrypted,n.mode=e.mode,n.tables=i,a.length>0&&(n.views=a)),Promise.resolve(n))}catch(f){return Promise.reject(new Error("createExportObject: "+f.message))}})()}static getViewsName(t){return(0,O.Z)(function*(){const e=[];let r="SELECT name,sql FROM sqlite_master WHERE ";r+="type='view' AND name NOT LIKE 'sqlite_%';";let n=[];try{n=yield ie.queryAll(t,"SELECT name,sql FROM sqlite_master WHERE type='view' AND name NOT LIKE 'sqlite_%';",[]);for(const i of n){const a={};a.name=i.name,a.value=i.sql.substring(i.sql.indexOf("AS ")+3),e.push(a)}return Promise.resolve(e)}catch(i){return Promise.reject(new Error(`getViewsName: ${i.message}`))}})()}static getTablesFull(t,e,r){return(0,O.Z)(function*(){const n=[];let i="";try{for(const a of e){let c,f;if(!a.name){i="GetTablesFull: no name";break}if(c=a.name,!a.sql){i="GetTablesFull: no sql";break}f=a.sql;const u={},y=yield Qe.getSchema(f);if(0===y.length){i="GetTablesFull: no Schema returned";break}yield We.checkSchemaValidity(y);const m=yield Qe.getIndexes(t,c);m.length>0&&(yield We.checkIndexesValidity(m));const v=yield Qe.getTriggers(t,c);v.length>0&&(yield We.checkTriggersValidity(v));let g=`Full: Table ${c} schema export completed ...`;r.emit({progress:g});const w=`SELECT * FROM ${c};`,b=yield We.getValues(t,w,c);if(u.name=c,!(y.length>0)){i="GetTablesFull: must contain schema";break}if(u.schema=y,m.length>0&&(u.indexes=m),v.length>0&&(u.triggers=v),b.length>0&&(u.values=b),Object.keys(u).length<=1){i=`GetTablesFull: table ${c} is not a jsonTable`;break}g=`Full: Table ${c} table data export completed ...`,r.emit({progress:g}),n.push(u)}return i.length>0?Promise.reject(new Error(i)):Promise.resolve(n)}catch(a){return Promise.reject(new Error(`GetTablesFull: ${a.message}`))}})()}static getSchema(t){return(0,O.Z)(function*(){const e=[],r=t.indexOf("("),n=t.lastIndexOf(")");let i=t.substring(r+1,n);try{i=yield Qe.modEmbeddedParentheses(i);const a=i.split(",");for(let c=0;c<a.length;c++){let f=[];const u=a[c].replace(/\n/g,"").trim();f[0]=u.substring(0,u.indexOf(" ")),f[1]=u.substring(u.indexOf(" ")+1);const y={};if("FOREIGN"===f[0].toUpperCase()){const m=u.indexOf("("),v=u.indexOf(")"),w=u.substring(m+1,v).split("\xa7");f[0]=w.join(","),f[0]=f[0].replace(/, /g,","),f[1]=u.substring(v+2),y.foreignkey=f[0]}else if("PRIMARY"===f[0].toUpperCase()){const m=u.indexOf("("),v=u.indexOf(")"),w=u.substring(m+1,v).split("\xa7");f[0]="CPK_"+w.join("_"),f[0]=f[0].replace(/_ /g,"_"),f[1]=u,y.constraint=f[0]}else if("CONSTRAINT"===f[0].toUpperCase()){let m=[];const v=f[1].trim();m[0]=v.substring(0,v.indexOf(" ")),m[1]=v.substring(v.indexOf(" ")+1),f[0]=m[0],y.constraint=f[0],f[1]=m[1]}else y.column=f[0];y.value=f[1].replace(/\xa7/g,","),e.push(y)}return Promise.resolve(e)}catch(a){return Promise.reject(new Error(a.message))}})()}static getIndexes(t,e){return(0,O.Z)(function*(){const r=[];let n="";try{let i="SELECT name,tbl_name,sql FROM sqlite_master WHERE ";i+=`type = 'index' AND tbl_name = '${e}' `,i+="AND sql NOTNULL;";const a=yield ie.queryAll(t,i,[]);if(a.length>0){for(const c of a){if(3!==Object.keys(c).length){n=`GetIndexes: Table ${e} creating indexes`;break}if(c.tbl_name!==e){n=`GetIndexes: Table ${e} doesn't match`;break}{const u=c.sql,y=u.includes("UNIQUE")?"UNIQUE":"",m=u.lastIndexOf("("),v=u.lastIndexOf(")"),g={};g.name=c.name,g.value=u.slice(m+1,v),y.length>0&&(g.mode=y),r.push(g)}}if(n.length>0)return Promise.reject(new Error(n))}return Promise.resolve(r)}catch(i){return Promise.reject(new Error(`GetIndexes: ${i.message}`))}})()}static getTriggers(t,e){return(0,O.Z)(function*(){const r=[];try{let n="SELECT name,tbl_name,sql FROM sqlite_master WHERE ";n+=`type = 'trigger' AND tbl_name = '${e}' `,n+="AND sql NOT NULL;";const i=yield ie.queryAll(t,n,[]);if(i.length>0)for(const a of i){if(3!==Object.keys(a).length)return Promise.reject(new Error(`GetTriggers: Table ${e} creating indexes`));if(a.tbl_name!==e)return Promise.reject(new Error(`GetTriggers: Table ${e} doesn't match`));{const u=a.name;let y=a.sql.split(u);if(2!=y.length)return Promise.reject(new Error("GetTriggers: sql split name does not return 2 values"));if(!y[1].includes(e))return Promise.reject(new Error(`GetTriggers: sql split does not contains ${e}`));const m=y[1].split(e,1)[0].trim();if(y=y[1].split(m+" "+e),2!=y.length)return Promise.reject(new Error("GetTriggers: sql split tableName does not return 2 values"));let v="",g="";if("BEGIN"!==y[1].trim().substring(0,5).toUpperCase()){if(y=y[1].trim().split("BEGIN"),2!=y.length)return Promise.reject(new Error("GetTriggers: sql split BEGIN does not return 2 values"));v=y[0].trim(),g="BEGIN"+y[1]}else g=y[1].trim();const w={};w.name=u,w.logic=g,v.length>0&&(w.condition=v),w.timeevent=m,r.push(w)}}return Promise.resolve(r)}catch(n){return Promise.reject(new Error(`GetTriggers: ${n.message}`))}})()}static getTablesPartial(t,e,r){return(0,O.Z)(function*(){const n=[];let i={},a=0,c=[],f="";try{const u=yield Qe.getPartialModeData(t,e);Object.keys(u).includes("syncDate")&&(a=u.syncDate),Object.keys(u).includes("modTables")&&(i=u.modTables,c=Object.keys(i));for(const y of e){let m="",v="";if(!y.name){f="GetTablesFull: no name";break}if(m=y.name,!y.sql){f="GetTablesFull: no sql";break}if(v=y.sql,0==c.length||-1===c.indexOf(m)||"No"==i[m])continue;const g={};let w=[],b=[],T=[];g.name=y,"Create"===i[g.name]&&(w=yield Qe.getSchema(v),w.length>0&&(yield We.checkSchemaValidity(w)),b=yield Qe.getIndexes(t,m),b.length>0&&(yield We.checkIndexesValidity(b)),T=yield Qe.getTriggers(t,m),T.length>0&&(yield We.checkTriggersValidity(T)));let k=`Partial: Table ${m} schema export completed ...`;r.emit({progress:k});let S="";S="Create"===i[m]?`SELECT * FROM ${m};`:`SELECT * FROM ${m} WHERE last_modified > ${a};`;const N=yield We.getValues(t,S,m);if(g.name=m,w.length>0&&(g.schema=w),b.length>0&&(g.indexes=b),T.length>0&&(g.triggers=T),N.length>0&&(g.values=N),Object.keys(g).length<=1){f=`GetTablesPartial: table ${m} is not a jsonTable`;break}k=`Partial: Table ${m} table data export completed ...`,r.emit({progress:k}),n.push(g)}return f.length>0?Promise.reject(new Error(f)):Promise.resolve(n)}catch(u){return Promise.reject(new Error(`GetTablesPartial: ${u.message}`))}})()}static getPartialModeData(t,e){return(0,O.Z)(function*(){const r={};try{const n=yield Qe.getSynchroDate(t);if(n<=0)return Promise.reject(new Error("GetPartialModeData: no syncDate"));const i=yield Qe.getTablesModified(t,e,n);return i.length<=0?Promise.reject(new Error("GetPartialModeData: no modTables")):(r.syncDate=n,r.modTables=i,Promise.resolve(r))}catch(n){return Promise.reject(new Error(`GetPartialModeData: ${n.message}`))}})()}static getTablesNameSQL(t){return(0,O.Z)(function*(){let e="SELECT name,sql FROM sqlite_master WHERE ";e+="type='table' AND name NOT LIKE 'sync_table' ",e+="AND name NOT LIKE '_temp_%' ",e+="AND name NOT LIKE 'sqlite_%';";try{const r=yield ie.queryAll(t,"SELECT name,sql FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sync_table' AND name NOT LIKE '_temp_%' AND name NOT LIKE 'sqlite_%';",[]);return Promise.resolve(r)}catch(r){return Promise.reject(new Error(`getTablesNamesSQL: ${r.message}`))}})()}static getTablesModified(t,e,r){return(0,O.Z)(function*(){let n="";try{const i={};for(const a of e){let c,f="SELECT count(*) AS tcount  ";f+=`FROM ${a.name};`;let u=yield ie.queryAll(t,f,[]);if(1!=u.length){n="GetTableModified: total count not returned";break}const y=u[0].tcount;if(f="SELECT count(*) AS mcount FROM ",f+=`${a.name} WHERE last_modified > `,f+=`${r};`,u=yield ie.queryAll(t,f,[]),1!=u.length)break;const m=u[0].mcount;c=0===m?"No":y===m?"Create":"Modified",i[a.name]=c}return n.length>0?Promise.reject(new Error(n)):Promise.resolve(i)}catch(i){return Promise.reject(new Error(`GetTableModified: ${i.message}`))}})()}static getSynchroDate(t){return(0,O.Z)(function*(){try{const e="SELECT sync_date FROM sync_table WHERE id = 1;",r=yield ie.queryAll(t,e,[]);return Promise.resolve(r[0].sync_date)}catch(e){return Promise.reject(new Error(`GetSynchroDate: ${e.message}`))}})()}static getLastExportDate(t){return(0,O.Z)(function*(){try{const e="SELECT sync_date FROM sync_table WHERE id = 2;",r=yield ie.queryAll(t,e,[]);return Promise.resolve(0===r.length?-1:r[0].sync_date)}catch(e){return Promise.reject(new Error(`getLastExport: ${e.message}`))}})()}static setLastExportDate(t,e){return(0,O.Z)(function*(){try{if(!(yield ie.isTableExists(t,"sync_table")))return Promise.reject(new Error("setLastExportDate: No sync_table available"));const n=Math.round(new Date(e).getTime()/1e3);let i="";return i=(yield Qe.getLastExportDate(t))>0?`UPDATE sync_table SET sync_date = ${n} WHERE id = 2;`:`INSERT INTO sync_table (sync_date) VALUES (${n});`,(yield ie.execute(t,i,!1))<0?{result:!1,message:"setLastExportDate failed"}:{result:!0}}catch(r){return{result:!1,message:`setLastExportDate failed: ${r.message}`}}})()}static delExportedRows(t){return(0,O.Z)(function*(){let e;try{if(!(yield ie.isTableExists(t,"sync_table")))return Promise.reject(new Error("DelExportedRows: No sync_table available"));if(e=yield Qe.getLastExportDate(t),e<0)return Promise.reject(new Error("DelExportedRows: no last exported date available"));const n=yield ie.getTableList(t);if(0===n.length)return Promise.reject(new Error("DelExportedRows: No table's names returned"));for(const i of n){let a=-1;const c=`DELETE FROM ${i}\n              WHERE sql_deleted = 1 AND last_modified < ${e};`;if(a=yield ie.run(t,c,[],!0,"no"),a<0)return Promise.reject(new Error("DelExportedRows: lastId < 0"))}}catch(r){return Promise.reject(new Error(`DelExportedRows failed: ${r.message}`))}})()}static modEmbeddedParentheses(t){return(0,O.Z)(function*(){const e=Qe.indexOfChar(t,"("),r=Qe.indexOfChar(t,")");if(e.length!=r.length)return Promise.reject("ModEmbeddedParentheses: Not same number of '(' & ')'");if(0===e.length)return Promise.resolve(t);let n=t.substring(0,e[0]-1);for(let i=0;i<e.length;i++){let a;i<e.length-1&&e[i+1]<r[i]?(a=t.substring(e[i]-1,r[i+1]),i++):a=t.substring(e[i]-1,r[i]),n+=a.replace(/,/g,"\xa7"),i<e.length-1&&(n+=t.substring(r[i],e[i+1]-1))}return n+=t.substring(r[r.length-1],t.length),Promise.resolve(n)})()}static indexOfChar(t,e){let r=[...t];return e=e.toLowerCase(),r.reduce((n,i,a)=>i.toLowerCase()===e?[...n,a]:n,[])}}class an{static onUpgrade(t,e,r,n){return(0,O.Z)(function*(){let i=-1;const a=new Int32Array(Object.keys(e).map(c=>parseInt(c))).sort();for(const c of a)if(c>r&&c<=n){const f=e[c].statements;if(0===f.length)return Promise.reject("onUpgrade: statements not given");try{yield ie.setForeignKeyConstraintsEnabled(t.mDb,!1);const u=yield ie.dbChanges(t.mDb);yield an.executeStatementsProcess(t,f),yield ie.setVersion(t.mDb,c),yield ie.setForeignKeyConstraintsEnabled(t.mDb,!0),i=(yield ie.dbChanges(t.mDb))-u}catch(u){return Promise.reject(new Error(`onUpgrade: ${u.message}`))}}return Promise.resolve(i)})()}static executeStatementsProcess(t,e){return(0,O.Z)(function*(){try{yield ie.beginTransaction(t.mDb,!0),t.setIsTransActive(!0);for(const r of e)yield ie.execute(t.mDb,r,!1);return yield ie.commitTransaction(t.mDb,!0),t.setIsTransActive(!1),Promise.resolve()}catch(r){return yield ie.rollbackTransaction(t.mDb,!0),t.setIsTransActive(!1),Promise.reject(`ExecuteStatementProcess: ${r}`)}})()}}class Vn{constructor(t,e,r,n,i,a){this.vUpgDict={},this.autoSave=!1,this.wasmPath="/assets",this.isBackup=!1,this.isTransactionActive=!1,this.dbName=t,this.store=n,this.version=e,this.mDb=null,this.vUpgDict=r,this._isDBOpen=!1,this.autoSave=i,this.wasmPath=a}open(){var t=this;return(0,O.Z)(function*(){const e={locateFile:r=>`${t.wasmPath}/${r}`};return new Promise((r,n)=>{try{Es(e).then(function(){var i=(0,O.Z)(function*(a){const c=yield Fe.getDBFromStore(t.dbName,t.store);null!=c?t.mDb=new a.Database(c):(t.mDb=new a.Database,yield Fe.setInitialDBToStore(t.dbName,t.store)),t._isDBOpen=!0;let f=yield ie.getVersion(t.mDb);if(t.version>f&&Object.keys(t.vUpgDict).length>0)try{if((yield Fe.isDBInStore(t.dbName,t.store))&&(yield Fe.copyDBToStore(t.dbName,`backup-${t.dbName}`,t.store),t.isBackup=!0),-1===(yield an.onUpgrade(t,t.vUpgDict,f,t.version)))try{t.isBackup&&(yield Fe.restoreDBFromStore(t.dbName,"backup",t.store))}catch(m){return n(new Error(`Open: ${m.message}`))}t.isBackup&&(yield Fe.removeDBFromStore(`backup-${t.dbName}`,t.store))}catch{try{t.isBackup&&(yield Fe.restoreDBFromStore(t.dbName,"backup",t.store))}catch(y){return n(new Error(`Open: ${y.message}`))}}if(t.autoSave)try{yield t.saveToStore()}catch(u){return t._isDBOpen=!1,n(`Open: ${u}`)}return yield ie.setForeignKeyConstraintsEnabled(t.mDb,!0),r()});return function(a){return i.apply(this,arguments)}}())}catch(i){return t._isDBOpen=!1,n(`in open ${i}`)}})})()}isDBOpen(){return this._isDBOpen}close(){var t=this;return(0,O.Z)(function*(){if(null!=t.mDb&&t._isDBOpen)try{yield t.saveToStore(!1),t.mDb.close(),t._isDBOpen=!1}catch(e){return t._isDBOpen=!1,Promise.reject(`in close ${e}`)}return Promise.resolve()})()}saveToStore(t=!0){var e=this;return(0,O.Z)(function*(){if(null!=e.mDb&&e._isDBOpen)try{yield Fe.setDBToStore(e.mDb,e.dbName,e.store),t&&(yield ie.setForeignKeyConstraintsEnabled(e.mDb,!0))}catch(r){return Promise.reject(`in saveToStore ${r}`)}return Promise.resolve()})()}exportDB(){var t=this;return(0,O.Z)(function*(){try{return t.mDb.export()}catch(e){return Promise.reject(`exportDB: ${e.message?e.message:e}`)}})()}getVersion(){var t=this;return(0,O.Z)(function*(){if(null!=t.mDb&&t._isDBOpen)try{const e=yield ie.getVersion(t.mDb);return Promise.resolve(e)}catch(e){return t._isDBOpen=!1,Promise.reject(`in getVersion ${e}`)}})()}isDBExists(t){var e=this;return(0,O.Z)(function*(){try{const r=yield Fe.isDBInStore(t,e.store);return Promise.resolve(r)}catch(r){return Promise.reject(`in isDBExists ${r}`)}})()}deleteDB(t){var e=this;return(0,O.Z)(function*(){try{const r=yield e.isDBExists(t);return r&&!e._isDBOpen&&(yield e.open()),yield e.close(),r&&(yield Fe.removeDBFromStore(t,e.store)),Promise.resolve()}catch(r){return Promise.reject(new Error(`DeleteDB: ${r.message}`))}})()}beginTransaction(){var t=this;return(0,O.Z)(function*(){if(!t._isDBOpen){let e=`BeginTransaction: Database ${t.dbName} `;return e+="not opened",Promise.reject(new Error(e))}try{return yield ie.beginTransaction(t.mDb,!0),t.setIsTransActive(!0),0}catch(e){return Promise.reject(new Error(`BeginTransaction: ${e.message}`))}})()}commitTransaction(){var t=this;return(0,O.Z)(function*(){if(!t._isDBOpen){let e=`CommitTransaction: Database ${t.dbName} `;return e+="not opened",Promise.reject(new Error(e))}try{return yield ie.commitTransaction(t.mDb,!0),t.setIsTransActive(!1),0}catch(e){return Promise.reject(new Error(`CommitTransaction: ${e.message}`))}})()}rollbackTransaction(){var t=this;return(0,O.Z)(function*(){if(!t._isDBOpen){let e=`RollbackTransaction: Database ${t.dbName} `;return e+="not opened",Promise.reject(new Error(e))}try{return yield ie.rollbackTransaction(t.mDb,!0),t.setIsTransActive(!1),0}catch(e){return Promise.reject(new Error(`RollbackTransaction: ${e.message}`))}})()}isTransActive(){return this.isTransactionActive}setIsTransActive(t){this.isTransactionActive=t}executeSQL(t,e=!0){var r=this;return(0,O.Z)(function*(){if(!r._isDBOpen){let i=`ExecuteSQL: Database ${r.dbName} `;return i+="not opened",Promise.reject(new Error(i))}let n=-1;try{n=yield ie.dbChanges(r.mDb),e&&!r.isTransactionActive&&(yield r.beginTransaction())}catch(i){return Promise.reject(new Error(`executeSQL: ${i.message}`))}try{if((yield ie.execute(r.mDb,t,!1))<0)return Promise.reject(new Error("ExecuteSQL: changes < 0"));e&&r.isTransactionActive&&(yield r.commitTransaction());const a=(yield ie.dbChanges(r.mDb))-n;return Promise.resolve(a)}catch(i){let a=`ExecuteSQL: ${i.message}`;try{e&&r.isTransactionActive&&(yield r.rollbackTransaction())}catch(c){a+=` : ${c.message}`}return Promise.reject(new Error(`ExecuteSQL: ${a}`))}finally{if(e&&(r.isTransactionActive=!1),r.autoSave)try{yield r.saveToStore()}catch(i){return r._isDBOpen=!1,Promise.reject(`ExecuteSQL: ${i}`)}}})()}execSet(t,e=!0,r="no"){var n=this;return(0,O.Z)(function*(){if(!n._isDBOpen){let c=`ExecSet: Database ${n.dbName} `;return c+="not opened",Promise.reject(new Error(c))}const i={changes:-1,lastId:-1};let a=-1;try{a=yield ie.dbChanges(n.mDb),e&&!n.isTransactionActive&&(yield n.beginTransaction())}catch(c){return Promise.reject(new Error(`ExecSet: ${c.message}`))}try{const c=yield ie.executeSet(n.mDb,t,!1,r);let f=c.lastId;if(f<0)return Promise.reject(new Error("ExecSet: changes < 0"));e&&n.isTransactionActive&&(yield n.commitTransaction());const u=(yield ie.dbChanges(n.mDb))-a;return i.changes=u,i.lastId=f,i.values=c.values?c.values:[],Promise.resolve(i)}catch(c){let f=`ExecSet: ${c.message}`;try{e&&n.isTransactionActive&&(yield n.rollbackTransaction())}catch(u){f+=` : ${u.message}`}return Promise.reject(new Error(`ExecSet: ${f}`))}finally{if(e&&(n.isTransactionActive=!1),n.autoSave)try{yield n.saveToStore()}catch(c){return n._isDBOpen=!1,Promise.reject(`ExecSet: ${c}`)}}})()}selectSQL(t,e){var r=this;return(0,O.Z)(function*(){if(!r._isDBOpen){let n=`SelectSQL: Database ${r.dbName} `;return n+="not opened",Promise.reject(new Error(n))}try{let n=yield ie.queryAll(r.mDb,t,e);return Promise.resolve(n)}catch(n){return Promise.reject(new Error(`SelectSQL: ${n.message}`))}})()}runSQL(t,e,r=!0,n){var i=this;return(0,O.Z)(function*(){let a=-1;if(!i._isDBOpen){let u=`RunSQL: Database ${i.dbName} `;return u+="not opened",Promise.reject(new Error(u))}const c={changes:-1,lastId:-1};let f=-1;try{f=yield ie.dbChanges(i.mDb),r&&!i.isTransactionActive&&(yield i.beginTransaction())}catch(u){return Promise.reject(new Error(`RunSQL: ${u.message}`))}try{const u=yield ie.run(i.mDb,t,e,!1,n);if(a=u.lastId,a<0)return Promise.reject(new Error("RunSQL: lastId < 0"));r&&i.isTransactionActive&&(yield i.commitTransaction());const y=(yield ie.dbChanges(i.mDb))-f;return c.changes=y,c.lastId=a,c.values=u.values?u.values:[],Promise.resolve(c)}catch(u){let y=`RunSQL: ${u.message}`;try{r&&i.isTransactionActive&&(yield i.rollbackTransaction())}catch(m){y+=` : ${m.message}`}return Promise.reject(new Error(`${y}`))}finally{if(r&&i.setIsTransActive(!1),i.autoSave)try{yield i.saveToStore()}catch(u){return i._isDBOpen=!1,Promise.reject(`ExecSet: ${u}`)}}})()}getTableNames(){var t=this;return(0,O.Z)(function*(){if(!t._isDBOpen){let e=`GetTableNames: Database ${t.dbName} `;return e+="not opened",Promise.reject(new Error(e))}try{let e=yield ie.getTableList(t.mDb);return Promise.resolve(e)}catch(e){return Promise.reject(new Error(`GetTableNames: ${e.message}`))}})()}isTable(t){var e=this;return(0,O.Z)(function*(){if(!e._isDBOpen){let r=`isTable: Database ${e.dbName} `;return r+="not opened",Promise.reject(new Error(r))}try{const r=yield ie.isTableExists(e.mDb,t);return Promise.resolve(r)}catch(r){return Promise.reject(new Error(`IsTable: ${r.message}`))}})()}createSyncTable(){var t=this;return(0,O.Z)(function*(){if(!t._isDBOpen){let r=`createSyncTable: Database ${t.dbName} `;return r+="not opened",Promise.reject(new Error(r))}let e=-1;try{if(yield ie.isTableExists(t.mDb,"sync_table"))return Promise.resolve(0);{const n=yield ie.isLastModified(t.mDb,t._isDBOpen),i=yield ie.isSqlDeleted(t.mDb,t._isDBOpen);if(n&&i){const a=Math.round((new Date).getTime()/1e3);let c="\n                          CREATE TABLE IF NOT EXISTS sync_table (\n                              id INTEGER PRIMARY KEY NOT NULL,\n                              sync_date INTEGER\n                              );";return c+=`INSERT INTO sync_table (sync_date) VALUES (\n                              "${a}");`,e=yield ie.execute(t.mDb,c,!1),Promise.resolve(e)}return Promise.reject(new Error("No last_modified/sql_deleted columns in tables"))}}catch(r){return Promise.reject(new Error(`CreateSyncTable: ${r.message}`))}})()}getSyncDate(){var t=this;return(0,O.Z)(function*(){if(!t._isDBOpen){let e=`getSyncDate: Database ${t.dbName} `;return e+="not opened",Promise.reject(new Error(e))}try{if(!(yield ie.isTableExists(t.mDb,"sync_table")))return Promise.reject(new Error("No sync_table available"));const r=yield Qe.getSynchroDate(t.mDb);return Promise.resolve(r)}catch(e){return Promise.reject(new Error(`getSyncDate: ${e.message}`))}})()}setSyncDate(t){var e=this;return(0,O.Z)(function*(){if(!e._isDBOpen){let r=`SetSyncDate: Database ${e.dbName} `;return r+="not opened",{result:!1,message:r}}try{if(!(yield ie.isTableExists(e.mDb,"sync_table")))return Promise.reject(new Error("No sync_table available"));const n=Math.round(new Date(t).getTime()/1e3);let i="UPDATE sync_table SET sync_date = ";return i+=`${n} WHERE id = 1;`,(yield ie.execute(e.mDb,i,!1))<0?{result:!1,message:"setSyncDate failed"}:{result:!0}}catch(r){return{result:!1,message:`setSyncDate failed: ${r.message}`}}})()}importJson(t,e){var r=this;return(0,O.Z)(function*(){let n=0;if(!r._isDBOpen)return Promise.reject(new Error("ImportJson: database is closed"));try{return yield ie.setForeignKeyConstraintsEnabled(r.mDb,!1),t.tables&&t.tables.length>0&&(n=yield ft.createDatabaseSchema(r,t),e.emit({progress:`Schema creation completed changes: ${n}`}),-1!=n&&(n+=(yield ft.createTablesData(r,t,e)),e.emit({progress:`Tables data creation completed changes: ${n}`}))),t.views&&t.views.length>0&&(n+=(yield ft.createViews(r,t))),yield ie.setForeignKeyConstraintsEnabled(r.mDb,!0),yield r.saveToStore(),Promise.resolve(n)}catch(i){return Promise.reject(new Error(`ImportJson: ${i.message}`))}})()}exportJson(t,e){var r=this;return(0,O.Z)(function*(){const n={};if(n.database=r.dbName.slice(0,-9),n.version=r.version,n.encrypted=!1,n.mode=t,!r._isDBOpen)return Promise.reject(new Error("ExportJson: database is closed"));try{if(yield ie.isTableExists(r.mDb,"sync_table"))yield Qe.setLastExportDate(r.mDb,(new Date).toISOString());else if("full"!==n.mode)return Promise.reject(new Error("No sync_table available for partial mode"));const a=yield Qe.createExportObject(r.mDb,n,e);return 0===Object.keys(a).length?Promise.reject(new Error("ExportJson: return Object is empty No data to synchronize")):We.isJsonSQLite(a)?Promise.resolve(a):Promise.reject(new Error("ExportJson: retJson not valid"))}catch(i){return Promise.reject(new Error(`ExportJson: ${i.message}`))}})()}deleteExportedRows(){var t=this;return(0,O.Z)(function*(){if(!t._isDBOpen)return Promise.reject(new Error("deleteExportedRows: database is closed"));try{return yield Qe.delExportedRows(t.mDb),Promise.resolve()}catch(e){return Promise.reject(new Error(`deleteExportedRows: ${e.message}`))}})()}}var Hn={exports:{}};!function(o,t){o.exports=function e(r,n,i){function a(u,y){if(!n[u]){if(!r[u]){if(!y&&Zt)return Zt(u);if(c)return c(u,!0);var v=new Error("Cannot find module '"+u+"'");throw v.code="MODULE_NOT_FOUND",v}var g=n[u]={exports:{}};r[u][0].call(g.exports,function(w){return a(r[u][1][w]||w)},g,g.exports,e,r,n,i)}return n[u].exports}for(var c=Zt,f=0;f<i.length;f++)a(i[f]);return a}({1:[function(e,r,n){(function(i){var c,a=i.MutationObserver||i.WebKitMutationObserver;if(a){var f=0,u=new a(w),y=i.document.createTextNode("");u.observe(y,{characterData:!0}),c=function(){y.data=f=++f%2}}else if(!i.setImmediate&&typeof i.MessageChannel<"u"){var m=new i.MessageChannel;m.port1.onmessage=w,c=function(){m.port2.postMessage(0)}}else c="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var T=i.document.createElement("script");T.onreadystatechange=function(){w(),T.onreadystatechange=null,T.parentNode.removeChild(T),T=null},i.document.documentElement.appendChild(T)}:function(){setTimeout(w,0)};var v,g=[];function w(){v=!0;for(var T,k,S=g.length;S;){for(k=g,g=[],T=-1;++T<S;)k[T]();S=g.length}v=!1}r.exports=function b(T){1===g.push(T)&&!v&&c()}}).call(this,typeof qt<"u"?qt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(e,r,n){var i=e(1);function a(){}var c={},f=["REJECTED"],u=["FULFILLED"],y=["PENDING"];function m(A){if("function"!=typeof A)throw new TypeError("resolver must be a function");this.state=y,this.queue=[],this.outcome=void 0,A!==a&&b(this,A)}function v(A,G,q){this.promise=A,"function"==typeof G&&(this.onFulfilled=G,this.callFulfilled=this.otherCallFulfilled),"function"==typeof q&&(this.onRejected=q,this.callRejected=this.otherCallRejected)}function g(A,G,q){i(function(){var Q;try{Q=G(q)}catch(H){return c.reject(A,H)}Q===A?c.reject(A,new TypeError("Cannot resolve promise with itself")):c.resolve(A,Q)})}function w(A){var G=A&&A.then;if(A&&("object"==typeof A||"function"==typeof A)&&"function"==typeof G)return function(){G.apply(A,arguments)}}function b(A,G){var q=!1;function Q(I){q||(q=!0,c.reject(A,I))}function H(I){q||(q=!0,c.resolve(A,I))}var de=T(function ee(){G(H,Q)});"error"===de.status&&Q(de.value)}function T(A,G){var q={};try{q.value=A(G),q.status="success"}catch(Q){q.status="error",q.value=Q}return q}r.exports=m,m.prototype.catch=function(A){return this.then(null,A)},m.prototype.then=function(A,G){if("function"!=typeof A&&this.state===u||"function"!=typeof G&&this.state===f)return this;var q=new this.constructor(a);return this.state!==y?g(q,this.state===u?A:G,this.outcome):this.queue.push(new v(q,A,G)),q},v.prototype.callFulfilled=function(A){c.resolve(this.promise,A)},v.prototype.otherCallFulfilled=function(A){g(this.promise,this.onFulfilled,A)},v.prototype.callRejected=function(A){c.reject(this.promise,A)},v.prototype.otherCallRejected=function(A){g(this.promise,this.onRejected,A)},c.resolve=function(A,G){var q=T(w,G);if("error"===q.status)return c.reject(A,q.value);var Q=q.value;if(Q)b(A,Q);else{A.state=u,A.outcome=G;for(var H=-1,ee=A.queue.length;++H<ee;)A.queue[H].callFulfilled(G)}return A},c.reject=function(A,G){A.state=f,A.outcome=G;for(var q=-1,Q=A.queue.length;++q<Q;)A.queue[q].callRejected(G);return A},m.resolve=function k(A){return A instanceof this?A:c.resolve(new this(a),A)},m.reject=function S(A){var G=new this(a);return c.reject(G,A)},m.all=function N(A){var G=this;if("[object Array]"!==Object.prototype.toString.call(A))return this.reject(new TypeError("must be an array"));var q=A.length,Q=!1;if(!q)return this.resolve([]);for(var H=new Array(q),ee=0,de=-1,I=new this(a);++de<q;)L(A[de],de);return I;function L(p,J){G.resolve(p).then(function Pe(ae){H[J]=ae,++ee===q&&!Q&&(Q=!0,c.resolve(I,H))},function(ae){Q||(Q=!0,c.reject(I,ae))})}},m.race=function M(A){var G=this;if("[object Array]"!==Object.prototype.toString.call(A))return this.reject(new TypeError("must be an array"));var q=A.length,Q=!1;if(!q)return this.resolve([]);for(var H=-1,ee=new this(a);++H<q;)G.resolve(A[H]).then(function(L){Q||(Q=!0,c.resolve(ee,L))},function(L){Q||(Q=!0,c.reject(ee,L))});return ee}},{1:1}],3:[function(e,r,n){(function(i){"function"!=typeof i.Promise&&(i.Promise=e(2))}).call(this,typeof qt<"u"?qt:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(e,r,n){var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(_){return typeof _}:function(_){return _&&"function"==typeof Symbol&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _};var f=function c(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}();function y(_,R){_=_||[],R=R||{};try{return new Blob(_,R)}catch(F){if("TypeError"!==F.name)throw F;for(var $=new(typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder),B=0;B<_.length;B+=1)$.append(_[B]);return $.getBlob(R.type)}}typeof Promise>"u"&&e(3);var m=Promise;function v(_,R){R&&_.then(function(x){R(null,x)},function(x){R(x)})}function g(_,R,x){"function"==typeof R&&_.then(R),"function"==typeof x&&_.catch(x)}function w(_){return"string"!=typeof _&&(console.warn(_+" used as a key, but it is not a string."),_=String(_)),_}function b(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var T="local-forage-detect-blob-support",k=void 0,S={},N=Object.prototype.toString,M="readonly",A="readwrite";function G(_){for(var R=_.length,x=new ArrayBuffer(R),$=new Uint8Array(x),B=0;B<R;B++)$[B]=_.charCodeAt(B);return x}function Q(_){return"boolean"==typeof k?m.resolve(k):function q(_){return new m(function(R){var x=_.transaction(T,A),$=y([""]);x.objectStore(T).put($,"key"),x.onabort=function(B){B.preventDefault(),B.stopPropagation(),R(!1)},x.oncomplete=function(){var B=navigator.userAgent.match(/Chrome\/(\d+)/),F=navigator.userAgent.match(/Edge\//);R(F||!B||parseInt(B[1],10)>=43)}}).catch(function(){return!1})}(_).then(function(R){return k=R})}function H(_){var R=S[_.name],x={};x.promise=new m(function($,B){x.resolve=$,x.reject=B}),R.deferredOperations.push(x),R.dbReady=R.dbReady?R.dbReady.then(function(){return x.promise}):x.promise}function ee(_){var x=S[_.name].deferredOperations.pop();if(x)return x.resolve(),x.promise}function de(_,R){var $=S[_.name].deferredOperations.pop();if($)return $.reject(R),$.promise}function I(_,R){return new m(function(x,$){if(S[_.name]=S[_.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},_.db){if(!R)return x(_.db);H(_),_.db.close()}var B=[_.name];R&&B.push(_.version);var F=f.open.apply(f,B);R&&(F.onupgradeneeded=function(X){var oe=F.result;try{oe.createObjectStore(_.storeName),X.oldVersion<=1&&oe.createObjectStore(T)}catch(ue){if("ConstraintError"!==ue.name)throw ue;console.warn('The database "'+_.name+'" has been upgraded from version '+X.oldVersion+" to version "+X.newVersion+', but the storage "'+_.storeName+'" already exists.')}}),F.onerror=function(X){X.preventDefault(),$(F.error)},F.onsuccess=function(){var X=F.result;X.onversionchange=function(oe){oe.target.close()},x(X),ee(_)}})}function L(_){return I(_,!1)}function p(_){return I(_,!0)}function J(_,R){if(!_.db)return!0;var x=!_.db.objectStoreNames.contains(_.storeName),B=_.version>_.db.version;if(_.version<_.db.version&&(_.version!==R&&console.warn('The database "'+_.name+"\" can't be downgraded from version "+_.db.version+" to version "+_.version+"."),_.version=_.db.version),B||x){if(x){var F=_.db.version+1;F>_.version&&(_.version=F)}return!0}return!1}function ae(_){return y([G(atob(_.data))],{type:_.type})}function Ie(_){return _&&_.__local_forage_encoded_blob}function fe(_){var R=this,x=R._initReady().then(function(){var $=S[R._dbInfo.name];if($&&$.dbReady)return $.dbReady});return g(x,_,_),x}function W(_,R,x,$){void 0===$&&($=1);try{var B=_.db.transaction(_.storeName,R);x(null,B)}catch(F){if($>0&&(!_.db||"InvalidStateError"===F.name||"NotFoundError"===F.name))return m.resolve().then(function(){if(!_.db||"NotFoundError"===F.name&&!_.db.objectStoreNames.contains(_.storeName)&&_.version<=_.db.version)return _.db&&(_.version=_.db.version+1),p(_)}).then(function(){return function Se(_){H(_);for(var R=S[_.name],x=R.forages,$=0;$<x.length;$++){var B=x[$];B._dbInfo.db&&(B._dbInfo.db.close(),B._dbInfo.db=null)}return _.db=null,L(_).then(function(F){return _.db=F,J(_)?p(_):F}).then(function(F){_.db=R.db=F;for(var X=0;X<x.length;X++)x[X]._dbInfo.db=F}).catch(function(F){throw de(_,F),F})}(_).then(function(){W(_,R,x,$-1)})}).catch(x);x(F)}}var we={_driver:"asyncStorage",_initStorage:function Ee(_){var R=this,x={db:null};if(_)for(var $ in _)x[$]=_[$];var B=S[x.name];B||(S[x.name]=B={forages:[],db:null,dbReady:null,deferredOperations:[]}),B.forages.push(R),R._initReady||(R._initReady=R.ready,R.ready=fe);var F=[];function X(){return m.resolve()}for(var oe=0;oe<B.forages.length;oe++){var ue=B.forages[oe];ue!==R&&F.push(ue._initReady().catch(X))}var le=B.forages.slice(0);return m.all(F).then(function(){return x.db=B.db,L(x)}).then(function(pe){return x.db=pe,J(x,R._defaultConfig.version)?p(x):pe}).then(function(pe){x.db=B.db=pe,R._dbInfo=x;for(var _e=0;_e<le.length;_e++){var Oe=le[_e];Oe!==R&&(Oe._dbInfo.db=x.db,Oe._dbInfo.version=x.version)}})},_support:function u(){try{if(!f||!f.open)return!1;var _=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),R="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!_||R)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}(),iterate:function ge(_,R){var x=this,$=new m(function(B,F){x.ready().then(function(){W(x._dbInfo,M,function(X,oe){if(X)return F(X);try{var le=oe.objectStore(x._dbInfo.storeName).openCursor(),pe=1;le.onsuccess=function(){var _e=le.result;if(_e){var Oe=_e.value;Ie(Oe)&&(Oe=ae(Oe));var ze=_(Oe,_e.key,pe++);void 0!==ze?B(ze):_e.continue()}else B()},le.onerror=function(){F(le.error)}}catch(_e){F(_e)}})}).catch(F)});return v($,R),$},getItem:function ve(_,R){var x=this;_=w(_);var $=new m(function(B,F){x.ready().then(function(){W(x._dbInfo,M,function(X,oe){if(X)return F(X);try{var le=oe.objectStore(x._dbInfo.storeName).get(_);le.onsuccess=function(){var pe=le.result;void 0===pe&&(pe=null),Ie(pe)&&(pe=ae(pe)),B(pe)},le.onerror=function(){F(le.error)}}catch(pe){F(pe)}})}).catch(F)});return v($,R),$},setItem:function Ze(_,R,x){var $=this;_=w(_);var B=new m(function(F,X){var oe;$.ready().then(function(){return oe=$._dbInfo,"[object Blob]"===N.call(R)?Q(oe.db).then(function(ue){return ue?R:function Pe(_){return new m(function(R,x){var $=new FileReader;$.onerror=x,$.onloadend=function(B){var F=btoa(B.target.result||"");R({__local_forage_encoded_blob:!0,data:F,type:_.type})},$.readAsBinaryString(_)})}(R)}):R}).then(function(ue){W($._dbInfo,A,function(le,pe){if(le)return X(le);try{var _e=pe.objectStore($._dbInfo.storeName);null===ue&&(ue=void 0);var Oe=_e.put(ue,_);pe.oncomplete=function(){void 0===ue&&(ue=null),F(ue)},pe.onabort=pe.onerror=function(){X(Oe.error?Oe.error:Oe.transaction.error)}}catch(ze){X(ze)}})}).catch(X)});return v(B,x),B},removeItem:function He(_,R){var x=this;_=w(_);var $=new m(function(B,F){x.ready().then(function(){W(x._dbInfo,A,function(X,oe){if(X)return F(X);try{var le=oe.objectStore(x._dbInfo.storeName).delete(_);oe.oncomplete=function(){B()},oe.onerror=function(){F(le.error)},oe.onabort=function(){F(le.error?le.error:le.transaction.error)}}catch(pe){F(pe)}})}).catch(F)});return v($,R),$},clear:function Ce(_){var R=this,x=new m(function($,B){R.ready().then(function(){W(R._dbInfo,A,function(F,X){if(F)return B(F);try{var ue=X.objectStore(R._dbInfo.storeName).clear();X.oncomplete=function(){$()},X.onabort=X.onerror=function(){B(ue.error?ue.error:ue.transaction.error)}}catch(le){B(le)}})}).catch(B)});return v(x,_),x},length:function $e(_){var R=this,x=new m(function($,B){R.ready().then(function(){W(R._dbInfo,M,function(F,X){if(F)return B(F);try{var ue=X.objectStore(R._dbInfo.storeName).count();ue.onsuccess=function(){$(ue.result)},ue.onerror=function(){B(ue.error)}}catch(le){B(le)}})}).catch(B)});return v(x,_),x},key:function Je(_,R){var x=this,$=new m(function(B,F){_<0?B(null):x.ready().then(function(){W(x._dbInfo,M,function(X,oe){if(X)return F(X);try{var ue=oe.objectStore(x._dbInfo.storeName),le=!1,pe=ue.openKeyCursor();pe.onsuccess=function(){var _e=pe.result;_e?0===_||le?B(_e.key):(le=!0,_e.advance(_)):B(null)},pe.onerror=function(){F(pe.error)}}catch(_e){F(_e)}})}).catch(F)});return v($,R),$},keys:function Ge(_){var R=this,x=new m(function($,B){R.ready().then(function(){W(R._dbInfo,M,function(F,X){if(F)return B(F);try{var ue=X.objectStore(R._dbInfo.storeName).openKeyCursor(),le=[];ue.onsuccess=function(){var pe=ue.result;pe?(le.push(pe.key),pe.continue()):$(le)},ue.onerror=function(){B(ue.error)}}catch(pe){B(pe)}})}).catch(B)});return v(x,_),x},dropInstance:function ht(_,R){R=b.apply(this,arguments);var B,x=this.config();return(_="function"!=typeof _&&_||{}).name||(_.name=_.name||x.name,_.storeName=_.storeName||x.storeName),v(B=_.name?(_.name===x.name&&this._dbInfo.db?m.resolve(this._dbInfo.db):L(_).then(function(oe){var ue=S[_.name],le=ue.forages;ue.db=oe;for(var pe=0;pe<le.length;pe++)le[pe]._dbInfo.db=oe;return oe})).then(_.storeName?function(oe){if(oe.objectStoreNames.contains(_.storeName)){var ue=oe.version+1;H(_);var le=S[_.name],pe=le.forages;oe.close();for(var _e=0;_e<pe.length;_e++){var Oe=pe[_e];Oe._dbInfo.db=null,Oe._dbInfo.version=ue}return new m(function(qe,Ke){var Ye=f.open(_.name,ue);Ye.onerror=function(at){Ye.result.close(),Ke(at)},Ye.onupgradeneeded=function(){Ye.result.deleteObjectStore(_.storeName)},Ye.onsuccess=function(){var at=Ye.result;at.close(),qe(at)}}).then(function(qe){le.db=qe;for(var Ke=0;Ke<pe.length;Ke++){var Ye=pe[Ke];Ye._dbInfo.db=qe,ee(Ye._dbInfo)}}).catch(function(qe){throw(de(_,qe)||m.resolve()).catch(function(){}),qe})}}:function(oe){H(_);var ue=S[_.name],le=ue.forages;oe.close();for(var pe=0;pe<le.length;pe++)le[pe]._dbInfo.db=null;return new m(function(ze,qe){var Ke=f.deleteDatabase(_.name);Ke.onerror=function(){var Ye=Ke.result;Ye&&Ye.close(),qe(Ke.error)},Ke.onblocked=function(){console.warn('dropInstance blocked for database "'+_.name+'" until all open connections are closed')},Ke.onsuccess=function(){var Ye=Ke.result;Ye&&Ye.close(),ze(Ye)}}).then(function(ze){ue.db=ze;for(var qe=0;qe<le.length;qe++)ee(le[qe]._dbInfo)}).catch(function(ze){throw(de(_,ze)||m.resolve()).catch(function(){}),ze})}):m.reject("Invalid arguments"),R),B}};var Y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",D=/^~~local_forage_type~([^~]+)~/,P="__lfsc__:",ne="arbf",se="blob",z="si08",wt=Object.prototype.toString;function Ue(_){var $,F,X,oe,ue,R=.75*_.length,x=_.length,B=0;"="===_[_.length-1]&&(R--,"="===_[_.length-2]&&R--);var le=new ArrayBuffer(R),pe=new Uint8Array(le);for($=0;$<x;$+=4)F=Y.indexOf(_[$]),X=Y.indexOf(_[$+1]),oe=Y.indexOf(_[$+2]),ue=Y.indexOf(_[$+3]),pe[B++]=F<<2|X>>4,pe[B++]=(15&X)<<4|oe>>2,pe[B++]=(3&oe)<<6|63&ue;return le}function Dt(_){var $,R=new Uint8Array(_),x="";for($=0;$<R.length;$+=3)x+=Y[R[$]>>2],x+=Y[(3&R[$])<<4|R[$+1]>>4],x+=Y[(15&R[$+1])<<2|R[$+2]>>6],x+=Y[63&R[$+2]];return R.length%3==2?x=x.substring(0,x.length-1)+"=":R.length%3==1&&(x=x.substring(0,x.length-2)+"=="),x}var Ot={serialize:function tr(_,R){var x="";if(_&&(x=wt.call(_)),_&&("[object ArrayBuffer]"===x||_.buffer&&"[object ArrayBuffer]"===wt.call(_.buffer))){var $,B=P;_ instanceof ArrayBuffer?($=_,B+=ne):($=_.buffer,"[object Int8Array]"===x?B+=z:"[object Uint8Array]"===x?B+="ui08":"[object Uint8ClampedArray]"===x?B+="uic8":"[object Int16Array]"===x?B+="si16":"[object Uint16Array]"===x?B+="ur16":"[object Int32Array]"===x?B+="si32":"[object Uint32Array]"===x?B+="ui32":"[object Float32Array]"===x?B+="fl32":"[object Float64Array]"===x?B+="fl64":R(new Error("Failed to get type for BinaryArray"))),R(B+Dt($))}else if("[object Blob]"===x){var F=new FileReader;F.onload=function(){var X="~~local_forage_type~"+_.type+"~"+Dt(this.result);R(P+se+X)},F.readAsArrayBuffer(_)}else try{R(JSON.stringify(_))}catch(X){console.error("Couldn't convert value into a JSON string: ",_),R(null,X)}},deserialize:function mt(_){if(_.substring(0,9)!==P)return JSON.parse(_);var $,R=_.substring(13),x=_.substring(9,13);if(x===se&&D.test(R)){var B=R.match(D);$=B[1],R=R.substring(B[0].length)}var F=Ue(R);switch(x){case ne:return F;case se:return y([F],{type:$});case z:return new Int8Array(F);case"ui08":return new Uint8Array(F);case"uic8":return new Uint8ClampedArray(F);case"si16":return new Int16Array(F);case"ur16":return new Uint16Array(F);case"si32":return new Int32Array(F);case"ui32":return new Uint32Array(F);case"fl32":return new Float32Array(F);case"fl64":return new Float64Array(F);default:throw new Error("Unkown type: "+x)}},stringToBuffer:Ue,bufferToString:Dt};function je(_,R,x,$){_.executeSql("CREATE TABLE IF NOT EXISTS "+R.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],x,$)}function dt(_,R,x,$,B,F){_.executeSql(x,$,B,function(X,oe){oe.code===oe.SYNTAX_ERR?X.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[R.storeName],function(ue,le){le.rows.length?F(ue,oe):je(ue,R,function(){ue.executeSql(x,$,B,F)},F)},F):F(X,oe)},F)}function Nt(_,R,x,$){var B=this;_=w(_);var F=new m(function(X,oe){B.ready().then(function(){void 0===R&&(R=null);var ue=R,le=B._dbInfo;le.serializer.serialize(R,function(pe,_e){_e?oe(_e):le.db.transaction(function(Oe){dt(Oe,le,"INSERT OR REPLACE INTO "+le.storeName+" (key, value) VALUES (?, ?)",[_,pe],function(){X(ue)},function(ze,qe){oe(qe)})},function(Oe){if(Oe.code===Oe.QUOTA_ERR){if($>0)return void X(Nt.apply(B,[_,ue,x,$-1]));oe(Oe)}})})}).catch(oe)});return v(F,x),F}var Ct={_driver:"webSQLStorage",_initStorage:function cr(_){var R=this,x={db:null};if(_)for(var $ in _)x[$]="string"!=typeof _[$]?_[$].toString():_[$];var B=new m(function(F,X){try{x.db=openDatabase(x.name,String(x.version),x.description,x.size)}catch(oe){return X(oe)}x.db.transaction(function(oe){je(oe,x,function(){R._dbInfo=x,F()},function(ue,le){X(le)})},X)});return x.serializer=Ot,B},_support:function d(){return"function"==typeof openDatabase}(),iterate:function pt(_,R){var x=this,$=new m(function(B,F){x.ready().then(function(){var X=x._dbInfo;X.db.transaction(function(oe){dt(oe,X,"SELECT * FROM "+X.storeName,[],function(ue,le){for(var pe=le.rows,_e=pe.length,Oe=0;Oe<_e;Oe++){var ze=pe.item(Oe),qe=ze.value;if(qe&&(qe=X.serializer.deserialize(qe)),void 0!==(qe=_(qe,ze.key,Oe+1)))return void B(qe)}B()},function(ue,le){F(le)})})}).catch(F)});return v($,R),$},getItem:function rr(_,R){var x=this;_=w(_);var $=new m(function(B,F){x.ready().then(function(){var X=x._dbInfo;X.db.transaction(function(oe){dt(oe,X,"SELECT * FROM "+X.storeName+" WHERE key = ? LIMIT 1",[_],function(ue,le){var pe=le.rows.length?le.rows.item(0).value:null;pe&&(pe=X.serializer.deserialize(pe)),B(pe)},function(ue,le){F(le)})})}).catch(F)});return v($,R),$},setItem:function At(_,R,x){return Nt.apply(this,[_,R,x,1])},removeItem:function Cr(_,R){var x=this;_=w(_);var $=new m(function(B,F){x.ready().then(function(){var X=x._dbInfo;X.db.transaction(function(oe){dt(oe,X,"DELETE FROM "+X.storeName+" WHERE key = ?",[_],function(){B()},function(ue,le){F(le)})})}).catch(F)});return v($,R),$},clear:function ye(_){var R=this,x=new m(function($,B){R.ready().then(function(){var F=R._dbInfo;F.db.transaction(function(X){dt(X,F,"DELETE FROM "+F.storeName,[],function(){$()},function(oe,ue){B(ue)})})}).catch(B)});return v(x,_),x},length:function yr(_){var R=this,x=new m(function($,B){R.ready().then(function(){var F=R._dbInfo;F.db.transaction(function(X){dt(X,F,"SELECT COUNT(key) as c FROM "+F.storeName,[],function(oe,ue){var le=ue.rows.item(0).c;$(le)},function(oe,ue){B(ue)})})}).catch(B)});return v(x,_),x},key:function ot(_,R){var x=this,$=new m(function(B,F){x.ready().then(function(){var X=x._dbInfo;X.db.transaction(function(oe){dt(oe,X,"SELECT key FROM "+X.storeName+" WHERE id = ? LIMIT 1",[_+1],function(ue,le){var pe=le.rows.length?le.rows.item(0).key:null;B(pe)},function(ue,le){F(le)})})}).catch(F)});return v($,R),$},keys:function nr(_){var R=this,x=new m(function($,B){R.ready().then(function(){var F=R._dbInfo;F.db.transaction(function(X){dt(X,F,"SELECT key FROM "+F.storeName,[],function(oe,ue){for(var le=[],pe=0;pe<ue.rows.length;pe++)le.push(ue.rows.item(pe).key);$(le)},function(oe,ue){B(ue)})})}).catch(B)});return v(x,_),x},dropInstance:function Br(_,R){R=b.apply(this,arguments);var x=this.config();(_="function"!=typeof _&&_||{}).name||(_.name=_.name||x.name,_.storeName=_.storeName||x.storeName);var B,$=this;return v(B=_.name?new m(function(F){var X;X=_.name===x.name?$._dbInfo.db:openDatabase(_.name,"","",0),F(_.storeName?{db:X,storeNames:[_.storeName]}:function gr(_){return new m(function(R,x){_.transaction(function($){$.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(B,F){for(var X=[],oe=0;oe<F.rows.length;oe++)X.push(F.rows.item(oe).name);R({db:_,storeNames:X})},function(B,F){x(F)})},function($){x($)})})}(X))}).then(function(F){return new m(function(X,oe){F.db.transaction(function(ue){function le(ze){return new m(function(qe,Ke){ue.executeSql("DROP TABLE IF EXISTS "+ze,[],function(){qe()},function(Ye,at){Ke(at)})})}for(var pe=[],_e=0,Oe=F.storeNames.length;_e<Oe;_e++)pe.push(le(F.storeNames[_e]));m.all(pe).then(function(){X()}).catch(function(ze){oe(ze)})},function(ue){oe(ue)})})}):m.reject("Invalid arguments"),R),B}};function ut(_,R){var x=_.name+"/";return _.storeName!==R.storeName&&(x+=_.storeName+"/"),x}function Ut(){return!function $r(){var _="_localforage_support_test";try{return localStorage.setItem(_,!0),localStorage.removeItem(_),!1}catch{return!0}}()||localStorage.length>0}var lr={_driver:"localStorageWrapper",_initStorage:function Lr(_){var x={};if(_)for(var $ in _)x[$]=_[$];return x.keyPrefix=ut(_,this._defaultConfig),Ut()?(this._dbInfo=x,x.serializer=Ot,m.resolve()):m.reject()},_support:function Fr(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}(),iterate:function it(_,R){var x=this,$=x.ready().then(function(){for(var B=x._dbInfo,F=B.keyPrefix,X=F.length,oe=localStorage.length,ue=1,le=0;le<oe;le++){var pe=localStorage.key(le);if(0===pe.indexOf(F)){var _e=localStorage.getItem(pe);if(_e&&(_e=B.serializer.deserialize(_e)),void 0!==(_e=_(_e,pe.substring(X),ue++)))return _e}}});return v($,R),$},getItem:function ln(_,R){var x=this;_=w(_);var $=x.ready().then(function(){var B=x._dbInfo,F=localStorage.getItem(B.keyPrefix+_);return F&&(F=B.serializer.deserialize(F)),F});return v($,R),$},setItem:function ur(_,R,x){var $=this;_=w(_);var B=$.ready().then(function(){void 0===R&&(R=null);var F=R;return new m(function(X,oe){var ue=$._dbInfo;ue.serializer.serialize(R,function(le,pe){if(pe)oe(pe);else try{localStorage.setItem(ue.keyPrefix+_,le),X(F)}catch(_e){("QuotaExceededError"===_e.name||"NS_ERROR_DOM_QUOTA_REACHED"===_e.name)&&oe(_e),oe(_e)}})})});return v(B,x),B},removeItem:function qr(_,R){var x=this;_=w(_);var $=x.ready().then(function(){localStorage.removeItem(x._dbInfo.keyPrefix+_)});return v($,R),$},clear:function Mr(_){var R=this,x=R.ready().then(function(){for(var $=R._dbInfo.keyPrefix,B=localStorage.length-1;B>=0;B--){var F=localStorage.key(B);0===F.indexOf($)&&localStorage.removeItem(F)}});return v(x,_),x},length:function vr(_){var x=this.keys().then(function($){return $.length});return v(x,_),x},key:function zr(_,R){var x=this,$=x.ready().then(function(){var F,B=x._dbInfo;try{F=localStorage.key(_)}catch{F=null}return F&&(F=F.substring(B.keyPrefix.length)),F});return v($,R),$},keys:function fn(_){var R=this,x=R.ready().then(function(){for(var $=R._dbInfo,B=localStorage.length,F=[],X=0;X<B;X++){var oe=localStorage.key(X);0===oe.indexOf($.keyPrefix)&&F.push(oe.substring($.keyPrefix.length))}return F});return v(x,_),x},dropInstance:function vt(_,R){if(R=b.apply(this,arguments),!(_="function"!=typeof _&&_||{}).name){var x=this.config();_.name=_.name||x.name,_.storeName=_.storeName||x.storeName}var B,$=this;return v(B=_.name?new m(function(F){F(_.storeName?ut(_,$._defaultConfig):_.name+"/")}).then(function(F){for(var X=localStorage.length-1;X>=0;X--){var oe=localStorage.key(X);0===oe.indexOf(F)&&localStorage.removeItem(oe)}}):m.reject("Invalid arguments"),R),B}},br=function(R,x){return R===x||"number"==typeof R&&"number"==typeof x&&isNaN(R)&&isNaN(x)},Zr=function(R,x){for(var $=R.length,B=0;B<$;){if(br(R[B],x))return!0;B++}return!1},_r=Array.isArray||function(_){return"[object Array]"===Object.prototype.toString.call(_)},Wt={},Gt={},Bt={INDEXEDDB:we,WEBSQL:Ct,LOCALSTORAGE:lr},fr=[Bt.INDEXEDDB._driver,Bt.WEBSQL._driver,Bt.LOCALSTORAGE._driver],ir=["dropInstance"],It=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(ir),wr={description:"",driver:fr.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Ur(_,R){_[R]=function(){var x=arguments;return _.ready().then(function(){return _[R].apply(_,x)})}}function hr(){for(var _=1;_<arguments.length;_++){var R=arguments[_];if(R)for(var x in R)R.hasOwnProperty(x)&&(arguments[0][x]=_r(R[x])?R[x].slice():R[x])}return arguments[0]}var Wr=function(){function _(R){for(var x in function a(_,R){if(!(_ instanceof R))throw new TypeError("Cannot call a class as a function")}(this,_),Bt)if(Bt.hasOwnProperty(x)){var $=Bt[x],B=$._driver;this[x]=B,Wt[B]||this.defineDriver($)}this._defaultConfig=hr({},wr),this._config=hr({},this._defaultConfig,R),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return _.prototype.config=function(x){if("object"===(typeof x>"u"?"undefined":i(x))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var $ in x){if("storeName"===$&&(x[$]=x[$].replace(/\W/g,"_")),"version"===$&&"number"!=typeof x[$])return new Error("Database version must be a number.");this._config[$]=x[$]}return!("driver"in x)||!x.driver||this.setDriver(this._config.driver)}return"string"==typeof x?this._config[x]:this._config},_.prototype.defineDriver=function(x,$,B){var F=new m(function(X,oe){try{var ue=x._driver,le=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!x._driver)return void oe(le);for(var pe=It.concat("_initStorage"),_e=0,Oe=pe.length;_e<Oe;_e++){var ze=pe[_e];if((!Zr(ir,ze)||x[ze])&&"function"!=typeof x[ze])return void oe(le)}!function(){for(var Ft=function(kr){return function(){var Et=new Error("Method "+kr+" is not implemented by the current driver"),$t=m.reject(Et);return v($t,arguments[arguments.length-1]),$t}},Er=0,dr=ir.length;Er<dr;Er++){var Vt=ir[Er];x[Vt]||(x[Vt]=Ft(Vt))}}();var Ye=function(Ft){Wt[ue]&&console.info("Redefining LocalForage driver: "+ue),Wt[ue]=x,Gt[ue]=Ft,X()};"_support"in x?x._support&&"function"==typeof x._support?x._support().then(Ye,oe):Ye(!!x._support):Ye(!0)}catch(at){oe(at)}});return g(F,$,B),F},_.prototype.driver=function(){return this._driver||null},_.prototype.getDriver=function(x,$,B){var F=Wt[x]?m.resolve(Wt[x]):m.reject(new Error("Driver not found."));return g(F,$,B),F},_.prototype.getSerializer=function(x){var $=m.resolve(Ot);return g($,x),$},_.prototype.ready=function(x){var $=this,B=$._driverSet.then(function(){return null===$._ready&&($._ready=$._initDriver()),$._ready});return g(B,x,x),B},_.prototype.setDriver=function(x,$,B){var F=this;_r(x)||(x=[x]);var X=this._getSupportedDrivers(x);function oe(){F._config.driver=F.driver()}function ue(_e){return F._extend(_e),oe(),F._ready=F._initStorage(F._config),F._ready}var pe=null!==this._driverSet?this._driverSet.catch(function(){return m.resolve()}):m.resolve();return this._driverSet=pe.then(function(){var _e=X[0];return F._dbInfo=null,F._ready=null,F.getDriver(_e).then(function(Oe){F._driver=Oe._driver,oe(),F._wrapLibraryMethodsWithReady(),F._initDriver=function le(_e){return function(){var Oe=0;return function ze(){for(;Oe<_e.length;){var qe=_e[Oe];return Oe++,F._dbInfo=null,F._ready=null,F.getDriver(qe).then(ue).catch(ze)}oe();var Ke=new Error("No available storage method found.");return F._driverSet=m.reject(Ke),F._driverSet}()}}(X)})}).catch(function(){oe();var _e=new Error("No available storage method found.");return F._driverSet=m.reject(_e),F._driverSet}),g(this._driverSet,$,B),this._driverSet},_.prototype.supports=function(x){return!!Gt[x]},_.prototype._extend=function(x){hr(this,x)},_.prototype._getSupportedDrivers=function(x){for(var $=[],B=0,F=x.length;B<F;B++){var X=x[B];this.supports(X)&&$.push(X)}return $},_.prototype._wrapLibraryMethodsWithReady=function(){for(var x=0,$=It.length;x<$;x++)Ur(this,It[x])},_.prototype.createInstance=function(x){return new _(x)},_}(),hn=new Wr;r.exports=hn},{3:3}]},{},[4])(4)}(Hn);const Kn=Hn.exports;var Yn={exports:{}};!function(o,t){o.exports=function e(r,n,i){function a(u,y){if(!n[u]){if(!r[u]){if(!y&&Zt)return Zt(u);if(c)return c(u,!0);var v=new Error("Cannot find module '"+u+"'");throw v.code="MODULE_NOT_FOUND",v}var g=n[u]={exports:{}};r[u][0].call(g.exports,function(w){return a(r[u][1][w]||w)},g,g.exports,e,r,n,i)}return n[u].exports}for(var c=Zt,f=0;f<i.length;f++)a(i[f]);return a}({1:[function(e,r,n){var i=e("./utils"),a=e("./support"),c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(f){for(var u,y,m,g,w,b,T=[],k=0,S=f.length,N=S,M="string"!==i.getTypeOf(f);k<f.length;)N=S-k,m=M?(u=f[k++],y=k<S?f[k++]:0,k<S?f[k++]:0):(u=f.charCodeAt(k++),y=k<S?f.charCodeAt(k++):0,k<S?f.charCodeAt(k++):0),g=(3&u)<<4|y>>4,w=1<N?(15&y)<<2|m>>6:64,b=2<N?63&m:64,T.push(c.charAt(u>>2)+c.charAt(g)+c.charAt(w)+c.charAt(b));return T.join("")},n.decode=function(f){var u,y,m,v,g,w,b=0,T=0,k="data:";if(f.substr(0,5)===k)throw new Error("Invalid base64 input, it looks like a data url.");var S,N=3*(f=f.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(f.charAt(f.length-1)===c.charAt(64)&&N--,f.charAt(f.length-2)===c.charAt(64)&&N--,N%1!=0)throw new Error("Invalid base64 input, bad content length.");for(S=a.uint8array?new Uint8Array(0|N):new Array(0|N);b<f.length;)u=c.indexOf(f.charAt(b++))<<2|(v=c.indexOf(f.charAt(b++)))>>4,y=(15&v)<<4|(g=c.indexOf(f.charAt(b++)))>>2,m=(3&g)<<6|(w=c.indexOf(f.charAt(b++))),S[T++]=u,64!==g&&(S[T++]=y),64!==w&&(S[T++]=m);return S}},{"./support":30,"./utils":32}],2:[function(e,r,n){var i=e("./external"),a=e("./stream/DataWorker"),c=e("./stream/Crc32Probe"),f=e("./stream/DataLengthProbe");function u(y,m,v,g,w){this.compressedSize=y,this.uncompressedSize=m,this.crc32=v,this.compression=g,this.compressedContent=w}u.prototype={getContentWorker:function(){var y=new a(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new f("data_length")),m=this;return y.on("end",function(){if(this.streamInfo.data_length!==m.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),y},getCompressedWorker:function(){return new a(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(y,m,v){return y.pipe(new c).pipe(new f("uncompressedSize")).pipe(m.compressWorker(v)).pipe(new f("compressedSize")).withStreamInfo("compression",m)},r.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,r,n){var i=e("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},n.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,r,n){var i=e("./utils"),a=function(){for(var c,f=[],u=0;u<256;u++){c=u;for(var y=0;y<8;y++)c=1&c?3988292384^c>>>1:c>>>1;f[u]=c}return f}();r.exports=function(c,f){return void 0!==c&&c.length?"string"!==i.getTypeOf(c)?function(u,y,m,v){var g=a,w=0+m;u^=-1;for(var b=0;b<w;b++)u=u>>>8^g[255&(u^y[b])];return-1^u}(0|f,c,c.length):function(u,y,m,v){var g=a,w=0+m;u^=-1;for(var b=0;b<w;b++)u=u>>>8^g[255&(u^y.charCodeAt(b))];return-1^u}(0|f,c,c.length):0}},{"./utils":32}],5:[function(e,r,n){n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(e,r,n){var i;i=typeof Promise<"u"?Promise:e("lie"),r.exports={Promise:i}},{lie:37}],7:[function(e,r,n){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",a=e("pako"),c=e("./utils"),f=e("./stream/GenericWorker"),u=i?"uint8array":"array";function y(m,v){f.call(this,"FlateWorker/"+m),this._pako=null,this._pakoAction=m,this._pakoOptions=v,this.meta={}}n.magic="\b\0",c.inherits(y,f),y.prototype.processChunk=function(m){this.meta=m.meta,null===this._pako&&this._createPako(),this._pako.push(c.transformTo(u,m.data),!1)},y.prototype.flush=function(){f.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},y.prototype.cleanUp=function(){f.prototype.cleanUp.call(this),this._pako=null},y.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var m=this;this._pako.onData=function(v){m.push({data:v,meta:m.meta})}},n.compressWorker=function(m){return new y("Deflate",m)},n.uncompressWorker=function(){return new y("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,r,n){function i(g,w){var b,T="";for(b=0;b<w;b++)T+=String.fromCharCode(255&g),g>>>=8;return T}function a(g,w,b,T,k,S){var N,M,A=g.file,G=g.compression,q=S!==u.utf8encode,Q=c.transformTo("string",S(A.name)),H=c.transformTo("string",u.utf8encode(A.name)),ee=A.comment,de=c.transformTo("string",S(ee)),I=c.transformTo("string",u.utf8encode(ee)),L=H.length!==A.name.length,p=I.length!==ee.length,J="",Pe="",ae="",Ie=A.dir,fe=A.date,Se={crc32:0,compressedSize:0,uncompressedSize:0};w&&!b||(Se.crc32=g.crc32,Se.compressedSize=g.compressedSize,Se.uncompressedSize=g.uncompressedSize);var W=0;w&&(W|=8),q||!L&&!p||(W|=2048);var ge,He,U=0,Ee=0;Ie&&(U|=16),"UNIX"===k?(Ee=798,U|=(He=ge=A.unixPermissions,ge||(He=Ie?16893:33204),(65535&He)<<16)):(Ee=20,U|=function(ge){return 63&(ge||0)}(A.dosPermissions)),N=fe.getUTCHours(),N<<=6,N|=fe.getUTCMinutes(),N<<=5,N|=fe.getUTCSeconds()/2,M=fe.getUTCFullYear()-1980,M<<=4,M|=fe.getUTCMonth()+1,M<<=5,M|=fe.getUTCDate(),L&&(Pe=i(1,1)+i(y(Q),4)+H,J+="up"+i(Pe.length,2)+Pe),p&&(ae=i(1,1)+i(y(de),4)+I,J+="uc"+i(ae.length,2)+ae);var ve="";return ve+="\n\0",ve+=i(W,2),ve+=G.magic,ve+=i(N,2),ve+=i(M,2),ve+=i(Se.crc32,4),ve+=i(Se.compressedSize,4),ve+=i(Se.uncompressedSize,4),ve+=i(Q.length,2),ve+=i(J.length,2),{fileRecord:m.LOCAL_FILE_HEADER+ve+Q+J,dirRecord:m.CENTRAL_FILE_HEADER+i(Ee,2)+ve+i(de.length,2)+"\0\0\0\0"+i(U,4)+i(T,4)+Q+J+de}}var c=e("../utils"),f=e("../stream/GenericWorker"),u=e("../utf8"),y=e("../crc32"),m=e("../signature");function v(g,w,b,T){f.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=w,this.zipPlatform=b,this.encodeFileName=T,this.streamFiles=g,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}c.inherits(v,f),v.prototype.push=function(g){var w=g.meta.percent||0,b=this.entriesCount,T=this._sources.length;this.accumulate?this.contentBuffer.push(g):(this.bytesWritten+=g.data.length,f.prototype.push.call(this,{data:g.data,meta:{currentFile:this.currentFile,percent:b?(w+100*(b-T-1))/b:100}}))},v.prototype.openedSource=function(g){this.currentSourceOffset=this.bytesWritten,this.currentFile=g.file.name;var w=this.streamFiles&&!g.file.dir;if(w){var b=a(g,w,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:b.fileRecord,meta:{percent:0}})}else this.accumulate=!0},v.prototype.closedSource=function(g){this.accumulate=!1;var T,w=this.streamFiles&&!g.file.dir,b=a(g,w,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(b.dirRecord),w)this.push({data:(T=g,m.DATA_DESCRIPTOR+i(T.crc32,4)+i(T.compressedSize,4)+i(T.uncompressedSize,4)),meta:{percent:100}});else for(this.push({data:b.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},v.prototype.flush=function(){for(var g=this.bytesWritten,w=0;w<this.dirRecords.length;w++)this.push({data:this.dirRecords[w],meta:{percent:100}});var k,S,N,G,T=(k=this.dirRecords.length,S=this.bytesWritten-g,N=g,G=c.transformTo("string",(0,this.encodeFileName)(this.zipComment)),m.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(k,2)+i(k,2)+i(S,4)+i(N,4)+i(G.length,2)+G);this.push({data:T,meta:{percent:100}})},v.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},v.prototype.registerPrevious=function(g){this._sources.push(g);var w=this;return g.on("data",function(b){w.processChunk(b)}),g.on("end",function(){w.closedSource(w.previous.streamInfo),w._sources.length?w.prepareNextSource():w.end()}),g.on("error",function(b){w.error(b)}),this},v.prototype.resume=function(){return!!f.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},v.prototype.error=function(g){var w=this._sources;if(!f.prototype.error.call(this,g))return!1;for(var b=0;b<w.length;b++)try{w[b].error(g)}catch{}return!0},v.prototype.lock=function(){f.prototype.lock.call(this);for(var g=this._sources,w=0;w<g.length;w++)g[w].lock()},r.exports=v},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,r,n){var i=e("../compressions"),a=e("./ZipFileWorker");n.generateWorker=function(c,f,u){var y=new a(f.streamFiles,u,f.platform,f.encodeFileName),m=0;try{c.forEach(function(v,g){m++;var w=function(S,N){var M=S||N,A=i[M];if(!A)throw new Error(M+" is not a valid compression method !");return A}(g.options.compression,f.compression),T=g.dir,k=g.date;g._compressWorker(w,g.options.compressionOptions||f.compressionOptions||{}).withStreamInfo("file",{name:v,dir:T,date:k,comment:g.comment||"",unixPermissions:g.unixPermissions,dosPermissions:g.dosPermissions}).pipe(y)}),y.entriesCount=m}catch(v){y.error(v)}return y}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,r,n){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new i;for(var c in this)"function"!=typeof this[c]&&(a[c]=this[c]);return a}}(i.prototype=e("./object")).loadAsync=e("./load"),i.support=e("./support"),i.defaults=e("./defaults"),i.version="3.10.1",i.loadAsync=function(a,c){return(new i).loadAsync(a,c)},i.external=e("./external"),r.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,r,n){var i=e("./utils"),a=e("./external"),c=e("./utf8"),f=e("./zipEntries"),u=e("./stream/Crc32Probe"),y=e("./nodejsUtils");function m(v){return new a.Promise(function(g,w){var b=v.decompressed.getContentWorker().pipe(new u);b.on("error",function(T){w(T)}).on("end",function(){b.streamInfo.crc32!==v.decompressed.crc32?w(new Error("Corrupted zip : CRC32 mismatch")):g()}).resume()})}r.exports=function(v,g){var w=this;return g=i.extend(g||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:c.utf8decode}),y.isNode&&y.isStream(v)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",v,!0,g.optimizedBinaryString,g.base64).then(function(b){var T=new f(g);return T.load(b),T}).then(function(b){var T=[a.Promise.resolve(b)],k=b.files;if(g.checkCRC32)for(var S=0;S<k.length;S++)T.push(m(k[S]));return a.Promise.all(T)}).then(function(b){for(var T=b.shift(),k=T.files,S=0;S<k.length;S++){var N=k[S],M=N.fileNameStr,A=i.resolve(N.fileNameStr);w.file(A,N.decompressed,{binary:!0,optimizedBinaryString:!0,date:N.date,dir:N.dir,comment:N.fileCommentStr.length?N.fileCommentStr:null,unixPermissions:N.unixPermissions,dosPermissions:N.dosPermissions,createFolders:g.createFolders}),N.dir||(w.file(A).unsafeOriginalName=M)}return T.zipComment.length&&(w.comment=T.zipComment),w})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,r,n){var i=e("../utils"),a=e("../stream/GenericWorker");function c(f,u){a.call(this,"Nodejs stream input adapter for "+f),this._upstreamEnded=!1,this._bindStream(u)}i.inherits(c,a),c.prototype._bindStream=function(f){var u=this;(this._stream=f).pause(),f.on("data",function(y){u.push({data:y,meta:{percent:0}})}).on("error",function(y){u.isPaused?this.generatedError=y:u.error(y)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},c.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},c.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=c},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,r,n){var i=e("readable-stream").Readable;function a(c,f,u){i.call(this,f),this._helper=c;var y=this;c.on("data",function(m,v){y.push(m)||y._helper.pause(),u&&u(v)}).on("error",function(m){y.emit("error",m)}).on("end",function(){y.push(null)})}e("../utils").inherits(a,i),a.prototype._read=function(){this._helper.resume()},r.exports=a},{"../utils":32,"readable-stream":16}],14:[function(e,r,n){r.exports={isNode:!0,newBufferFrom:function(i,a){if(re.from&&re.from!==Uint8Array.from)return re.from(i,a);if("number"==typeof i)throw new Error('The "data" argument must not be a number');return new re(i,a)},allocBuffer:function(i){if(re.alloc)return re.alloc(i);var a=new re(i);return a.fill(0),a},isBuffer:function(i){return re.isBuffer(i)},isStream:function(i){return i&&"function"==typeof i.on&&"function"==typeof i.pause&&"function"==typeof i.resume}}},{}],15:[function(e,r,n){function i(A,G,q){var Q,H=c.getTypeOf(G),ee=c.extend(q||{},y);ee.date=ee.date||new Date,null!==ee.compression&&(ee.compression=ee.compression.toUpperCase()),"string"==typeof ee.unixPermissions&&(ee.unixPermissions=parseInt(ee.unixPermissions,8)),ee.unixPermissions&&16384&ee.unixPermissions&&(ee.dir=!0),ee.dosPermissions&&16&ee.dosPermissions&&(ee.dir=!0),ee.dir&&(A=k(A)),ee.createFolders&&(Q=T(A))&&S.call(this,Q,!0),q&&void 0!==q.binary||(ee.binary=!("string"===H&&!1===ee.binary&&!1===ee.base64)),(G instanceof m&&0===G.uncompressedSize||ee.dir||!G||0===G.length)&&(ee.base64=!1,ee.binary=!0,G="",ee.compression="STORE",H="string");var I;I=G instanceof m||G instanceof f?G:w.isNode&&w.isStream(G)?new b(A,G):c.prepareContent(A,G,ee.binary,ee.optimizedBinaryString,ee.base64);var L=new v(A,I,ee);this.files[A]=L}var a=e("./utf8"),c=e("./utils"),f=e("./stream/GenericWorker"),u=e("./stream/StreamHelper"),y=e("./defaults"),m=e("./compressedObject"),v=e("./zipObject"),g=e("./generate"),w=e("./nodejsUtils"),b=e("./nodejs/NodejsStreamInputAdapter"),T=function(A){"/"===A.slice(-1)&&(A=A.substring(0,A.length-1));var G=A.lastIndexOf("/");return 0<G?A.substring(0,G):""},k=function(A){return"/"!==A.slice(-1)&&(A+="/"),A},S=function(A,G){return G=void 0!==G?G:y.createFolders,A=k(A),this.files[A]||i.call(this,A,null,{dir:!0,createFolders:G}),this.files[A]};function N(A){return"[object RegExp]"===Object.prototype.toString.call(A)}var M={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(A){var G,q,Q;for(G in this.files)Q=this.files[G],(q=G.slice(this.root.length,G.length))&&G.slice(0,this.root.length)===this.root&&A(q,Q)},filter:function(A){var G=[];return this.forEach(function(q,Q){A(q,Q)&&G.push(Q)}),G},file:function(A,G,q){if(1!==arguments.length)return i.call(this,A=this.root+A,G,q),this;if(N(A)){var Q=A;return this.filter(function(ee,de){return!de.dir&&Q.test(ee)})}var H=this.files[this.root+A];return H&&!H.dir?H:null},folder:function(A){if(!A)return this;if(N(A))return this.filter(function(H,ee){return ee.dir&&A.test(H)});var q=S.call(this,this.root+A),Q=this.clone();return Q.root=q.name,Q},remove:function(A){var G=this.files[A=this.root+A];if(G||("/"!==A.slice(-1)&&(A+="/"),G=this.files[A]),G&&!G.dir)delete this.files[A];else for(var q=this.filter(function(H,ee){return ee.name.slice(0,A.length)===A}),Q=0;Q<q.length;Q++)delete this.files[q[Q].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(A){var G,q={};try{if((q=c.extend(A||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=q.type.toLowerCase(),q.compression=q.compression.toUpperCase(),"binarystring"===q.type&&(q.type="string"),!q.type)throw new Error("No output type specified.");c.checkSupport(q.type),"darwin"!==q.platform&&"freebsd"!==q.platform&&"linux"!==q.platform&&"sunos"!==q.platform||(q.platform="UNIX"),"win32"===q.platform&&(q.platform="DOS"),G=g.generateWorker(this,q,q.comment||this.comment||"")}catch(H){(G=new f("error")).error(H)}return new u(G,q.type||"string",q.mimeType)},generateAsync:function(A,G){return this.generateInternalStream(A).accumulate(G)},generateNodeStream:function(A,G){return(A=A||{}).type||(A.type="nodebuffer"),this.generateInternalStream(A).toNodejsStream(G)}};r.exports=M},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,r,n){r.exports=e("stream")},{stream:void 0}],17:[function(e,r,n){var i=e("./DataReader");function a(c){i.call(this,c);for(var f=0;f<this.data.length;f++)c[f]=255&c[f]}e("../utils").inherits(a,i),a.prototype.byteAt=function(c){return this.data[this.zero+c]},a.prototype.lastIndexOfSignature=function(c){for(var f=c.charCodeAt(0),u=c.charCodeAt(1),y=c.charCodeAt(2),m=c.charCodeAt(3),v=this.length-4;0<=v;--v)if(this.data[v]===f&&this.data[v+1]===u&&this.data[v+2]===y&&this.data[v+3]===m)return v-this.zero;return-1},a.prototype.readAndCheckSignature=function(c){var f=c.charCodeAt(0),u=c.charCodeAt(1),y=c.charCodeAt(2),m=c.charCodeAt(3),v=this.readData(4);return f===v[0]&&u===v[1]&&y===v[2]&&m===v[3]},a.prototype.readData=function(c){if(this.checkOffset(c),0===c)return[];var f=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,f},r.exports=a},{"../utils":32,"./DataReader":18}],18:[function(e,r,n){var i=e("../utils");function a(c){this.data=c,this.length=c.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(c){this.checkIndex(this.index+c)},checkIndex:function(c){if(this.length<this.zero+c||c<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+c+"). Corrupted zip ?")},setIndex:function(c){this.checkIndex(c),this.index=c},skip:function(c){this.setIndex(this.index+c)},byteAt:function(){},readInt:function(c){var f,u=0;for(this.checkOffset(c),f=this.index+c-1;f>=this.index;f--)u=(u<<8)+this.byteAt(f);return this.index+=c,u},readString:function(c){return i.transformTo("string",this.readData(c))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var c=this.readInt(4);return new Date(Date.UTC(1980+(c>>25&127),(c>>21&15)-1,c>>16&31,c>>11&31,c>>5&63,(31&c)<<1))}},r.exports=a},{"../utils":32}],19:[function(e,r,n){var i=e("./Uint8ArrayReader");function a(c){i.call(this,c)}e("../utils").inherits(a,i),a.prototype.readData=function(c){this.checkOffset(c);var f=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,f},r.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,r,n){var i=e("./DataReader");function a(c){i.call(this,c)}e("../utils").inherits(a,i),a.prototype.byteAt=function(c){return this.data.charCodeAt(this.zero+c)},a.prototype.lastIndexOfSignature=function(c){return this.data.lastIndexOf(c)-this.zero},a.prototype.readAndCheckSignature=function(c){return c===this.readData(4)},a.prototype.readData=function(c){this.checkOffset(c);var f=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,f},r.exports=a},{"../utils":32,"./DataReader":18}],21:[function(e,r,n){var i=e("./ArrayReader");function a(c){i.call(this,c)}e("../utils").inherits(a,i),a.prototype.readData=function(c){if(this.checkOffset(c),0===c)return new Uint8Array(0);var f=this.data.subarray(this.zero+this.index,this.zero+this.index+c);return this.index+=c,f},r.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(e,r,n){var i=e("../utils"),a=e("../support"),c=e("./ArrayReader"),f=e("./StringReader"),u=e("./NodeBufferReader"),y=e("./Uint8ArrayReader");r.exports=function(m){var v=i.getTypeOf(m);return i.checkSupport(v),"string"!==v||a.uint8array?"nodebuffer"===v?new u(m):a.uint8array?new y(i.transformTo("uint8array",m)):new c(i.transformTo("array",m)):new f(m)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,r,n){n.LOCAL_FILE_HEADER="PK\x03\x04",n.CENTRAL_FILE_HEADER="PK\x01\x02",n.CENTRAL_DIRECTORY_END="PK\x05\x06",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",n.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",n.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,r,n){var i=e("./GenericWorker"),a=e("../utils");function c(f){i.call(this,"ConvertWorker to "+f),this.destType=f}a.inherits(c,i),c.prototype.processChunk=function(f){this.push({data:a.transformTo(this.destType,f.data),meta:f.meta})},r.exports=c},{"../utils":32,"./GenericWorker":28}],25:[function(e,r,n){var i=e("./GenericWorker"),a=e("../crc32");function c(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(c,i),c.prototype.processChunk=function(f){this.streamInfo.crc32=a(f.data,this.streamInfo.crc32||0),this.push(f)},r.exports=c},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,r,n){var i=e("../utils"),a=e("./GenericWorker");function c(f){a.call(this,"DataLengthProbe for "+f),this.propName=f,this.withStreamInfo(f,0)}i.inherits(c,a),c.prototype.processChunk=function(f){f&&(this.streamInfo[this.propName]=(this.streamInfo[this.propName]||0)+f.data.length),a.prototype.processChunk.call(this,f)},r.exports=c},{"../utils":32,"./GenericWorker":28}],27:[function(e,r,n){var i=e("../utils"),a=e("./GenericWorker");function c(f){a.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,f.then(function(y){u.dataIsReady=!0,u.data=y,u.max=y&&y.length||0,u.type=i.getTypeOf(y),u.isPaused||u._tickAndRepeat()},function(y){u.error(y)})}i.inherits(c,a),c.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},c.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},c.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},c.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var f=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":f=this.data.substring(this.index,u);break;case"uint8array":f=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":f=this.data.slice(this.index,u)}return this.index=u,this.push({data:f,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=c},{"../utils":32,"./GenericWorker":28}],28:[function(e,r,n){function i(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,c){return this._listeners[a].push(c),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,c){if(this._listeners[a])for(var f=0;f<this._listeners[a].length;f++)this._listeners[a][f].call(this,c)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var c=this;return a.on("data",function(f){c.processChunk(f)}),a.on("end",function(){c.end()}),a.on("error",function(f){c.error(f)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var a=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,c){return this.extraStreamInfo[a]=c,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},r.exports=i},{}],29:[function(e,r,n){var i=e("../utils"),a=e("./ConvertWorker"),c=e("./GenericWorker"),f=e("../base64"),u=e("../support"),y=e("../external"),m=null;if(u.nodestream)try{m=e("../nodejs/NodejsStreamOutputAdapter")}catch{}function g(w,b,T){var k=b;switch(b){case"blob":case"arraybuffer":k="uint8array";break;case"base64":k="string"}try{this._internalType=k,this._outputType=b,this._mimeType=T,i.checkSupport(k),this._worker=w.pipe(new a(k)),w.lock()}catch(S){this._worker=new c("error"),this._worker.error(S)}}g.prototype={accumulate:function(w){return function v(w,b){return new y.Promise(function(T,k){var S=[],N=w._internalType,M=w._outputType,A=w._mimeType;w.on("data",function(G,q){S.push(G),b&&b(q)}).on("error",function(G){S=[],k(G)}).on("end",function(){try{var G=function(q,Q,H){switch(q){case"blob":return i.newBlob(i.transformTo("arraybuffer",Q),H);case"base64":return f.encode(Q);default:return i.transformTo(q,Q)}}(M,function(q,Q){var H,ee=0,de=null,I=0;for(H=0;H<Q.length;H++)I+=Q[H].length;switch(q){case"string":return Q.join("");case"array":return Array.prototype.concat.apply([],Q);case"uint8array":for(de=new Uint8Array(I),H=0;H<Q.length;H++)de.set(Q[H],ee),ee+=Q[H].length;return de;case"nodebuffer":return re.concat(Q);default:throw new Error("concat : unsupported type '"+q+"'")}}(N,S),A);T(G)}catch(q){k(q)}S=[]}).resume()})}(this,w)},on:function(w,b){var T=this;return this._worker.on(w,"data"===w?function(k){b.call(T,k.data,k.meta)}:function(){i.delay(b,arguments,T)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(w){if(i.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new m(this,{objectMode:"nodebuffer"!==this._outputType},w)}},r.exports=g},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,r,n){if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",n.nodebuffer=!0,n.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")n.blob=!1;else{var i=new ArrayBuffer(0);try{n.blob=0===new Blob([i],{type:"application/zip"}).size}catch{try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(i),n.blob=0===a.getBlob("application/zip").size}catch{n.blob=!1}}}try{n.nodestream=!!e("readable-stream").Readable}catch{n.nodestream=!1}},{"readable-stream":16}],31:[function(e,r,n){for(var i=e("./utils"),a=e("./support"),c=e("./nodejsUtils"),f=e("./stream/GenericWorker"),u=new Array(256),y=0;y<256;y++)u[y]=252<=y?6:248<=y?5:240<=y?4:224<=y?3:192<=y?2:1;function m(){f.call(this,"utf-8 decode"),this.leftOver=null}function v(){f.call(this,"utf-8 encode")}u[254]=u[254]=1,n.utf8encode=function(g){return a.nodebuffer?c.newBufferFrom(g,"utf-8"):function(w){var b,T,k,S,N,M=w.length,A=0;for(S=0;S<M;S++)55296==(64512&(T=w.charCodeAt(S)))&&S+1<M&&56320==(64512&(k=w.charCodeAt(S+1)))&&(T=65536+(T-55296<<10)+(k-56320),S++),A+=T<128?1:T<2048?2:T<65536?3:4;for(b=a.uint8array?new Uint8Array(A):new Array(A),S=N=0;N<A;S++)55296==(64512&(T=w.charCodeAt(S)))&&S+1<M&&56320==(64512&(k=w.charCodeAt(S+1)))&&(T=65536+(T-55296<<10)+(k-56320),S++),T<128?b[N++]=T:(T<2048?b[N++]=192|T>>>6:(T<65536?b[N++]=224|T>>>12:(b[N++]=240|T>>>18,b[N++]=128|T>>>12&63),b[N++]=128|T>>>6&63),b[N++]=128|63&T);return b}(g)},n.utf8decode=function(g){return a.nodebuffer?i.transformTo("nodebuffer",g).toString("utf-8"):function(w){var b,T,k,S,N=w.length,M=new Array(2*N);for(b=T=0;b<N;)if((k=w[b++])<128)M[T++]=k;else if(4<(S=u[k]))M[T++]=65533,b+=S-1;else{for(k&=2===S?31:3===S?15:7;1<S&&b<N;)k=k<<6|63&w[b++],S--;1<S?M[T++]=65533:k<65536?M[T++]=k:(M[T++]=55296|(k-=65536)>>10&1023,M[T++]=56320|1023&k)}return M.length!==T&&(M.subarray?M=M.subarray(0,T):M.length=T),i.applyFromCharCode(M)}(g=i.transformTo(a.uint8array?"uint8array":"array",g))},i.inherits(m,f),m.prototype.processChunk=function(g){var w=i.transformTo(a.uint8array?"uint8array":"array",g.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var b=w;(w=new Uint8Array(b.length+this.leftOver.length)).set(this.leftOver,0),w.set(b,this.leftOver.length)}else w=this.leftOver.concat(w);this.leftOver=null}var T=function(S,N){var M;for((N=N||S.length)>S.length&&(N=S.length),M=N-1;0<=M&&128==(192&S[M]);)M--;return M<0||0===M?N:M+u[S[M]]>N?M:N}(w),k=w;T!==w.length&&(a.uint8array?(k=w.subarray(0,T),this.leftOver=w.subarray(T,w.length)):(k=w.slice(0,T),this.leftOver=w.slice(T,w.length))),this.push({data:n.utf8decode(k),meta:g.meta})},m.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=m,i.inherits(v,f),v.prototype.processChunk=function(g){this.push({data:n.utf8encode(g.data),meta:g.meta})},n.Utf8EncodeWorker=v},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,r,n){var i=e("./support"),a=e("./base64"),c=e("./nodejsUtils"),f=e("./external");function u(b){return b}function y(b,T){for(var k=0;k<b.length;++k)T[k]=255&b.charCodeAt(k);return T}e("setimmediate"),n.newBlob=function(b,T){n.checkSupport("blob");try{return new Blob([b],{type:T})}catch{try{var k=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return k.append(b),k.getBlob(T)}catch{throw new Error("Bug : can't construct the Blob.")}}};var m={stringifyByChunk:function(b,T,k){var S=[],N=0,M=b.length;if(M<=k)return String.fromCharCode.apply(null,b);for(;N<M;)S.push(String.fromCharCode.apply(null,"array"===T||"nodebuffer"===T?b.slice(N,Math.min(N+k,M)):b.subarray(N,Math.min(N+k,M)))),N+=k;return S.join("")},stringifyByChar:function(b){for(var T="",k=0;k<b.length;k++)T+=String.fromCharCode(b[k]);return T},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&1===String.fromCharCode.apply(null,c.allocBuffer(1)).length}catch{return!1}}()}};function v(b){var T=65536,k=n.getTypeOf(b),S=!0;if("uint8array"===k?S=m.applyCanBeUsed.uint8array:"nodebuffer"===k&&(S=m.applyCanBeUsed.nodebuffer),S)for(;1<T;)try{return m.stringifyByChunk(b,k,T)}catch{T=Math.floor(T/2)}return m.stringifyByChar(b)}function g(b,T){for(var k=0;k<b.length;k++)T[k]=b[k];return T}n.applyFromCharCode=v;var w={};w.string={string:u,array:function(b){return y(b,new Array(b.length))},arraybuffer:function(b){return w.string.uint8array(b).buffer},uint8array:function(b){return y(b,new Uint8Array(b.length))},nodebuffer:function(b){return y(b,c.allocBuffer(b.length))}},w.array={string:v,array:u,arraybuffer:function(b){return new Uint8Array(b).buffer},uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return c.newBufferFrom(b)}},w.arraybuffer={string:function(b){return v(new Uint8Array(b))},array:function(b){return g(new Uint8Array(b),new Array(b.byteLength))},arraybuffer:u,uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return c.newBufferFrom(new Uint8Array(b))}},w.uint8array={string:v,array:function(b){return g(b,new Array(b.length))},arraybuffer:function(b){return b.buffer},uint8array:u,nodebuffer:function(b){return c.newBufferFrom(b)}},w.nodebuffer={string:v,array:function(b){return g(b,new Array(b.length))},arraybuffer:function(b){return w.nodebuffer.uint8array(b).buffer},uint8array:function(b){return g(b,new Uint8Array(b.length))},nodebuffer:u},n.transformTo=function(b,T){if(T=T||"",!b)return T;n.checkSupport(b);var k=n.getTypeOf(T);return w[k][b](T)},n.resolve=function(b){for(var T=b.split("/"),k=[],S=0;S<T.length;S++){var N=T[S];"."===N||""===N&&0!==S&&S!==T.length-1||(".."===N?k.pop():k.push(N))}return k.join("/")},n.getTypeOf=function(b){return"string"==typeof b?"string":"[object Array]"===Object.prototype.toString.call(b)?"array":i.nodebuffer&&c.isBuffer(b)?"nodebuffer":i.uint8array&&b instanceof Uint8Array?"uint8array":i.arraybuffer&&b instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(b){if(!i[b.toLowerCase()])throw new Error(b+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(b){var T,k,S="";for(k=0;k<(b||"").length;k++)S+="\\x"+((T=b.charCodeAt(k))<16?"0":"")+T.toString(16).toUpperCase();return S},n.delay=function(b,T,k){setImmediate(function(){b.apply(k||null,T||[])})},n.inherits=function(b,T){function k(){}k.prototype=T.prototype,b.prototype=new k},n.extend=function(){var b,T,k={};for(b=0;b<arguments.length;b++)for(T in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],T)&&void 0===k[T]&&(k[T]=arguments[b][T]);return k},n.prepareContent=function(b,T,k,S,N){return f.Promise.resolve(T).then(function(M){return i.blob&&(M instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(M)))&&typeof FileReader<"u"?new f.Promise(function(A,G){var q=new FileReader;q.onload=function(Q){A(Q.target.result)},q.onerror=function(Q){G(Q.target.error)},q.readAsArrayBuffer(M)}):M}).then(function(M){var G,A=n.getTypeOf(M);return A?("arraybuffer"===A?M=n.transformTo("uint8array",M):"string"===A&&(N?M=a.decode(M):k&&!0!==S&&(M=y(G=M,i.uint8array?new Uint8Array(G.length):new Array(G.length)))),M):f.Promise.reject(new Error("Can't read the data of '"+b+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,r,n){var i=e("./reader/readerFor"),a=e("./utils"),c=e("./signature"),f=e("./zipEntry"),u=e("./support");function y(m){this.files=[],this.loadOptions=m}y.prototype={checkSignature:function(m){if(!this.reader.readAndCheckSignature(m)){this.reader.index-=4;var v=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(v)+", expected "+a.pretty(m)+")")}},isSignature:function(m,v){var g=this.reader.index;this.reader.setIndex(m);var w=this.reader.readString(4)===v;return this.reader.setIndex(g),w},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var m=this.reader.readData(this.zipCommentLength),g=a.transformTo(u.uint8array?"uint8array":"array",m);this.zipComment=this.loadOptions.decodeFileName(g)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var m,v,g,w=this.zip64EndOfCentralSize-44;0<w;)m=this.reader.readInt(2),v=this.reader.readInt(4),g=this.reader.readData(v),this.zip64ExtensibleData[m]={id:m,length:v,value:g}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var m,v;for(m=0;m<this.files.length;m++)this.reader.setIndex((v=this.files[m]).localHeaderOffset),this.checkSignature(c.LOCAL_FILE_HEADER),v.readLocalPart(this.reader),v.handleUTF8(),v.processAttributes()},readCentralDir:function(){var m;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(c.CENTRAL_FILE_HEADER);)(m=new f({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(m);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var m=this.reader.lastIndexOfSignature(c.CENTRAL_DIRECTORY_END);if(m<0)throw this.isSignature(0,c.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(m);var v=m;if(this.checkSignature(c.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(m=this.reader.lastIndexOfSignature(c.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(m),this.checkSignature(c.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,c.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(c.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(c.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var g=this.centralDirOffset+this.centralDirSize;this.zip64&&(g+=20,g+=12+this.zip64EndOfCentralSize);var w=v-g;if(0<w)this.isSignature(v,c.CENTRAL_FILE_HEADER)||(this.reader.zero=w);else if(w<0)throw new Error("Corrupted zip: missing "+Math.abs(w)+" bytes.")},prepareReader:function(m){this.reader=i(m)},load:function(m){this.prepareReader(m),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=y},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,r,n){var i=e("./reader/readerFor"),a=e("./utils"),c=e("./compressedObject"),f=e("./crc32"),u=e("./utf8"),y=e("./compressions"),m=e("./support");function v(g,w){this.options=g,this.loadOptions=w}v.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(g){var w,b;if(g.skip(22),this.fileNameLength=g.readInt(2),b=g.readInt(2),this.fileName=g.readData(this.fileNameLength),g.skip(b),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(w=function(T){for(var k in y)if(Object.prototype.hasOwnProperty.call(y,k)&&y[k].magic===T)return y[k];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new c(this.compressedSize,this.uncompressedSize,this.crc32,w,g.readData(this.compressedSize))},readCentralPart:function(g){this.versionMadeBy=g.readInt(2),g.skip(2),this.bitFlag=g.readInt(2),this.compressionMethod=g.readString(2),this.date=g.readDate(),this.crc32=g.readInt(4),this.compressedSize=g.readInt(4),this.uncompressedSize=g.readInt(4);var w=g.readInt(2);if(this.extraFieldsLength=g.readInt(2),this.fileCommentLength=g.readInt(2),this.diskNumberStart=g.readInt(2),this.internalFileAttributes=g.readInt(2),this.externalFileAttributes=g.readInt(4),this.localHeaderOffset=g.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");g.skip(w),this.readExtraFields(g),this.parseZIP64ExtraField(g),this.fileComment=g.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var g=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==g&&(this.dosPermissions=63&this.externalFileAttributes),3==g&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var g=i(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=g.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=g.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=g.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=g.readInt(4))}},readExtraFields:function(g){var w,b,T,k=g.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});g.index+4<k;)w=g.readInt(2),b=g.readInt(2),T=g.readData(b),this.extraFields[w]={id:w,length:b,value:T};g.setIndex(k)},handleUTF8:function(){var g=m.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var w=this.findExtraFieldUnicodePath();if(null!==w)this.fileNameStr=w;else{var b=a.transformTo(g,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(b)}var T=this.findExtraFieldUnicodeComment();if(null!==T)this.fileCommentStr=T;else{var k=a.transformTo(g,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(k)}}},findExtraFieldUnicodePath:function(){var g=this.extraFields[28789];if(g){var w=i(g.value);return 1!==w.readInt(1)||f(this.fileName)!==w.readInt(4)?null:u.utf8decode(w.readData(g.length-5))}return null},findExtraFieldUnicodeComment:function(){var g=this.extraFields[25461];if(g){var w=i(g.value);return 1!==w.readInt(1)||f(this.fileComment)!==w.readInt(4)?null:u.utf8decode(w.readData(g.length-5))}return null}},r.exports=v},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,r,n){function i(w,b,T){this.name=w,this.dir=T.dir,this.date=T.date,this.comment=T.comment,this.unixPermissions=T.unixPermissions,this.dosPermissions=T.dosPermissions,this._data=b,this._dataBinary=T.binary,this.options={compression:T.compression,compressionOptions:T.compressionOptions}}var a=e("./stream/StreamHelper"),c=e("./stream/DataWorker"),f=e("./utf8"),u=e("./compressedObject"),y=e("./stream/GenericWorker");i.prototype={internalStream:function(w){var b=null,T="string";try{if(!w)throw new Error("No output type specified.");var k="string"===(T=w.toLowerCase())||"text"===T;"binarystring"!==T&&"text"!==T||(T="string"),b=this._decompressWorker();var S=!this._dataBinary;S&&!k&&(b=b.pipe(new f.Utf8EncodeWorker)),!S&&k&&(b=b.pipe(new f.Utf8DecodeWorker))}catch(N){(b=new y("error")).error(N)}return new a(b,T,"")},async:function(w,b){return this.internalStream(w).accumulate(b)},nodeStream:function(w,b){return this.internalStream(w||"nodebuffer").toNodejsStream(b)},_compressWorker:function(w,b){if(this._data instanceof u&&this._data.compression.magic===w.magic)return this._data.getCompressedWorker();var T=this._decompressWorker();return this._dataBinary||(T=T.pipe(new f.Utf8EncodeWorker)),u.createWorkerFrom(T,w,b)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof y?this._data:new c(this._data)}};for(var m=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],v=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},g=0;g<m.length;g++)i.prototype[m[g]]=v;r.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,r,n){(function(i){var a,c,f=i.MutationObserver||i.WebKitMutationObserver;if(f){var u=0,y=new f(w),m=i.document.createTextNode("");y.observe(m,{characterData:!0}),a=function(){m.data=u=++u%2}}else if(i.setImmediate||void 0===i.MessageChannel)a="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var b=i.document.createElement("script");b.onreadystatechange=function(){w(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},i.document.documentElement.appendChild(b)}:function(){setTimeout(w,0)};else{var v=new i.MessageChannel;v.port1.onmessage=w,a=function(){v.port2.postMessage(0)}}var g=[];function w(){var b,T;c=!0;for(var k=g.length;k;){for(T=g,g=[],b=-1;++b<k;)T[b]();k=g.length}c=!1}r.exports=function(b){1!==g.push(b)||c||a()}}).call(this,typeof qt<"u"?qt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(e,r,n){var i=e("immediate");function a(){}var c={},f=["REJECTED"],u=["FULFILLED"],y=["PENDING"];function m(k){if("function"!=typeof k)throw new TypeError("resolver must be a function");this.state=y,this.queue=[],this.outcome=void 0,k!==a&&b(this,k)}function v(k,S,N){this.promise=k,"function"==typeof S&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),"function"==typeof N&&(this.onRejected=N,this.callRejected=this.otherCallRejected)}function g(k,S,N){i(function(){var M;try{M=S(N)}catch(A){return c.reject(k,A)}M===k?c.reject(k,new TypeError("Cannot resolve promise with itself")):c.resolve(k,M)})}function w(k){var S=k&&k.then;if(k&&("object"==typeof k||"function"==typeof k)&&"function"==typeof S)return function(){S.apply(k,arguments)}}function b(k,S){var N=!1;function M(q){N||(N=!0,c.reject(k,q))}function A(q){N||(N=!0,c.resolve(k,q))}var G=T(function(){S(A,M)});"error"===G.status&&M(G.value)}function T(k,S){var N={};try{N.value=k(S),N.status="success"}catch(M){N.status="error",N.value=M}return N}(r.exports=m).prototype.finally=function(k){if("function"!=typeof k)return this;var S=this.constructor;return this.then(function(N){return S.resolve(k()).then(function(){return N})},function(N){return S.resolve(k()).then(function(){throw N})})},m.prototype.catch=function(k){return this.then(null,k)},m.prototype.then=function(k,S){if("function"!=typeof k&&this.state===u||"function"!=typeof S&&this.state===f)return this;var N=new this.constructor(a);return this.state!==y?g(N,this.state===u?k:S,this.outcome):this.queue.push(new v(N,k,S)),N},v.prototype.callFulfilled=function(k){c.resolve(this.promise,k)},v.prototype.otherCallFulfilled=function(k){g(this.promise,this.onFulfilled,k)},v.prototype.callRejected=function(k){c.reject(this.promise,k)},v.prototype.otherCallRejected=function(k){g(this.promise,this.onRejected,k)},c.resolve=function(k,S){var N=T(w,S);if("error"===N.status)return c.reject(k,N.value);var M=N.value;if(M)b(k,M);else{k.state=u,k.outcome=S;for(var A=-1,G=k.queue.length;++A<G;)k.queue[A].callFulfilled(S)}return k},c.reject=function(k,S){k.state=f,k.outcome=S;for(var N=-1,M=k.queue.length;++N<M;)k.queue[N].callRejected(S);return k},m.resolve=function(k){return k instanceof this?k:c.resolve(new this(a),k)},m.reject=function(k){var S=new this(a);return c.reject(S,k)},m.all=function(k){var S=this;if("[object Array]"!==Object.prototype.toString.call(k))return this.reject(new TypeError("must be an array"));var N=k.length,M=!1;if(!N)return this.resolve([]);for(var A=new Array(N),G=0,q=-1,Q=new this(a);++q<N;)H(k[q],q);return Q;function H(ee,de){S.resolve(ee).then(function(I){A[de]=I,++G!==N||M||(M=!0,c.resolve(Q,A))},function(I){M||(M=!0,c.reject(Q,I))})}},m.race=function(k){if("[object Array]"!==Object.prototype.toString.call(k))return this.reject(new TypeError("must be an array"));var N=k.length,M=!1;if(!N)return this.resolve([]);for(var A=-1,G=new this(a);++A<N;)this.resolve(k[A]).then(function(Q){M||(M=!0,c.resolve(G,Q))},function(Q){M||(M=!0,c.reject(G,Q))});return G}},{immediate:36}],38:[function(e,r,n){var i={};(0,e("./lib/utils/common").assign)(i,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),r.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,r,n){var i=e("./zlib/deflate"),a=e("./utils/common"),c=e("./utils/strings"),f=e("./zlib/messages"),u=e("./zlib/zstream"),y=Object.prototype.toString,m=0,v=-1,g=0,w=8;function b(k){if(!(this instanceof b))return new b(k);this.options=a.assign({level:v,method:w,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},k||{});var S=this.options;S.raw&&0<S.windowBits?S.windowBits=-S.windowBits:S.gzip&&0<S.windowBits&&S.windowBits<16&&(S.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var N=i.deflateInit2(this.strm,S.level,S.method,S.windowBits,S.memLevel,S.strategy);if(N!==m)throw new Error(f[N]);if(S.header&&i.deflateSetHeader(this.strm,S.header),S.dictionary){var M;if(M="string"==typeof S.dictionary?c.string2buf(S.dictionary):"[object ArrayBuffer]"===y.call(S.dictionary)?new Uint8Array(S.dictionary):S.dictionary,(N=i.deflateSetDictionary(this.strm,M))!==m)throw new Error(f[N]);this._dict_set=!0}}function T(k,S){var N=new b(S);if(N.push(k,!0),N.err)throw N.msg||f[N.err];return N.result}b.prototype.push=function(k,S){var N,M,A=this.strm,G=this.options.chunkSize;if(this.ended)return!1;M=S===~~S?S:!0===S?4:0,A.input="string"==typeof k?c.string2buf(k):"[object ArrayBuffer]"===y.call(k)?new Uint8Array(k):k,A.next_in=0,A.avail_in=A.input.length;do{if(0===A.avail_out&&(A.output=new a.Buf8(G),A.next_out=0,A.avail_out=G),1!==(N=i.deflate(A,M))&&N!==m)return this.onEnd(N),!(this.ended=!0);0!==A.avail_out&&(0!==A.avail_in||4!==M&&2!==M)||this.onData("string"===this.options.to?c.buf2binstring(a.shrinkBuf(A.output,A.next_out)):a.shrinkBuf(A.output,A.next_out))}while((0<A.avail_in||0===A.avail_out)&&1!==N);return 4===M?(N=i.deflateEnd(this.strm),this.onEnd(N),this.ended=!0,N===m):2!==M||(this.onEnd(m),!(A.avail_out=0))},b.prototype.onData=function(k){this.chunks.push(k)},b.prototype.onEnd=function(k){k===m&&(this.result="string"===this.options.to?this.chunks.join(""):a.flattenChunks(this.chunks)),this.chunks=[],this.err=k,this.msg=this.strm.msg},n.Deflate=b,n.deflate=T,n.deflateRaw=function(k,S){return(S=S||{}).raw=!0,T(k,S)},n.gzip=function(k,S){return(S=S||{}).gzip=!0,T(k,S)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,r,n){var i=e("./zlib/inflate"),a=e("./utils/common"),c=e("./utils/strings"),f=e("./zlib/constants"),u=e("./zlib/messages"),y=e("./zlib/zstream"),m=e("./zlib/gzheader"),v=Object.prototype.toString;function g(b){if(!(this instanceof g))return new g(b);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},b||{});var T=this.options;T.raw&&0<=T.windowBits&&T.windowBits<16&&(T.windowBits=-T.windowBits,0===T.windowBits&&(T.windowBits=-15)),!(0<=T.windowBits&&T.windowBits<16)||b&&b.windowBits||(T.windowBits+=32),15<T.windowBits&&T.windowBits<48&&!(15&T.windowBits)&&(T.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new y,this.strm.avail_out=0;var k=i.inflateInit2(this.strm,T.windowBits);if(k!==f.Z_OK)throw new Error(u[k]);this.header=new m,i.inflateGetHeader(this.strm,this.header)}function w(b,T){var k=new g(T);if(k.push(b,!0),k.err)throw k.msg||u[k.err];return k.result}g.prototype.push=function(b,T){var k,S,N,M,A,G,q=this.strm,Q=this.options.chunkSize,H=this.options.dictionary,ee=!1;if(this.ended)return!1;S=T===~~T?T:!0===T?f.Z_FINISH:f.Z_NO_FLUSH,q.input="string"==typeof b?c.binstring2buf(b):"[object ArrayBuffer]"===v.call(b)?new Uint8Array(b):b,q.next_in=0,q.avail_in=q.input.length;do{if(0===q.avail_out&&(q.output=new a.Buf8(Q),q.next_out=0,q.avail_out=Q),(k=i.inflate(q,f.Z_NO_FLUSH))===f.Z_NEED_DICT&&H&&(G="string"==typeof H?c.string2buf(H):"[object ArrayBuffer]"===v.call(H)?new Uint8Array(H):H,k=i.inflateSetDictionary(this.strm,G)),k===f.Z_BUF_ERROR&&!0===ee&&(k=f.Z_OK,ee=!1),k!==f.Z_STREAM_END&&k!==f.Z_OK)return this.onEnd(k),!(this.ended=!0);q.next_out&&(0!==q.avail_out&&k!==f.Z_STREAM_END&&(0!==q.avail_in||S!==f.Z_FINISH&&S!==f.Z_SYNC_FLUSH)||("string"===this.options.to?(N=c.utf8border(q.output,q.next_out),M=q.next_out-N,A=c.buf2string(q.output,N),q.next_out=M,q.avail_out=Q-M,M&&a.arraySet(q.output,q.output,N,M,0),this.onData(A)):this.onData(a.shrinkBuf(q.output,q.next_out)))),0===q.avail_in&&0===q.avail_out&&(ee=!0)}while((0<q.avail_in||0===q.avail_out)&&k!==f.Z_STREAM_END);return k===f.Z_STREAM_END&&(S=f.Z_FINISH),S===f.Z_FINISH?(k=i.inflateEnd(this.strm),this.onEnd(k),this.ended=!0,k===f.Z_OK):S!==f.Z_SYNC_FLUSH||(this.onEnd(f.Z_OK),!(q.avail_out=0))},g.prototype.onData=function(b){this.chunks.push(b)},g.prototype.onEnd=function(b){b===f.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):a.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},n.Inflate=g,n.inflate=w,n.inflateRaw=function(b,T){return(T=T||{}).raw=!0,w(b,T)},n.ungzip=w},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,r,n){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";n.assign=function(f){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var y=u.shift();if(y){if("object"!=typeof y)throw new TypeError(y+"must be non-object");for(var m in y)y.hasOwnProperty(m)&&(f[m]=y[m])}}return f},n.shrinkBuf=function(f,u){return f.length===u?f:f.subarray?f.subarray(0,u):(f.length=u,f)};var a={arraySet:function(f,u,y,m,v){if(u.subarray&&f.subarray)f.set(u.subarray(y,y+m),v);else for(var g=0;g<m;g++)f[v+g]=u[y+g]},flattenChunks:function(f){var u,y,m,v,g,w;for(u=m=0,y=f.length;u<y;u++)m+=f[u].length;for(w=new Uint8Array(m),u=v=0,y=f.length;u<y;u++)w.set(g=f[u],v),v+=g.length;return w}},c={arraySet:function(f,u,y,m,v){for(var g=0;g<m;g++)f[v+g]=u[y+g]},flattenChunks:function(f){return[].concat.apply([],f)}};n.setTyped=function(f){f?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,a)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,c))},n.setTyped(i)},{}],42:[function(e,r,n){var i=e("./common"),a=!0,c=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{c=!1}for(var f=new i.Buf8(256),u=0;u<256;u++)f[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function y(m,v){if(v<65537&&(m.subarray&&c||!m.subarray&&a))return String.fromCharCode.apply(null,i.shrinkBuf(m,v));for(var g="",w=0;w<v;w++)g+=String.fromCharCode(m[w]);return g}f[254]=f[254]=1,n.string2buf=function(m){var v,g,w,b,T,k=m.length,S=0;for(b=0;b<k;b++)55296==(64512&(g=m.charCodeAt(b)))&&b+1<k&&56320==(64512&(w=m.charCodeAt(b+1)))&&(g=65536+(g-55296<<10)+(w-56320),b++),S+=g<128?1:g<2048?2:g<65536?3:4;for(v=new i.Buf8(S),b=T=0;T<S;b++)55296==(64512&(g=m.charCodeAt(b)))&&b+1<k&&56320==(64512&(w=m.charCodeAt(b+1)))&&(g=65536+(g-55296<<10)+(w-56320),b++),g<128?v[T++]=g:(g<2048?v[T++]=192|g>>>6:(g<65536?v[T++]=224|g>>>12:(v[T++]=240|g>>>18,v[T++]=128|g>>>12&63),v[T++]=128|g>>>6&63),v[T++]=128|63&g);return v},n.buf2binstring=function(m){return y(m,m.length)},n.binstring2buf=function(m){for(var v=new i.Buf8(m.length),g=0,w=v.length;g<w;g++)v[g]=m.charCodeAt(g);return v},n.buf2string=function(m,v){var g,w,b,T,k=v||m.length,S=new Array(2*k);for(g=w=0;g<k;)if((b=m[g++])<128)S[w++]=b;else if(4<(T=f[b]))S[w++]=65533,g+=T-1;else{for(b&=2===T?31:3===T?15:7;1<T&&g<k;)b=b<<6|63&m[g++],T--;1<T?S[w++]=65533:b<65536?S[w++]=b:(S[w++]=55296|(b-=65536)>>10&1023,S[w++]=56320|1023&b)}return y(S,w)},n.utf8border=function(m,v){var g;for((v=v||m.length)>m.length&&(v=m.length),g=v-1;0<=g&&128==(192&m[g]);)g--;return g<0||0===g?v:g+f[m[g]]>v?g:v}},{"./common":41}],43:[function(e,r,n){r.exports=function(i,a,c,f){for(var u=65535&i|0,y=i>>>16&65535|0,m=0;0!==c;){for(c-=m=2e3<c?2e3:c;y=y+(u=u+a[f++]|0)|0,--m;);u%=65521,y%=65521}return u|y<<16|0}},{}],44:[function(e,r,n){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,r,n){var i=function(){for(var a,c=[],f=0;f<256;f++){a=f;for(var u=0;u<8;u++)a=1&a?3988292384^a>>>1:a>>>1;c[f]=a}return c}();r.exports=function(a,c,f,u){var y=i,m=u+f;a^=-1;for(var v=u;v<m;v++)a=a>>>8^y[255&(a^c[v])];return-1^a}},{}],46:[function(e,r,n){var i,a=e("../utils/common"),c=e("./trees"),f=e("./adler32"),u=e("./crc32"),y=e("./messages"),m=0,g=0,w=-2,k=2,S=8,M=286,A=30,G=19,q=2*M+1,Q=15,H=3,ee=258,de=ee+H+1,I=42,L=113;function Ie(d,Y){return d.msg=y[Y],Y}function fe(d){return(d<<1)-(4<d?9:0)}function Se(d){for(var Y=d.length;0<=--Y;)d[Y]=0}function W(d){var Y=d.state,V=Y.pending;V>d.avail_out&&(V=d.avail_out),0!==V&&(a.arraySet(d.output,Y.pending_buf,Y.pending_out,V,d.next_out),d.next_out+=V,Y.pending_out+=V,d.total_out+=V,d.avail_out-=V,Y.pending-=V,0===Y.pending&&(Y.pending_out=0))}function U(d,Y){c._tr_flush_block(d,0<=d.block_start?d.block_start:-1,d.strstart-d.block_start,Y),d.block_start=d.strstart,W(d.strm)}function Ee(d,Y){d.pending_buf[d.pending++]=Y}function ve(d,Y){d.pending_buf[d.pending++]=Y>>>8&255,d.pending_buf[d.pending++]=255&Y}function ge(d,Y){var V,D,P=d.max_chain_length,C=d.strstart,ne=d.prev_length,se=d.nice_match,z=d.strstart>d.w_size-de?d.strstart-(d.w_size-de):0,he=d.window,be=d.w_mask,me=d.prev,ke=d.strstart+ee,Le=he[C+ne-1],Re=he[C+ne];d.prev_length>=d.good_match&&(P>>=2),se>d.lookahead&&(se=d.lookahead);do{if(he[(V=Y)+ne]===Re&&he[V+ne-1]===Le&&he[V]===he[C]&&he[++V]===he[C+1]){C+=2,V++;do{}while(he[++C]===he[++V]&&he[++C]===he[++V]&&he[++C]===he[++V]&&he[++C]===he[++V]&&he[++C]===he[++V]&&he[++C]===he[++V]&&he[++C]===he[++V]&&he[++C]===he[++V]&&C<ke);if(D=ee-(ke-C),C=ke-ee,ne<D){if(d.match_start=Y,se<=(ne=D))break;Le=he[C+ne-1],Re=he[C+ne]}}}while((Y=me[Y&be])>z&&0!=--P);return ne<=d.lookahead?ne:d.lookahead}function Ze(d){var Y,V,D,P,C,ne,se,z,he,be,me=d.w_size;do{if(P=d.window_size-d.lookahead-d.strstart,d.strstart>=me+(me-de)){for(a.arraySet(d.window,d.window,me,me,0),d.match_start-=me,d.strstart-=me,d.block_start-=me,Y=V=d.hash_size;D=d.head[--Y],d.head[Y]=me<=D?D-me:0,--V;);for(Y=V=me;D=d.prev[--Y],d.prev[Y]=me<=D?D-me:0,--V;);P+=me}if(0===d.strm.avail_in)break;if(se=d.window,z=d.strstart+d.lookahead,be=void 0,(he=P)<(be=(ne=d.strm).avail_in)&&(be=he),V=0===be?0:(ne.avail_in-=be,a.arraySet(se,ne.input,ne.next_in,be,z),1===ne.state.wrap?ne.adler=f(ne.adler,se,be,z):2===ne.state.wrap&&(ne.adler=u(ne.adler,se,be,z)),ne.next_in+=be,ne.total_in+=be,be),d.lookahead+=V,d.lookahead+d.insert>=H)for(d.ins_h=d.window[C=d.strstart-d.insert],d.ins_h=(d.ins_h<<d.hash_shift^d.window[C+1])&d.hash_mask;d.insert&&(d.ins_h=(d.ins_h<<d.hash_shift^d.window[C+H-1])&d.hash_mask,d.prev[C&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=C,C++,d.insert--,!(d.lookahead+d.insert<H)););}while(d.lookahead<de&&0!==d.strm.avail_in)}function He(d,Y){for(var V,D;;){if(d.lookahead<de){if(Ze(d),d.lookahead<de&&Y===m)return 1;if(0===d.lookahead)break}if(V=0,d.lookahead>=H&&(d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+H-1])&d.hash_mask,V=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart),0!==V&&d.strstart-V<=d.w_size-de&&(d.match_length=ge(d,V)),d.match_length>=H)if(D=c._tr_tally(d,d.strstart-d.match_start,d.match_length-H),d.lookahead-=d.match_length,d.match_length<=d.max_lazy_match&&d.lookahead>=H){for(d.match_length--;d.strstart++,d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+H-1])&d.hash_mask,V=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart,0!=--d.match_length;);d.strstart++}else d.strstart+=d.match_length,d.match_length=0,d.ins_h=d.window[d.strstart],d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+1])&d.hash_mask;else D=c._tr_tally(d,0,d.window[d.strstart]),d.lookahead--,d.strstart++;if(D&&(U(d,!1),0===d.strm.avail_out))return 1}return d.insert=d.strstart<H-1?d.strstart:H-1,4===Y?(U(d,!0),0===d.strm.avail_out?3:4):d.last_lit&&(U(d,!1),0===d.strm.avail_out)?1:2}function Ce(d,Y){for(var V,D,P;;){if(d.lookahead<de){if(Ze(d),d.lookahead<de&&Y===m)return 1;if(0===d.lookahead)break}if(V=0,d.lookahead>=H&&(d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+H-1])&d.hash_mask,V=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart),d.prev_length=d.match_length,d.prev_match=d.match_start,d.match_length=H-1,0!==V&&d.prev_length<d.max_lazy_match&&d.strstart-V<=d.w_size-de&&(d.match_length=ge(d,V),d.match_length<=5&&(1===d.strategy||d.match_length===H&&4096<d.strstart-d.match_start)&&(d.match_length=H-1)),d.prev_length>=H&&d.match_length<=d.prev_length){for(P=d.strstart+d.lookahead-H,D=c._tr_tally(d,d.strstart-1-d.prev_match,d.prev_length-H),d.lookahead-=d.prev_length-1,d.prev_length-=2;++d.strstart<=P&&(d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+H-1])&d.hash_mask,V=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart),0!=--d.prev_length;);if(d.match_available=0,d.match_length=H-1,d.strstart++,D&&(U(d,!1),0===d.strm.avail_out))return 1}else if(d.match_available){if((D=c._tr_tally(d,0,d.window[d.strstart-1]))&&U(d,!1),d.strstart++,d.lookahead--,0===d.strm.avail_out)return 1}else d.match_available=1,d.strstart++,d.lookahead--}return d.match_available&&(D=c._tr_tally(d,0,d.window[d.strstart-1]),d.match_available=0),d.insert=d.strstart<H-1?d.strstart:H-1,4===Y?(U(d,!0),0===d.strm.avail_out?3:4):d.last_lit&&(U(d,!1),0===d.strm.avail_out)?1:2}function $e(d,Y,V,D,P){this.good_length=d,this.max_lazy=Y,this.nice_length=V,this.max_chain=D,this.func=P}function Je(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=S,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*q),this.dyn_dtree=new a.Buf16(2*(2*A+1)),this.bl_tree=new a.Buf16(2*(2*G+1)),Se(this.dyn_ltree),Se(this.dyn_dtree),Se(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(Q+1),this.heap=new a.Buf16(2*M+1),Se(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*M+1),Se(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Ge(d){var Y;return d&&d.state?(d.total_in=d.total_out=0,d.data_type=k,(Y=d.state).pending=0,Y.pending_out=0,Y.wrap<0&&(Y.wrap=-Y.wrap),Y.status=Y.wrap?I:L,d.adler=2===Y.wrap?0:1,Y.last_flush=m,c._tr_init(Y),g):Ie(d,w)}function ht(d){var V,Y=Ge(d);return Y===g&&((V=d.state).window_size=2*V.w_size,Se(V.head),V.max_lazy_match=i[V.level].max_lazy,V.good_match=i[V.level].good_length,V.nice_match=i[V.level].nice_length,V.max_chain_length=i[V.level].max_chain,V.strstart=0,V.block_start=0,V.lookahead=0,V.insert=0,V.match_length=V.prev_length=H-1,V.match_available=0,V.ins_h=0),Y}function we(d,Y,V,D,P,C){if(!d)return w;var ne=1;if(-1===Y&&(Y=6),D<0?(ne=0,D=-D):15<D&&(ne=2,D-=16),P<1||9<P||V!==S||D<8||15<D||Y<0||9<Y||C<0||4<C)return Ie(d,w);8===D&&(D=9);var se=new Je;return(d.state=se).strm=d,se.wrap=ne,se.gzhead=null,se.w_bits=D,se.w_size=1<<se.w_bits,se.w_mask=se.w_size-1,se.hash_bits=P+7,se.hash_size=1<<se.hash_bits,se.hash_mask=se.hash_size-1,se.hash_shift=~~((se.hash_bits+H-1)/H),se.window=new a.Buf8(2*se.w_size),se.head=new a.Buf16(se.hash_size),se.prev=new a.Buf16(se.w_size),se.lit_bufsize=1<<P+6,se.pending_buf_size=4*se.lit_bufsize,se.pending_buf=new a.Buf8(se.pending_buf_size),se.d_buf=1*se.lit_bufsize,se.l_buf=3*se.lit_bufsize,se.level=Y,se.strategy=C,se.method=V,ht(d)}i=[new $e(0,0,0,0,function(d,Y){var V=65535;for(V>d.pending_buf_size-5&&(V=d.pending_buf_size-5);;){if(d.lookahead<=1){if(Ze(d),0===d.lookahead&&Y===m)return 1;if(0===d.lookahead)break}d.strstart+=d.lookahead,d.lookahead=0;var D=d.block_start+V;if((0===d.strstart||d.strstart>=D)&&(d.lookahead=d.strstart-D,d.strstart=D,U(d,!1),0===d.strm.avail_out)||d.strstart-d.block_start>=d.w_size-de&&(U(d,!1),0===d.strm.avail_out))return 1}return d.insert=0,4===Y?(U(d,!0),0===d.strm.avail_out?3:4):(d.strstart>d.block_start&&U(d,!1),1)}),new $e(4,4,8,4,He),new $e(4,5,16,8,He),new $e(4,6,32,32,He),new $e(4,4,16,16,Ce),new $e(8,16,32,32,Ce),new $e(8,16,128,128,Ce),new $e(8,32,128,256,Ce),new $e(32,128,258,1024,Ce),new $e(32,258,258,4096,Ce)],n.deflateInit=function(d,Y){return we(d,Y,S,15,8,0)},n.deflateInit2=we,n.deflateReset=ht,n.deflateResetKeep=Ge,n.deflateSetHeader=function(d,Y){return d&&d.state?2!==d.state.wrap?w:(d.state.gzhead=Y,g):w},n.deflate=function(d,Y){var V,D,P,C;if(!d||!d.state||5<Y||Y<0)return d?Ie(d,w):w;if(D=d.state,!d.output||!d.input&&0!==d.avail_in||666===D.status&&4!==Y)return Ie(d,0===d.avail_out?-5:w);if(D.strm=d,V=D.last_flush,D.last_flush=Y,D.status===I)if(2===D.wrap)d.adler=0,Ee(D,31),Ee(D,139),Ee(D,8),D.gzhead?(Ee(D,(D.gzhead.text?1:0)+(D.gzhead.hcrc?2:0)+(D.gzhead.extra?4:0)+(D.gzhead.name?8:0)+(D.gzhead.comment?16:0)),Ee(D,255&D.gzhead.time),Ee(D,D.gzhead.time>>8&255),Ee(D,D.gzhead.time>>16&255),Ee(D,D.gzhead.time>>24&255),Ee(D,9===D.level?2:2<=D.strategy||D.level<2?4:0),Ee(D,255&D.gzhead.os),D.gzhead.extra&&D.gzhead.extra.length&&(Ee(D,255&D.gzhead.extra.length),Ee(D,D.gzhead.extra.length>>8&255)),D.gzhead.hcrc&&(d.adler=u(d.adler,D.pending_buf,D.pending,0)),D.gzindex=0,D.status=69):(Ee(D,0),Ee(D,0),Ee(D,0),Ee(D,0),Ee(D,0),Ee(D,9===D.level?2:2<=D.strategy||D.level<2?4:0),Ee(D,3),D.status=L);else{var ne=S+(D.w_bits-8<<4)<<8;ne|=(2<=D.strategy||D.level<2?0:D.level<6?1:6===D.level?2:3)<<6,0!==D.strstart&&(ne|=32),ne+=31-ne%31,D.status=L,ve(D,ne),0!==D.strstart&&(ve(D,d.adler>>>16),ve(D,65535&d.adler)),d.adler=1}if(69===D.status)if(D.gzhead.extra){for(P=D.pending;D.gzindex<(65535&D.gzhead.extra.length)&&(D.pending!==D.pending_buf_size||(D.gzhead.hcrc&&D.pending>P&&(d.adler=u(d.adler,D.pending_buf,D.pending-P,P)),W(d),P=D.pending,D.pending!==D.pending_buf_size));)Ee(D,255&D.gzhead.extra[D.gzindex]),D.gzindex++;D.gzhead.hcrc&&D.pending>P&&(d.adler=u(d.adler,D.pending_buf,D.pending-P,P)),D.gzindex===D.gzhead.extra.length&&(D.gzindex=0,D.status=73)}else D.status=73;if(73===D.status)if(D.gzhead.name){P=D.pending;do{if(D.pending===D.pending_buf_size&&(D.gzhead.hcrc&&D.pending>P&&(d.adler=u(d.adler,D.pending_buf,D.pending-P,P)),W(d),P=D.pending,D.pending===D.pending_buf_size)){C=1;break}C=D.gzindex<D.gzhead.name.length?255&D.gzhead.name.charCodeAt(D.gzindex++):0,Ee(D,C)}while(0!==C);D.gzhead.hcrc&&D.pending>P&&(d.adler=u(d.adler,D.pending_buf,D.pending-P,P)),0===C&&(D.gzindex=0,D.status=91)}else D.status=91;if(91===D.status)if(D.gzhead.comment){P=D.pending;do{if(D.pending===D.pending_buf_size&&(D.gzhead.hcrc&&D.pending>P&&(d.adler=u(d.adler,D.pending_buf,D.pending-P,P)),W(d),P=D.pending,D.pending===D.pending_buf_size)){C=1;break}C=D.gzindex<D.gzhead.comment.length?255&D.gzhead.comment.charCodeAt(D.gzindex++):0,Ee(D,C)}while(0!==C);D.gzhead.hcrc&&D.pending>P&&(d.adler=u(d.adler,D.pending_buf,D.pending-P,P)),0===C&&(D.status=103)}else D.status=103;if(103===D.status&&(D.gzhead.hcrc?(D.pending+2>D.pending_buf_size&&W(d),D.pending+2<=D.pending_buf_size&&(Ee(D,255&d.adler),Ee(D,d.adler>>8&255),d.adler=0,D.status=L)):D.status=L),0!==D.pending){if(W(d),0===d.avail_out)return D.last_flush=-1,g}else if(0===d.avail_in&&fe(Y)<=fe(V)&&4!==Y)return Ie(d,-5);if(666===D.status&&0!==d.avail_in)return Ie(d,-5);if(0!==d.avail_in||0!==D.lookahead||Y!==m&&666!==D.status){var se=2===D.strategy?function(z,he){for(var be;;){if(0===z.lookahead&&(Ze(z),0===z.lookahead)){if(he===m)return 1;break}if(z.match_length=0,be=c._tr_tally(z,0,z.window[z.strstart]),z.lookahead--,z.strstart++,be&&(U(z,!1),0===z.strm.avail_out))return 1}return z.insert=0,4===he?(U(z,!0),0===z.strm.avail_out?3:4):z.last_lit&&(U(z,!1),0===z.strm.avail_out)?1:2}(D,Y):3===D.strategy?function(z,he){for(var be,me,ke,Le,Re=z.window;;){if(z.lookahead<=ee){if(Ze(z),z.lookahead<=ee&&he===m)return 1;if(0===z.lookahead)break}if(z.match_length=0,z.lookahead>=H&&0<z.strstart&&(me=Re[ke=z.strstart-1])===Re[++ke]&&me===Re[++ke]&&me===Re[++ke]){Le=z.strstart+ee;do{}while(me===Re[++ke]&&me===Re[++ke]&&me===Re[++ke]&&me===Re[++ke]&&me===Re[++ke]&&me===Re[++ke]&&me===Re[++ke]&&me===Re[++ke]&&ke<Le);z.match_length=ee-(Le-ke),z.match_length>z.lookahead&&(z.match_length=z.lookahead)}if(z.match_length>=H?(be=c._tr_tally(z,1,z.match_length-H),z.lookahead-=z.match_length,z.strstart+=z.match_length,z.match_length=0):(be=c._tr_tally(z,0,z.window[z.strstart]),z.lookahead--,z.strstart++),be&&(U(z,!1),0===z.strm.avail_out))return 1}return z.insert=0,4===he?(U(z,!0),0===z.strm.avail_out?3:4):z.last_lit&&(U(z,!1),0===z.strm.avail_out)?1:2}(D,Y):i[D.level].func(D,Y);if(3!==se&&4!==se||(D.status=666),1===se||3===se)return 0===d.avail_out&&(D.last_flush=-1),g;if(2===se&&(1===Y?c._tr_align(D):5!==Y&&(c._tr_stored_block(D,0,0,!1),3===Y&&(Se(D.head),0===D.lookahead&&(D.strstart=0,D.block_start=0,D.insert=0))),W(d),0===d.avail_out))return D.last_flush=-1,g}return 4!==Y?g:D.wrap<=0?1:(2===D.wrap?(Ee(D,255&d.adler),Ee(D,d.adler>>8&255),Ee(D,d.adler>>16&255),Ee(D,d.adler>>24&255),Ee(D,255&d.total_in),Ee(D,d.total_in>>8&255),Ee(D,d.total_in>>16&255),Ee(D,d.total_in>>24&255)):(ve(D,d.adler>>>16),ve(D,65535&d.adler)),W(d),0<D.wrap&&(D.wrap=-D.wrap),0!==D.pending?g:1)},n.deflateEnd=function(d){var Y;return d&&d.state?(Y=d.state.status)!==I&&69!==Y&&73!==Y&&91!==Y&&103!==Y&&Y!==L&&666!==Y?Ie(d,w):(d.state=null,Y===L?Ie(d,-3):g):w},n.deflateSetDictionary=function(d,Y){var V,D,P,C,ne,se,z,he,be=Y.length;if(!d||!d.state||2===(C=(V=d.state).wrap)||1===C&&V.status!==I||V.lookahead)return w;for(1===C&&(d.adler=f(d.adler,Y,be,0)),V.wrap=0,be>=V.w_size&&(0===C&&(Se(V.head),V.strstart=0,V.block_start=0,V.insert=0),he=new a.Buf8(V.w_size),a.arraySet(he,Y,be-V.w_size,V.w_size,0),Y=he,be=V.w_size),ne=d.avail_in,se=d.next_in,z=d.input,d.avail_in=be,d.next_in=0,d.input=Y,Ze(V);V.lookahead>=H;){for(D=V.strstart,P=V.lookahead-(H-1);V.ins_h=(V.ins_h<<V.hash_shift^V.window[D+H-1])&V.hash_mask,V.prev[D&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=D,D++,--P;);V.strstart=D,V.lookahead=H-1,Ze(V)}return V.strstart+=V.lookahead,V.block_start=V.strstart,V.insert=V.lookahead,V.lookahead=0,V.match_length=V.prev_length=H-1,V.match_available=0,d.next_in=se,d.input=z,d.avail_in=ne,V.wrap=C,g},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,r,n){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,r,n){r.exports=function(i,a){var c,f,u,y,m,v,g,w,b,T,k,S,N,M,A,G,q,Q,H,ee,de,I,L,p,J;p=i.input,u=(f=i.next_in)+(i.avail_in-5),J=i.output,m=(y=i.next_out)-(a-i.avail_out),v=y+(i.avail_out-257),g=(c=i.state).dmax,w=c.wsize,b=c.whave,T=c.wnext,k=c.window,S=c.hold,N=c.bits,M=c.lencode,A=c.distcode,G=(1<<c.lenbits)-1,q=(1<<c.distbits)-1;e:do{N<15&&(S+=p[f++]<<N,S+=p[f++]<<(N+=8),N+=8),Q=M[S&G];t:for(;;){if(S>>>=H=Q>>>24,N-=H,0==(H=Q>>>16&255))J[y++]=65535&Q;else{if(!(16&H)){if(!(64&H)){Q=M[(65535&Q)+(S&(1<<H)-1)];continue t}if(32&H){c.mode=12;break e}i.msg="invalid literal/length code",c.mode=30;break e}ee=65535&Q,(H&=15)&&(N<H&&(S+=p[f++]<<N,N+=8),ee+=S&(1<<H)-1,S>>>=H,N-=H),N<15&&(S+=p[f++]<<N,S+=p[f++]<<(N+=8),N+=8),Q=A[S&q];r:for(;;){if(S>>>=H=Q>>>24,N-=H,!(16&(H=Q>>>16&255))){if(!(64&H)){Q=A[(65535&Q)+(S&(1<<H)-1)];continue r}i.msg="invalid distance code",c.mode=30;break e}if(de=65535&Q,N<(H&=15)&&(S+=p[f++]<<N,(N+=8)<H&&(S+=p[f++]<<N,N+=8)),g<(de+=S&(1<<H)-1)){i.msg="invalid distance too far back",c.mode=30;break e}if(S>>>=H,N-=H,(H=y-m)<de){if(b<(H=de-H)&&c.sane){i.msg="invalid distance too far back",c.mode=30;break e}if(L=k,(I=0)===T){if(I+=w-H,H<ee){for(ee-=H;J[y++]=k[I++],--H;);I=y-de,L=J}}else if(T<H){if(I+=w+T-H,(H-=T)<ee){for(ee-=H;J[y++]=k[I++],--H;);if(I=0,T<ee){for(ee-=H=T;J[y++]=k[I++],--H;);I=y-de,L=J}}}else if(I+=T-H,H<ee){for(ee-=H;J[y++]=k[I++],--H;);I=y-de,L=J}for(;2<ee;)J[y++]=L[I++],J[y++]=L[I++],J[y++]=L[I++],ee-=3;ee&&(J[y++]=L[I++],1<ee&&(J[y++]=L[I++]))}else{for(I=y-de;J[y++]=J[I++],J[y++]=J[I++],J[y++]=J[I++],2<(ee-=3););ee&&(J[y++]=J[I++],1<ee&&(J[y++]=J[I++]))}break}}break}}while(f<u&&y<v);f-=ee=N>>3,S&=(1<<(N-=ee<<3))-1,i.next_in=f,i.next_out=y,i.avail_in=f<u?u-f+5:5-(f-u),i.avail_out=y<v?v-y+257:257-(y-v),c.hold=S,c.bits=N}},{}],49:[function(e,r,n){var i=e("../utils/common"),a=e("./adler32"),c=e("./crc32"),f=e("./inffast"),u=e("./inftrees"),v=0,g=-2,w=1,b=852,T=592;function k(I){return(I>>>24&255)+(I>>>8&65280)+((65280&I)<<8)+((255&I)<<24)}function S(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function N(I){var L;return I&&I.state?(I.total_in=I.total_out=(L=I.state).total=0,I.msg="",L.wrap&&(I.adler=1&L.wrap),L.mode=w,L.last=0,L.havedict=0,L.dmax=32768,L.head=null,L.hold=0,L.bits=0,L.lencode=L.lendyn=new i.Buf32(b),L.distcode=L.distdyn=new i.Buf32(T),L.sane=1,L.back=-1,v):g}function M(I){var L;return I&&I.state?((L=I.state).wsize=0,L.whave=0,L.wnext=0,N(I)):g}function A(I,L){var p,J;return I&&I.state?(J=I.state,L<0?(p=0,L=-L):(p=1+(L>>4),L<48&&(L&=15)),L&&(L<8||15<L)?g:(null!==J.window&&J.wbits!==L&&(J.window=null),J.wrap=p,J.wbits=L,M(I))):g}function G(I,L){var p,J;return I?(J=new S,(I.state=J).window=null,(p=A(I,L))!==v&&(I.state=null),p):g}var q,Q,H=!0;function ee(I){if(H){var L;for(q=new i.Buf32(512),Q=new i.Buf32(32),L=0;L<144;)I.lens[L++]=8;for(;L<256;)I.lens[L++]=9;for(;L<280;)I.lens[L++]=7;for(;L<288;)I.lens[L++]=8;for(u(1,I.lens,0,288,q,0,I.work,{bits:9}),L=0;L<32;)I.lens[L++]=5;u(2,I.lens,0,32,Q,0,I.work,{bits:5}),H=!1}I.lencode=q,I.lenbits=9,I.distcode=Q,I.distbits=5}function de(I,L,p,J){var Pe,ae=I.state;return null===ae.window&&(ae.wsize=1<<ae.wbits,ae.wnext=0,ae.whave=0,ae.window=new i.Buf8(ae.wsize)),J>=ae.wsize?(i.arraySet(ae.window,L,p-ae.wsize,ae.wsize,0),ae.wnext=0,ae.whave=ae.wsize):(J<(Pe=ae.wsize-ae.wnext)&&(Pe=J),i.arraySet(ae.window,L,p-J,Pe,ae.wnext),(J-=Pe)?(i.arraySet(ae.window,L,p-J,J,0),ae.wnext=J,ae.whave=ae.wsize):(ae.wnext+=Pe,ae.wnext===ae.wsize&&(ae.wnext=0),ae.whave<ae.wsize&&(ae.whave+=Pe))),0}n.inflateReset=M,n.inflateReset2=A,n.inflateResetKeep=N,n.inflateInit=function(I){return G(I,15)},n.inflateInit2=G,n.inflate=function(I,L){var p,J,Pe,ae,Ie,fe,Se,W,U,Ee,ve,ge,Ze,He,Ce,$e,Je,Ge,ht,we,d,Y,V,D,P=0,C=new i.Buf8(4),ne=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!I||!I.state||!I.output||!I.input&&0!==I.avail_in)return g;12===(p=I.state).mode&&(p.mode=13),Ie=I.next_out,Pe=I.output,ae=I.next_in,J=I.input,W=p.hold,U=p.bits,Ee=fe=I.avail_in,ve=Se=I.avail_out,Y=v;e:for(;;)switch(p.mode){case w:if(0===p.wrap){p.mode=13;break}for(;U<16;){if(0===fe)break e;fe--,W+=J[ae++]<<U,U+=8}if(2&p.wrap&&35615===W){C[p.check=0]=255&W,C[1]=W>>>8&255,p.check=c(p.check,C,2,0),U=W=0,p.mode=2;break}if(p.flags=0,p.head&&(p.head.done=!1),!(1&p.wrap)||(((255&W)<<8)+(W>>8))%31){I.msg="incorrect header check",p.mode=30;break}if(8!=(15&W)){I.msg="unknown compression method",p.mode=30;break}if(U-=4,d=8+(15&(W>>>=4)),0===p.wbits)p.wbits=d;else if(d>p.wbits){I.msg="invalid window size",p.mode=30;break}p.dmax=1<<d,I.adler=p.check=1,p.mode=512&W?10:12,U=W=0;break;case 2:for(;U<16;){if(0===fe)break e;fe--,W+=J[ae++]<<U,U+=8}if(p.flags=W,8!=(255&p.flags)){I.msg="unknown compression method",p.mode=30;break}if(57344&p.flags){I.msg="unknown header flags set",p.mode=30;break}p.head&&(p.head.text=W>>8&1),512&p.flags&&(C[0]=255&W,C[1]=W>>>8&255,p.check=c(p.check,C,2,0)),U=W=0,p.mode=3;case 3:for(;U<32;){if(0===fe)break e;fe--,W+=J[ae++]<<U,U+=8}p.head&&(p.head.time=W),512&p.flags&&(C[0]=255&W,C[1]=W>>>8&255,C[2]=W>>>16&255,C[3]=W>>>24&255,p.check=c(p.check,C,4,0)),U=W=0,p.mode=4;case 4:for(;U<16;){if(0===fe)break e;fe--,W+=J[ae++]<<U,U+=8}p.head&&(p.head.xflags=255&W,p.head.os=W>>8),512&p.flags&&(C[0]=255&W,C[1]=W>>>8&255,p.check=c(p.check,C,2,0)),U=W=0,p.mode=5;case 5:if(1024&p.flags){for(;U<16;){if(0===fe)break e;fe--,W+=J[ae++]<<U,U+=8}p.length=W,p.head&&(p.head.extra_len=W),512&p.flags&&(C[0]=255&W,C[1]=W>>>8&255,p.check=c(p.check,C,2,0)),U=W=0}else p.head&&(p.head.extra=null);p.mode=6;case 6:if(1024&p.flags&&(fe<(ge=p.length)&&(ge=fe),ge&&(p.head&&(d=p.head.extra_len-p.length,p.head.extra||(p.head.extra=new Array(p.head.extra_len)),i.arraySet(p.head.extra,J,ae,ge,d)),512&p.flags&&(p.check=c(p.check,J,ge,ae)),fe-=ge,ae+=ge,p.length-=ge),p.length))break e;p.length=0,p.mode=7;case 7:if(2048&p.flags){if(0===fe)break e;for(ge=0;d=J[ae+ge++],p.head&&d&&p.length<65536&&(p.head.name+=String.fromCharCode(d)),d&&ge<fe;);if(512&p.flags&&(p.check=c(p.check,J,ge,ae)),fe-=ge,ae+=ge,d)break e}else p.head&&(p.head.name=null);p.length=0,p.mode=8;case 8:if(4096&p.flags){if(0===fe)break e;for(ge=0;d=J[ae+ge++],p.head&&d&&p.length<65536&&(p.head.comment+=String.fromCharCode(d)),d&&ge<fe;);if(512&p.flags&&(p.check=c(p.check,J,ge,ae)),fe-=ge,ae+=ge,d)break e}else p.head&&(p.head.comment=null);p.mode=9;case 9:if(512&p.flags){for(;U<16;){if(0===fe)break e;fe--,W+=J[ae++]<<U,U+=8}if(W!==(65535&p.check)){I.msg="header crc mismatch",p.mode=30;break}U=W=0}p.head&&(p.head.hcrc=p.flags>>9&1,p.head.done=!0),I.adler=p.check=0,p.mode=12;break;case 10:for(;U<32;){if(0===fe)break e;fe--,W+=J[ae++]<<U,U+=8}I.adler=p.check=k(W),U=W=0,p.mode=11;case 11:if(0===p.havedict)return I.next_out=Ie,I.avail_out=Se,I.next_in=ae,I.avail_in=fe,p.hold=W,p.bits=U,2;I.adler=p.check=1,p.mode=12;case 12:if(5===L||6===L)break e;case 13:if(p.last){W>>>=7&U,U-=7&U,p.mode=27;break}for(;U<3;){if(0===fe)break e;fe--,W+=J[ae++]<<U,U+=8}switch(p.last=1&W,U-=1,3&(W>>>=1)){case 0:p.mode=14;break;case 1:if(ee(p),p.mode=20,6!==L)break;W>>>=2,U-=2;break e;case 2:p.mode=17;break;case 3:I.msg="invalid block type",p.mode=30}W>>>=2,U-=2;break;case 14:for(W>>>=7&U,U-=7&U;U<32;){if(0===fe)break e;fe--,W+=J[ae++]<<U,U+=8}if((65535&W)!=(W>>>16^65535)){I.msg="invalid stored block lengths",p.mode=30;break}if(p.length=65535&W,U=W=0,p.mode=15,6===L)break e;case 15:p.mode=16;case 16:if(ge=p.length){if(fe<ge&&(ge=fe),Se<ge&&(ge=Se),0===ge)break e;i.arraySet(Pe,J,ae,ge,Ie),fe-=ge,ae+=ge,Se-=ge,Ie+=ge,p.length-=ge;break}p.mode=12;break;case 17:for(;U<14;){if(0===fe)break e;fe--,W+=J[ae++]<<U,U+=8}if(p.nlen=257+(31&W),U-=5,p.ndist=1+(31&(W>>>=5)),U-=5,p.ncode=4+(15&(W>>>=5)),W>>>=4,U-=4,286<p.nlen||30<p.ndist){I.msg="too many length or distance symbols",p.mode=30;break}p.have=0,p.mode=18;case 18:for(;p.have<p.ncode;){for(;U<3;){if(0===fe)break e;fe--,W+=J[ae++]<<U,U+=8}p.lens[ne[p.have++]]=7&W,W>>>=3,U-=3}for(;p.have<19;)p.lens[ne[p.have++]]=0;if(p.lencode=p.lendyn,p.lenbits=7,Y=u(0,p.lens,0,19,p.lencode,0,p.work,V={bits:p.lenbits}),p.lenbits=V.bits,Y){I.msg="invalid code lengths set",p.mode=30;break}p.have=0,p.mode=19;case 19:for(;p.have<p.nlen+p.ndist;){for(;$e=(P=p.lencode[W&(1<<p.lenbits)-1])>>>16&255,Je=65535&P,!((Ce=P>>>24)<=U);){if(0===fe)break e;fe--,W+=J[ae++]<<U,U+=8}if(Je<16)W>>>=Ce,U-=Ce,p.lens[p.have++]=Je;else{if(16===Je){for(D=Ce+2;U<D;){if(0===fe)break e;fe--,W+=J[ae++]<<U,U+=8}if(W>>>=Ce,U-=Ce,0===p.have){I.msg="invalid bit length repeat",p.mode=30;break}d=p.lens[p.have-1],ge=3+(3&W),W>>>=2,U-=2}else if(17===Je){for(D=Ce+3;U<D;){if(0===fe)break e;fe--,W+=J[ae++]<<U,U+=8}U-=Ce,d=0,ge=3+(7&(W>>>=Ce)),W>>>=3,U-=3}else{for(D=Ce+7;U<D;){if(0===fe)break e;fe--,W+=J[ae++]<<U,U+=8}U-=Ce,d=0,ge=11+(127&(W>>>=Ce)),W>>>=7,U-=7}if(p.have+ge>p.nlen+p.ndist){I.msg="invalid bit length repeat",p.mode=30;break}for(;ge--;)p.lens[p.have++]=d}}if(30===p.mode)break;if(0===p.lens[256]){I.msg="invalid code -- missing end-of-block",p.mode=30;break}if(p.lenbits=9,Y=u(1,p.lens,0,p.nlen,p.lencode,0,p.work,V={bits:p.lenbits}),p.lenbits=V.bits,Y){I.msg="invalid literal/lengths set",p.mode=30;break}if(p.distbits=6,p.distcode=p.distdyn,Y=u(2,p.lens,p.nlen,p.ndist,p.distcode,0,p.work,V={bits:p.distbits}),p.distbits=V.bits,Y){I.msg="invalid distances set",p.mode=30;break}if(p.mode=20,6===L)break e;case 20:p.mode=21;case 21:if(6<=fe&&258<=Se){I.next_out=Ie,I.avail_out=Se,I.next_in=ae,I.avail_in=fe,p.hold=W,p.bits=U,f(I,ve),Ie=I.next_out,Pe=I.output,Se=I.avail_out,ae=I.next_in,J=I.input,fe=I.avail_in,W=p.hold,U=p.bits,12===p.mode&&(p.back=-1);break}for(p.back=0;$e=(P=p.lencode[W&(1<<p.lenbits)-1])>>>16&255,Je=65535&P,!((Ce=P>>>24)<=U);){if(0===fe)break e;fe--,W+=J[ae++]<<U,U+=8}if($e&&!(240&$e)){for(Ge=Ce,ht=$e,we=Je;$e=(P=p.lencode[we+((W&(1<<Ge+ht)-1)>>Ge)])>>>16&255,Je=65535&P,!(Ge+(Ce=P>>>24)<=U);){if(0===fe)break e;fe--,W+=J[ae++]<<U,U+=8}W>>>=Ge,U-=Ge,p.back+=Ge}if(W>>>=Ce,U-=Ce,p.back+=Ce,p.length=Je,0===$e){p.mode=26;break}if(32&$e){p.back=-1,p.mode=12;break}if(64&$e){I.msg="invalid literal/length code",p.mode=30;break}p.extra=15&$e,p.mode=22;case 22:if(p.extra){for(D=p.extra;U<D;){if(0===fe)break e;fe--,W+=J[ae++]<<U,U+=8}p.length+=W&(1<<p.extra)-1,W>>>=p.extra,U-=p.extra,p.back+=p.extra}p.was=p.length,p.mode=23;case 23:for(;$e=(P=p.distcode[W&(1<<p.distbits)-1])>>>16&255,Je=65535&P,!((Ce=P>>>24)<=U);){if(0===fe)break e;fe--,W+=J[ae++]<<U,U+=8}if(!(240&$e)){for(Ge=Ce,ht=$e,we=Je;$e=(P=p.distcode[we+((W&(1<<Ge+ht)-1)>>Ge)])>>>16&255,Je=65535&P,!(Ge+(Ce=P>>>24)<=U);){if(0===fe)break e;fe--,W+=J[ae++]<<U,U+=8}W>>>=Ge,U-=Ge,p.back+=Ge}if(W>>>=Ce,U-=Ce,p.back+=Ce,64&$e){I.msg="invalid distance code",p.mode=30;break}p.offset=Je,p.extra=15&$e,p.mode=24;case 24:if(p.extra){for(D=p.extra;U<D;){if(0===fe)break e;fe--,W+=J[ae++]<<U,U+=8}p.offset+=W&(1<<p.extra)-1,W>>>=p.extra,U-=p.extra,p.back+=p.extra}if(p.offset>p.dmax){I.msg="invalid distance too far back",p.mode=30;break}p.mode=25;case 25:if(0===Se)break e;if(p.offset>(ge=ve-Se)){if((ge=p.offset-ge)>p.whave&&p.sane){I.msg="invalid distance too far back",p.mode=30;break}Ze=ge>p.wnext?p.wsize-(ge-=p.wnext):p.wnext-ge,ge>p.length&&(ge=p.length),He=p.window}else He=Pe,Ze=Ie-p.offset,ge=p.length;for(Se<ge&&(ge=Se),Se-=ge,p.length-=ge;Pe[Ie++]=He[Ze++],--ge;);0===p.length&&(p.mode=21);break;case 26:if(0===Se)break e;Pe[Ie++]=p.length,Se--,p.mode=21;break;case 27:if(p.wrap){for(;U<32;){if(0===fe)break e;fe--,W|=J[ae++]<<U,U+=8}if(I.total_out+=ve-=Se,p.total+=ve,ve&&(I.adler=p.check=p.flags?c(p.check,Pe,ve,Ie-ve):a(p.check,Pe,ve,Ie-ve)),ve=Se,(p.flags?W:k(W))!==p.check){I.msg="incorrect data check",p.mode=30;break}U=W=0}p.mode=28;case 28:if(p.wrap&&p.flags){for(;U<32;){if(0===fe)break e;fe--,W+=J[ae++]<<U,U+=8}if(W!==(4294967295&p.total)){I.msg="incorrect length check",p.mode=30;break}U=W=0}p.mode=29;case 29:Y=1;break e;case 30:Y=-3;break e;case 31:return-4;default:return g}return I.next_out=Ie,I.avail_out=Se,I.next_in=ae,I.avail_in=fe,p.hold=W,p.bits=U,(p.wsize||ve!==I.avail_out&&p.mode<30&&(p.mode<27||4!==L))&&de(I,I.output,I.next_out,ve-I.avail_out)?(p.mode=31,-4):(ve-=I.avail_out,I.total_in+=Ee-=I.avail_in,I.total_out+=ve,p.total+=ve,p.wrap&&ve&&(I.adler=p.check=p.flags?c(p.check,Pe,ve,I.next_out-ve):a(p.check,Pe,ve,I.next_out-ve)),I.data_type=p.bits+(p.last?64:0)+(12===p.mode?128:0)+(20===p.mode||15===p.mode?256:0),(0==Ee&&0===ve||4===L)&&Y===v&&(Y=-5),Y)},n.inflateEnd=function(I){if(!I||!I.state)return g;var L=I.state;return L.window&&(L.window=null),I.state=null,v},n.inflateGetHeader=function(I,L){var p;return I&&I.state&&2&(p=I.state).wrap?((p.head=L).done=!1,v):g},n.inflateSetDictionary=function(I,L){var p,J=L.length;return I&&I.state?0!==(p=I.state).wrap&&11!==p.mode?g:11===p.mode&&a(1,L,J,0)!==p.check?-3:de(I,L,J,J)?(p.mode=31,-4):(p.havedict=1,v):g},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,r,n){var i=e("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],c=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],f=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(y,m,v,g,w,b,T,k){var S,N,M,A,G,q,Q,H,ee,de=k.bits,I=0,L=0,p=0,J=0,Pe=0,ae=0,Ie=0,fe=0,Se=0,W=0,U=null,Ee=0,ve=new i.Buf16(16),ge=new i.Buf16(16),Ze=null,He=0;for(I=0;I<=15;I++)ve[I]=0;for(L=0;L<g;L++)ve[m[v+L]]++;for(Pe=de,J=15;1<=J&&0===ve[J];J--);if(J<Pe&&(Pe=J),0===J)return w[b++]=20971520,w[b++]=20971520,k.bits=1,0;for(p=1;p<J&&0===ve[p];p++);for(Pe<p&&(Pe=p),I=fe=1;I<=15;I++)if(fe<<=1,(fe-=ve[I])<0)return-1;if(0<fe&&(0===y||1!==J))return-1;for(ge[1]=0,I=1;I<15;I++)ge[I+1]=ge[I]+ve[I];for(L=0;L<g;L++)0!==m[v+L]&&(T[ge[m[v+L]]++]=L);if(q=0===y?(U=Ze=T,19):1===y?(U=a,Ee-=257,Ze=c,He-=257,256):(U=f,Ze=u,-1),I=p,G=b,Ie=L=W=0,M=-1,A=(Se=1<<(ae=Pe))-1,1===y&&852<Se||2===y&&592<Se)return 1;for(;;){for(Q=I-Ie,ee=T[L]<q?(H=0,T[L]):T[L]>q?(H=Ze[He+T[L]],U[Ee+T[L]]):(H=96,0),S=1<<I-Ie,p=N=1<<ae;w[G+(W>>Ie)+(N-=S)]=Q<<24|H<<16|ee|0,0!==N;);for(S=1<<I-1;W&S;)S>>=1;if(0!==S?(W&=S-1,W+=S):W=0,L++,0==--ve[I]){if(I===J)break;I=m[v+T[L]]}if(Pe<I&&(W&A)!==M){for(0===Ie&&(Ie=Pe),G+=p,fe=1<<(ae=I-Ie);ae+Ie<J&&!((fe-=ve[ae+Ie])<=0);)ae++,fe<<=1;if(Se+=1<<ae,1===y&&852<Se||2===y&&592<Se)return 1;w[M=W&A]=Pe<<24|ae<<16|G-b|0}}return 0!==W&&(w[G+W]=I-Ie<<24|64<<16|0),k.bits=Pe,0}},{"../utils/common":41}],51:[function(e,r,n){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,r,n){var i=e("../utils/common");function f(P){for(var C=P.length;0<=--C;)P[C]=0}var m=256,v=286,g=30,T=15,k=16,q=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Q=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],H=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ee=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],de=new Array(576);f(de);var I=new Array(60);f(I);var L=new Array(512);f(L);var p=new Array(256);f(p);var J=new Array(29);f(J);var Pe,ae,Ie,fe=new Array(g);function Se(P,C,ne,se,z){this.static_tree=P,this.extra_bits=C,this.extra_base=ne,this.elems=se,this.max_length=z,this.has_stree=P&&P.length}function W(P,C){this.dyn_tree=P,this.max_code=0,this.stat_desc=C}function U(P){return P<256?L[P]:L[256+(P>>>7)]}function Ee(P,C){P.pending_buf[P.pending++]=255&C,P.pending_buf[P.pending++]=C>>>8&255}function ve(P,C,ne){P.bi_valid>k-ne?(P.bi_buf|=C<<P.bi_valid&65535,Ee(P,P.bi_buf),P.bi_buf=C>>k-P.bi_valid,P.bi_valid+=ne-k):(P.bi_buf|=C<<P.bi_valid&65535,P.bi_valid+=ne)}function ge(P,C,ne){ve(P,ne[2*C],ne[2*C+1])}function Ze(P,C){for(var ne=0;ne|=1&P,P>>>=1,ne<<=1,0<--C;);return ne>>>1}function He(P,C,ne){var se,z,he=new Array(T+1),be=0;for(se=1;se<=T;se++)he[se]=be=be+ne[se-1]<<1;for(z=0;z<=C;z++){var me=P[2*z+1];0!==me&&(P[2*z]=Ze(he[me]++,me))}}function Ce(P){var C;for(C=0;C<v;C++)P.dyn_ltree[2*C]=0;for(C=0;C<g;C++)P.dyn_dtree[2*C]=0;for(C=0;C<19;C++)P.bl_tree[2*C]=0;P.dyn_ltree[512]=1,P.opt_len=P.static_len=0,P.last_lit=P.matches=0}function $e(P){8<P.bi_valid?Ee(P,P.bi_buf):0<P.bi_valid&&(P.pending_buf[P.pending++]=P.bi_buf),P.bi_buf=0,P.bi_valid=0}function Je(P,C,ne,se){var z=2*C,he=2*ne;return P[z]<P[he]||P[z]===P[he]&&se[C]<=se[ne]}function Ge(P,C,ne){for(var se=P.heap[ne],z=ne<<1;z<=P.heap_len&&(z<P.heap_len&&Je(C,P.heap[z+1],P.heap[z],P.depth)&&z++,!Je(C,se,P.heap[z],P.depth));)P.heap[ne]=P.heap[z],ne=z,z<<=1;P.heap[ne]=se}function ht(P,C,ne){var se,z,he,be,me=0;if(0!==P.last_lit)for(;se=P.pending_buf[P.d_buf+2*me]<<8|P.pending_buf[P.d_buf+2*me+1],z=P.pending_buf[P.l_buf+me],me++,0===se?ge(P,z,C):(ge(P,(he=p[z])+m+1,C),0!==(be=q[he])&&ve(P,z-=J[he],be),ge(P,he=U(--se),ne),0!==(be=Q[he])&&ve(P,se-=fe[he],be)),me<P.last_lit;);ge(P,256,C)}function we(P,C){var ne,se,z,he=C.dyn_tree,be=C.stat_desc.static_tree,me=C.stat_desc.has_stree,ke=C.stat_desc.elems,Le=-1;for(P.heap_len=0,P.heap_max=573,ne=0;ne<ke;ne++)0!==he[2*ne]?(P.heap[++P.heap_len]=Le=ne,P.depth[ne]=0):he[2*ne+1]=0;for(;P.heap_len<2;)he[2*(z=P.heap[++P.heap_len]=Le<2?++Le:0)]=1,P.depth[z]=0,P.opt_len--,me&&(P.static_len-=be[2*z+1]);for(C.max_code=Le,ne=P.heap_len>>1;1<=ne;ne--)Ge(P,he,ne);for(z=ke;ne=P.heap[1],P.heap[1]=P.heap[P.heap_len--],Ge(P,he,1),se=P.heap[1],P.heap[--P.heap_max]=ne,P.heap[--P.heap_max]=se,he[2*z]=he[2*ne]+he[2*se],P.depth[z]=(P.depth[ne]>=P.depth[se]?P.depth[ne]:P.depth[se])+1,he[2*ne+1]=he[2*se+1]=z,P.heap[1]=z++,Ge(P,he,1),2<=P.heap_len;);P.heap[--P.heap_max]=P.heap[1],function(Re,et){var ct,st,wt,Ue,Dt,tr,mt=et.dyn_tree,Ot=et.max_code,je=et.stat_desc.static_tree,cr=et.stat_desc.has_stree,dt=et.stat_desc.extra_bits,rr=et.stat_desc.extra_base,pt=et.stat_desc.max_length,Nt=0;for(Ue=0;Ue<=T;Ue++)Re.bl_count[Ue]=0;for(mt[2*Re.heap[Re.heap_max]+1]=0,ct=Re.heap_max+1;ct<573;ct++)pt<(Ue=mt[2*mt[2*(st=Re.heap[ct])+1]+1]+1)&&(Ue=pt,Nt++),mt[2*st+1]=Ue,Ot<st||(Re.bl_count[Ue]++,Dt=0,rr<=st&&(Dt=dt[st-rr]),Re.opt_len+=(tr=mt[2*st])*(Ue+Dt),cr&&(Re.static_len+=tr*(je[2*st+1]+Dt)));if(0!==Nt){do{for(Ue=pt-1;0===Re.bl_count[Ue];)Ue--;Re.bl_count[Ue]--,Re.bl_count[Ue+1]+=2,Re.bl_count[pt]--,Nt-=2}while(0<Nt);for(Ue=pt;0!==Ue;Ue--)for(st=Re.bl_count[Ue];0!==st;)Ot<(wt=Re.heap[--ct])||(mt[2*wt+1]!==Ue&&(Re.opt_len+=(Ue-mt[2*wt+1])*mt[2*wt],mt[2*wt+1]=Ue),st--)}}(P,C),He(he,Le,P.bl_count)}function d(P,C,ne){var se,z,he=-1,be=C[1],me=0,ke=7,Le=4;for(0===be&&(ke=138,Le=3),C[2*(ne+1)+1]=65535,se=0;se<=ne;se++)z=be,be=C[2*(se+1)+1],++me<ke&&z===be||(me<Le?P.bl_tree[2*z]+=me:0!==z?(z!==he&&P.bl_tree[2*z]++,P.bl_tree[32]++):me<=10?P.bl_tree[34]++:P.bl_tree[36]++,he=z,Le=(me=0)===be?(ke=138,3):z===be?(ke=6,3):(ke=7,4))}function Y(P,C,ne){var se,z,he=-1,be=C[1],me=0,ke=7,Le=4;for(0===be&&(ke=138,Le=3),se=0;se<=ne;se++)if(z=be,be=C[2*(se+1)+1],!(++me<ke&&z===be)){if(me<Le)for(;ge(P,z,P.bl_tree),0!=--me;);else 0!==z?(z!==he&&(ge(P,z,P.bl_tree),me--),ge(P,16,P.bl_tree),ve(P,me-3,2)):me<=10?(ge(P,17,P.bl_tree),ve(P,me-3,3)):(ge(P,18,P.bl_tree),ve(P,me-11,7));he=z,Le=(me=0)===be?(ke=138,3):z===be?(ke=6,3):(ke=7,4)}}f(fe);var V=!1;function D(P,C,ne,se){var z,he,be;ve(P,0+(se?1:0),3),he=C,be=ne,$e(z=P),Ee(z,be),Ee(z,~be),i.arraySet(z.pending_buf,z.window,he,be,z.pending),z.pending+=be}n._tr_init=function(P){V||(function(){var C,ne,se,z,he,be=new Array(T+1);for(z=se=0;z<28;z++)for(J[z]=se,C=0;C<1<<q[z];C++)p[se++]=z;for(p[se-1]=z,z=he=0;z<16;z++)for(fe[z]=he,C=0;C<1<<Q[z];C++)L[he++]=z;for(he>>=7;z<g;z++)for(fe[z]=he<<7,C=0;C<1<<Q[z]-7;C++)L[256+he++]=z;for(ne=0;ne<=T;ne++)be[ne]=0;for(C=0;C<=143;)de[2*C+1]=8,C++,be[8]++;for(;C<=255;)de[2*C+1]=9,C++,be[9]++;for(;C<=279;)de[2*C+1]=7,C++,be[7]++;for(;C<=287;)de[2*C+1]=8,C++,be[8]++;for(He(de,287,be),C=0;C<g;C++)I[2*C+1]=5,I[2*C]=Ze(C,5);Pe=new Se(de,q,257,v,T),ae=new Se(I,Q,0,g,T),Ie=new Se(new Array(0),H,0,19,7)}(),V=!0),P.l_desc=new W(P.dyn_ltree,Pe),P.d_desc=new W(P.dyn_dtree,ae),P.bl_desc=new W(P.bl_tree,Ie),P.bi_buf=0,P.bi_valid=0,Ce(P)},n._tr_stored_block=D,n._tr_flush_block=function(P,C,ne,se){var z,he,be=0;0<P.level?(2===P.strm.data_type&&(P.strm.data_type=function(me){var ke,Le=4093624447;for(ke=0;ke<=31;ke++,Le>>>=1)if(1&Le&&0!==me.dyn_ltree[2*ke])return 0;if(0!==me.dyn_ltree[18]||0!==me.dyn_ltree[20]||0!==me.dyn_ltree[26])return 1;for(ke=32;ke<m;ke++)if(0!==me.dyn_ltree[2*ke])return 1;return 0}(P)),we(P,P.l_desc),we(P,P.d_desc),be=function(me){var ke;for(d(me,me.dyn_ltree,me.l_desc.max_code),d(me,me.dyn_dtree,me.d_desc.max_code),we(me,me.bl_desc),ke=18;3<=ke&&0===me.bl_tree[2*ee[ke]+1];ke--);return me.opt_len+=3*(ke+1)+5+5+4,ke}(P),(he=P.static_len+3+7>>>3)<=(z=P.opt_len+3+7>>>3)&&(z=he)):z=he=ne+5,ne+4<=z&&-1!==C?D(P,C,ne,se):4===P.strategy||he===z?(ve(P,2+(se?1:0),3),ht(P,de,I)):(ve(P,4+(se?1:0),3),function(me,ke,Le,Re){var et;for(ve(me,ke-257,5),ve(me,Le-1,5),ve(me,Re-4,4),et=0;et<Re;et++)ve(me,me.bl_tree[2*ee[et]+1],3);Y(me,me.dyn_ltree,ke-1),Y(me,me.dyn_dtree,Le-1)}(P,P.l_desc.max_code+1,P.d_desc.max_code+1,be+1),ht(P,P.dyn_ltree,P.dyn_dtree)),Ce(P),se&&$e(P)},n._tr_tally=function(P,C,ne){return P.pending_buf[P.d_buf+2*P.last_lit]=C>>>8&255,P.pending_buf[P.d_buf+2*P.last_lit+1]=255&C,P.pending_buf[P.l_buf+P.last_lit]=255&ne,P.last_lit++,0===C?P.dyn_ltree[2*ne]++:(P.matches++,C--,P.dyn_ltree[2*(p[ne]+m+1)]++,P.dyn_dtree[2*U(C)]++),P.last_lit===P.lit_bufsize-1},n._tr_align=function(P){var C;ve(P,2,3),ge(P,256,de),16===(C=P).bi_valid?(Ee(C,C.bi_buf),C.bi_buf=0,C.bi_valid=0):8<=C.bi_valid&&(C.pending_buf[C.pending++]=255&C.bi_buf,C.bi_buf>>=8,C.bi_valid-=8)}},{"../utils/common":41}],53:[function(e,r,n){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,r,n){(function(i){!function(a,c){if(!a.setImmediate){var f,u,y,m,v=1,g={},w=!1,b=a.document,T=Object.getPrototypeOf&&Object.getPrototypeOf(a);T=T&&T.setTimeout?T:a,f="[object process]"==={}.toString.call(a.process)?function(M){zt.nextTick(function(){S(M)})}:function(){if(a.postMessage&&!a.importScripts){var M=!0,A=a.onmessage;return a.onmessage=function(){M=!1},a.postMessage("","*"),a.onmessage=A,M}}()?(m="setImmediate$"+Math.random()+"$",a.addEventListener?a.addEventListener("message",N,!1):a.attachEvent("onmessage",N),function(M){a.postMessage(m+M,"*")}):a.MessageChannel?((y=new MessageChannel).port1.onmessage=function(M){S(M.data)},function(M){y.port2.postMessage(M)}):b&&"onreadystatechange"in b.createElement("script")?(u=b.documentElement,function(M){var A=b.createElement("script");A.onreadystatechange=function(){S(M),A.onreadystatechange=null,u.removeChild(A),A=null},u.appendChild(A)}):function(M){setTimeout(S,0,M)},T.setImmediate=function(M){"function"!=typeof M&&(M=new Function(""+M));for(var A=new Array(arguments.length-1),G=0;G<A.length;G++)A[G]=arguments[G+1];return g[v]={callback:M,args:A},f(v),v++},T.clearImmediate=k}function k(M){delete g[M]}function S(M){if(w)setTimeout(S,0,M);else{var A=g[M];if(A){w=!0;try{!function(G){var q=G.callback,Q=G.args;switch(Q.length){case 0:q();break;case 1:q(Q[0]);break;case 2:q(Q[0],Q[1]);break;case 3:q(Q[0],Q[1],Q[2]);break;default:q.apply(c,Q)}}(A)}finally{k(M),w=!1}}}}function N(M){M.source===a&&"string"==typeof M.data&&0===M.data.indexOf(m)&&S(+M.data.slice(m.length))}}(typeof self>"u"?void 0===i?this:i:self)}).call(this,typeof qt<"u"?qt:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)}(Yn);const Or=!(typeof self>"u")&&"showOpenFilePicker"in self,ks=Or?Promise.resolve().then(function(){return As}):Promise.resolve().then(function(){return Cs});function cn(){return cn=(0,O.Z)(function*(...o){return(yield ks).default(...o)}),cn.apply(this,arguments)}Or?Promise.resolve().then(function(){return js}):Promise.resolve().then(function(){return Fs});const xs=Or?Promise.resolve().then(function(){return Os}):Promise.resolve().then(function(){return Ls});function un(){return un=(0,O.Z)(function*(...o){return(yield xs).default(...o)}),un.apply(this,arguments)}const Ss=function(){var o=(0,O.Z)(function*(t){const e=yield t.getFile();return e.handle=t,e});return function(e){return o.apply(this,arguments)}}();var Ds=function(){var o=(0,O.Z)(function*(t=[{}]){Array.isArray(t)||(t=[t]);const e=[];t.forEach((i,a)=>{e[a]={description:i.description||"Files",accept:{}},i.mimeTypes?i.mimeTypes.map(c=>{e[a].accept[c]=i.extensions||[]}):e[a].accept["*/*"]=i.extensions||[]});const r=yield window.showOpenFilePicker({id:t[0].id,startIn:t[0].startIn,types:e,multiple:t[0].multiple||!1,excludeAcceptAllOption:t[0].excludeAcceptAllOption||!1}),n=yield Promise.all(r.map(Ss));return t[0].multiple?n:n[0]});return function(){return o.apply(this,arguments)}}(),As={__proto__:null,default:Ds};function Nr(o){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var r=e.done;return Promise.resolve(e.value).then(function(n){return{value:n,done:r}})}return Nr=function(e){this.s=e,this.n=e.next},Nr.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var r=this.s.return;return void 0===r?Promise.resolve({value:e,done:!0}):t(r.apply(this.s,arguments))},throw:function(e){var r=this.s.return;return void 0===r?Promise.reject(e):t(r.apply(this.s,arguments))}},new Nr(o)}const Qn=function(){var o=(0,O.Z)(function*(t,e,r=t.name,n){const i=[],a=[];var c,f=!1,u=!1;try{for(var y,m=function(v){var g,w,b,T=2;for(typeof Symbol<"u"&&(w=Symbol.asyncIterator,b=Symbol.iterator);T--;){if(w&&null!=(g=v[w]))return g.call(v);if(b&&null!=(g=v[b]))return new Nr(g.call(v));w="@@asyncIterator",b="@@iterator"}throw new TypeError("Object is not async iterable")}(t.values());f=!(y=yield m.next()).done;f=!1){const v=y.value,g=`${r}/${v.name}`;"file"===v.kind?a.push(v.getFile().then(w=>(w.directoryHandle=t,w.handle=v,Object.defineProperty(w,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>g})))):"directory"!==v.kind||!e||n&&n(v)||i.push(Qn(v,e,g,n))}}catch(v){u=!0,c=v}finally{try{f&&null!=m.return&&(yield m.return())}finally{if(u)throw c}}return[...(yield Promise.all(i)).flat(),...yield Promise.all(a)]});return function(e,r){return o.apply(this,arguments)}}();var Is=function(){var o=(0,O.Z)(function*(t={}){t.recursive=t.recursive||!1,t.mode=t.mode||"read";const e=yield window.showDirectoryPicker({id:t.id,startIn:t.startIn,mode:t.mode});return(yield(yield e.values()).next()).done?[e]:Qn(e,t.recursive,void 0,t.skipDirectory)});return function(){return o.apply(this,arguments)}}(),js={__proto__:null,default:Is},Rs=function(){var o=(0,O.Z)(function*(t,e=[{}],r=null,n=!1,i=null){Array.isArray(e)||(e=[e]),e[0].fileName=e[0].fileName||"Untitled";const a=[];let c=null;if(t instanceof Blob&&t.type?c=t.type:t.headers&&t.headers.get("content-type")&&(c=t.headers.get("content-type")),e.forEach((y,m)=>{a[m]={description:y.description||"Files",accept:{}},y.mimeTypes?(0===m&&c&&y.mimeTypes.push(c),y.mimeTypes.map(v=>{a[m].accept[v]=y.extensions||[]})):c?a[m].accept[c]=y.extensions||[]:a[m].accept["*/*"]=y.extensions||[]}),r)try{yield r.getFile()}catch(y){if(r=null,n)throw y}const f=r||(yield window.showSaveFilePicker({suggestedName:e[0].fileName,id:e[0].id,startIn:e[0].startIn,types:a,excludeAcceptAllOption:e[0].excludeAcceptAllOption||!1}));!r&&i&&i(f);const u=yield f.createWritable();return"stream"in t?(yield t.stream().pipeTo(u),f):"body"in t?(yield t.body.pipeTo(u),f):(yield u.write(yield t),yield u.close(),f)});return function(e){return o.apply(this,arguments)}}(),Os={__proto__:null,default:Rs},Ns=function(){var o=(0,O.Z)(function*(t=[{}]){return Array.isArray(t)||(t=[t]),new Promise((e,r)=>{const n=document.createElement("input");n.type="file";const i=[...t.map(u=>u.mimeTypes||[]),...t.map(u=>u.extensions||[])].join();n.multiple=t[0].multiple||!1,n.accept=i||"",n.style.display="none",document.body.append(n);const a=u=>{"function"==typeof c&&c(),e(u)},c=t[0].legacySetup&&t[0].legacySetup(a,()=>c(r),n),f=()=>{window.removeEventListener("focus",f),n.remove()};n.addEventListener("click",()=>{window.addEventListener("focus",f)}),n.addEventListener("change",()=>{window.removeEventListener("focus",f),n.remove(),a(n.multiple?Array.from(n.files):n.files[0])}),"showPicker"in HTMLInputElement.prototype?n.showPicker():n.click()})});return function(){return o.apply(this,arguments)}}(),Cs={__proto__:null,default:Ns},Bs=function(){var o=(0,O.Z)(function*(t=[{}]){return Array.isArray(t)||(t=[t]),t[0].recursive=t[0].recursive||!1,new Promise((e,r)=>{const n=document.createElement("input");n.type="file",n.webkitdirectory=!0;const i=c=>{"function"==typeof a&&a(),e(c)},a=t[0].legacySetup&&t[0].legacySetup(i,()=>a(r),n);n.addEventListener("change",()=>{let c=Array.from(n.files);t[0].recursive?t[0].recursive&&t[0].skipDirectory&&(c=c.filter(f=>f.webkitRelativePath.split("/").every(u=>!t[0].skipDirectory({name:u,kind:"directory"})))):c=c.filter(f=>2===f.webkitRelativePath.split("/").length),i(c)}),"showPicker"in HTMLInputElement.prototype?n.showPicker():n.click()})});return function(){return o.apply(this,arguments)}}(),Fs={__proto__:null,default:Bs},$s=function(){var o=(0,O.Z)(function*(t,e={}){Array.isArray(e)&&(e=e[0]);const r=document.createElement("a");let n=t;var c;"body"in t&&(n=yield(c=(0,O.Z)(function*(f,u){const y=f.getReader(),m=new ReadableStream({start:w=>function(){var b=(0,O.Z)(function*(){return y.read().then(({done:k,value:S})=>{if(!k)return w.enqueue(S),T();w.close()})});function T(){return b.apply(this,arguments)}return T}()()}),v=new Response(m),g=yield v.blob();return y.releaseLock(),new Blob([g],{type:u})}),function(f,u){return c.apply(this,arguments)})(t.body,t.headers.get("content-type"))),r.download=e.fileName||"Untitled",r.href=URL.createObjectURL(yield n);const i=()=>{"function"==typeof a&&a()},a=e.legacySetup&&e.legacySetup(i,()=>a(),r);return r.addEventListener("click",()=>{setTimeout(()=>URL.revokeObjectURL(r.href),3e4),i()}),r.click(),null});return function(e){return o.apply(this,arguments)}}(),Ls={__proto__:null,default:$s};const Xn=class{constructor(o){(0,Yt.r)(this,o),this.importProgress=(0,Yt.c)(this,"jeepSqliteImportProgress",7),this.exportProgress=(0,Yt.c)(this,"jeepSqliteExportProgress",7),this.HTTPRequestEnded=(0,Yt.c)(this,"jeepSqliteHTTPRequestEnded",7),this.PickDatabaseEnded=(0,Yt.c)(this,"jeepSqlitePickDatabaseEnded",7),this.SaveDatabaseEnded=(0,Yt.c)(this,"jeepSqliteSaveDatabaseToDisk",7),this.isStore=!1,this._dbDict={},this.databaseList={},this._versionUpgrades={},this._overwrite=!0,this.autoSave=!1,this.typeOrm=!1,this.wasmPath=void 0,this.pickText=void 0,this.saveText=void 0,this.buttonOptions=void 0,this.innerAutoSave=void 0,this.innerTypeOrm=void 0,this.innerWasmPath=void 0,this.innerPickText=void 0,this.innerSaveText=void 0,this.innerButtonOptions=void 0}parseAutoSave(o){this.innerAutoSave=o}parseTypeOrm(o){this.innerTypeOrm=o}parseWasmPath(o){this.innerWasmPath=o}parsePickText(o){this.innerPickText=o}parseSaveText(o){this.innerSaveText=o}parseButtonOptions(o){this.innerButtonOptions=JSON.parse(o);const t=Object.keys(this.innerButtonOptions);for(const e of t)switch(e){case"top":this.el.style.setProperty("--jeep-sqlite-top",this.innerButtonOptions[e]);break;case"right":this.el.style.setProperty("--jeep-sqlite-right",this.innerButtonOptions[e]);break;case"fontSize":this.el.style.setProperty("--jeep-sqlite-font-size",this.innerButtonOptions[e]);break;case"padding":this.el.style.setProperty("--jeep-sqlite-padding",this.innerButtonOptions[e]);break;case"backgroundColor":this.el.style.setProperty("--jeep-sqlite-background-color",this.innerButtonOptions[e]);break;case"color":this.el.style.setProperty("--jeep-sqlite-color",this.innerButtonOptions[e])}}echo(o){return(0,O.Z)(function*(){return o})()}createConnection(o){var t=this;return(0,O.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(o).includes("database"))return Promise.reject("Must provide a database name");const r=o.database,n=o.version?o.version:1,i=!!o.readonly&&o.readonly;try{return yield t._createConnection(r,n,i),Promise.resolve()}catch(a){return Promise.reject(a)}})()}isConnection(o){var t=this;return(0,O.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(o).includes("database"))return Promise.reject("Must provide a database name");const r=o.database,n=!!o.readonly&&o.readonly,i=yield t._isConnection(r,n);return Promise.resolve(i)})()}closeConnection(o){var t=this;return(0,O.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(o).includes("database"))return Promise.reject("Must provide a database name");const r=o.database,n=!!o.readonly&&o.readonly;try{return yield t._closeConnection(r,n),Promise.resolve()}catch(i){return Promise.reject(i)}})()}open(o){var t=this;return(0,O.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(o).includes("database"))return Promise.reject("Must provide a database name");const r=o.database,n=!!o.readonly&&o.readonly;try{return yield t._open(r,n),Promise.resolve()}catch(i){return Promise.reject(i)}})()}close(o){var t=this;return(0,O.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(o).includes("database"))return Promise.reject("Must provide a database name");const r=o.database,n=!!o.readonly&&o.readonly;try{return yield t._close(r,n),Promise.resolve()}catch(i){return Promise.reject(i)}})()}getVersion(o){var t=this;return(0,O.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(o).includes("database"))return Promise.reject("Must provide a database name");const r=o.database,n=!!o.readonly&&o.readonly;try{const i=yield t._getVersion(r,n);return Promise.resolve(i)}catch(i){return Promise.reject(i)}})()}beginTransaction(o){var t=this;return(0,O.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(o).includes("database"))return Promise.reject("Must provide a database name");const r=o.database;if(o.readonly&&o.readonly)return Promise.reject("BeginTransaction: not allowed in read-only mode");try{const i=yield t._beginTransaction(r);return Promise.resolve(i)}catch(i){return Promise.reject(i)}})()}commitTransaction(o){var t=this;return(0,O.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(o).includes("database"))return Promise.reject("Must provide a database name");const r=o.database;if(o.readonly&&o.readonly)return Promise.reject("CommitTransaction: not allowed in read-only mode");try{const i=yield t._commitTransaction(r);return Promise.resolve(i)}catch(i){return Promise.reject(i)}})()}rollbackTransaction(o){var t=this;return(0,O.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(o).includes("database"))return Promise.reject("Must provide a database name");const r=o.database;if(o.readonly&&o.readonly)return Promise.reject("BeginTransaction: not allowed in read-only mode");try{const i=yield t._rollbackTransaction(r);return Promise.resolve(i)}catch(i){return Promise.reject(i)}})()}isTransactionActive(o){var t=this;return(0,O.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(o).includes("database"))return Promise.reject("Must provide a database name");const r=o.database;if(o.readonly&&o.readonly)return Promise.reject("isTransactionActive: not allowed in read-only mode");try{const i=yield t._isTransactionActive(r);return Promise.resolve(i)}catch(i){return Promise.reject(i)}})()}execute(o){var t=this;return(0,O.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);let e=Object.keys(o);if(!e.includes("database"))return Promise.reject("Must provide a database name");if(!e.includes("statements")||0===o.statements.length)return Promise.reject("Must provide raw SQL statements");const r=o.database,n=o.statements;let i=!0;const a=!!o.readonly&&o.readonly;e.includes("transaction")&&(i=o.transaction);try{const c=yield t._execute(r,n,i,a);return Promise.resolve(c)}catch(c){return Promise.reject(c)}})()}executeSet(o){var t=this;return(0,O.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);let e=Object.keys(o);if(!e.includes("database"))return Promise.reject("Must provide a database name");if(!e.includes("set")||0===o.set.length)return Promise.reject("Must provide a non-empty set of SQL statements");const r=o.database,n=o.set;let i=!0;e.includes("transaction")&&(i=o.transaction);const a=!!o.readonly&&o.readonly,c=o.returnMode?o.returnMode:"no";try{const f=yield t._executeSet(r,n,i,a,c);return Promise.resolve(f)}catch(f){return Promise.reject(f)}})()}run(o){var t=this;return(0,O.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);let e=Object.keys(o);if(!e.includes("database"))return Promise.reject("Must provide a database name");if(!e.includes("statement")||0===o.statement.length)return Promise.reject("Must provide a run statement");const r=o.database,n=o.statement;let i=[];e.includes("values")&&(i=o.values.length>0?o.values:[]);let a=!0;e.includes("transaction")&&(a=o.transaction);const c=!!o.readonly&&o.readonly,f=o.returnMode?o.returnMode:"no";try{const u=yield t._run(r,n,i,a,c,f);return Promise.resolve(u)}catch(u){return Promise.reject(u)}})()}query(o){var t=this;return(0,O.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);let e=Object.keys(o);if(!e.includes("database"))return Promise.reject("Must provide a database name");if(!e.includes("statement")||0===o.statement.length)return Promise.reject("Must provide a query statement");let r=[];e.includes("values")&&(r=o.values.length>0?o.values:[]);const n=o.database,i=o.statement,a=!!o.readonly&&o.readonly;try{const c=yield t._query(n,i,r,a);return Promise.resolve(c)}catch(c){return Promise.reject(c)}})()}getTableList(o){var t=this;return(0,O.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(o).includes("database"))return Promise.reject("Must provide a database name");const r=o.database,n=!!o.readonly&&o.readonly;try{const i=yield t._getTableList(r,n);return Promise.resolve(i)}catch(i){return Promise.reject(i)}})()}isDBExists(o){var t=this;return(0,O.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(o).includes("database"))return Promise.reject("Must provide a database name");const r=o.database,n=!!o.readonly&&o.readonly;try{const i=yield t._isDBExists(r,n);return Promise.resolve(i)}catch(i){return Promise.reject(i)}})()}isDBOpen(o){var t=this;return(0,O.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(o).includes("database"))return Promise.reject("Must provide a database name");const r=o.database,n=!!o.readonly&&o.readonly;try{const i=yield t._isDBOpen(r,n);return Promise.resolve(i)}catch(i){return Promise.reject(i)}})()}deleteDatabase(o){var t=this;return(0,O.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(o).includes("database"))return Promise.reject("Must provide a database name");const r=o.database,n=!!o.readonly&&o.readonly;try{return yield t._deleteDatabase(r,n)}catch(i){return Promise.reject(i)}})()}isStoreOpen(){var o=this;return(0,O.Z)(function*(){return Promise.resolve(o.isStore)})()}copyFromAssets(o){var t=this;return(0,O.Z)(function*(){let e;if(e=null==o||!Object.keys(o).includes("overwrite")||o.overwrite,!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);try{return yield t._copyFromAssets(e),Promise.resolve()}catch(r){return Promise.reject(r)}})()}isTableExists(o){var t=this;return(0,O.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);const e=Object.keys(o);if(!e.includes("database"))return Promise.reject("Must provide a database name");const r=o.database;if(!e.includes("table"))return Promise.reject("Must provide a table name");const n=o.table,i=!!o.readonly&&o.readonly;try{const a=yield t._isTableExists(r,n,i);return Promise.resolve(a)}catch(a){return Promise.reject(a)}})()}createSyncTable(o){var t=this;return(0,O.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(o).includes("database"))return Promise.reject("Must provide a database name");const r=o.database,n=!!o.readonly&&o.readonly;try{const i=yield t._createSyncTable(r,n);return Promise.resolve(i)}catch(i){return Promise.reject(i)}})()}getSyncDate(o){var t=this;return(0,O.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(o).includes("database"))return Promise.reject("Must provide a database name");const r=o.database,n=!!o.readonly&&o.readonly;try{const i=yield t._getSyncDate(r,n);return Promise.resolve(i)}catch(i){return Promise.reject(i)}})()}setSyncDate(o){var t=this;return(0,O.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);let e=Object.keys(o);if(!e.includes("database"))return Promise.reject("Must provide a database name");if(!e.includes("syncdate"))return Promise.reject("Must provide a synchronization date");const r=o.database,n=o.syncdate,i=!!o.readonly&&o.readonly;try{return yield t._setSyncDate(r,n,i),Promise.resolve()}catch(a){return Promise.reject(a)}})()}isJsonValid(o){var t=this;return(0,O.Z)(function*(){if(!Object.keys(o).includes("jsonstring"))return Promise.reject("Must provide a json object");const r=o.jsonstring;try{const n=yield t._isJsonValid(r);return Promise.resolve(n)}catch(n){return Promise.reject(n)}})()}importFromJson(o){var t=this;return(0,O.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(o).includes("jsonstring"))return Promise.reject("Must provide a json object");const r=o.jsonstring;try{const n=yield t._importFromJson(r);return Promise.resolve(n)}catch(n){return Promise.reject(n)}})()}exportToJson(o){var t=this;return(0,O.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);const e=Object.keys(o);if(!e.includes("database"))return Promise.reject("Must provide a database name");if(!e.includes("jsonexportmode"))return Promise.reject("Must provide a json export mode");const r=o.database,n=o.jsonexportmode,i=!!o.readonly&&o.readonly;try{const a=yield t._exportToJson(r,n,i);return Promise.resolve(a)}catch(a){return Promise.reject(a)}})()}deleteExportedRows(o){var t=this;return(0,O.Z)(function*(){if(!Object.keys(o).includes("database"))return Promise.reject("Must provide a database name");const r=o.database,n=!!o.readonly&&o.readonly;try{return yield t._deleteExportedRows(r,n),Promise.resolve()}catch(i){return Promise.reject(i)}})()}addUpgradeStatement(o){var t=this;return(0,O.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);let e=Object.keys(o);if(!e.includes("database"))return Promise.reject("Must provide a database name");if(!e.includes("upgrade"))return Promise.reject("Must provide an upgrade capSQLiteVersionUpgrade Object");const r=o.database,n=o.upgrade;for(const i of n){const a=Object.keys(i);if(!a.includes("toVersion")||!a.includes("statements"))return Promise.reject("Must provide an upgrade capSQLiteVersionUpgrade Object");if("number"!=typeof i.toVersion)return Promise.reject("upgrade.toVersion must be a number");if(t._versionUpgrades[r])t._versionUpgrades[r][i.toVersion]=i;else{const c={};c[i.toVersion]=i,t._versionUpgrades[r]=c}}return Promise.resolve()})()}isDatabase(o){var t=this;return(0,O.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(o).includes("database"))return Promise.reject("Must provide a database name");const r=o.database;try{const n=yield t._isDatabase(r);return Promise.resolve(n)}catch(n){return Promise.reject(n)}})()}getDatabaseList(){var o=this;return(0,O.Z)(function*(){if(!o.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${o.storeName} is not opened`);try{const t=yield o._getDatabaseList();return Promise.resolve(t)}catch(t){return Promise.reject(t)}})()}checkConnectionsConsistency(o){var t=this;return(0,O.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);const e=Object.keys(o);if(!e.includes("dbNames"))return Promise.reject("Must provide a list of connection's name");const r=o.dbNames;if(!e.includes("openModes"))return Promise.reject("Must provide a list of connection's open mode");const n=o.openModes;try{const i=yield t._checkConnectionsConsistency(r,n);return Promise.resolve(i)}catch(i){return Promise.reject(i)}})()}saveToStore(o){var t=this;return(0,O.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(o).includes("database"))return Promise.reject("Must provide a database name");const r=o.database,n=!!o.readonly&&o.readonly;try{return yield t._saveToStore(r,n),Promise.resolve()}catch(i){return Promise.reject(i)}})()}saveToLocalDisk(o){var t=this;return(0,O.Z)(function*(){if(!Object.keys(o).includes("database"))return Promise.reject("Must provide a database name");const r=o.database;try{return yield t._saveToLocalDisk(r),Promise.resolve()}catch(n){return Promise.reject(n)}})()}getFromLocalDiskToStore(o){var t=this;return(0,O.Z)(function*(){const e=!o.overwrite||o.overwrite;console.log(Or?"Using the File System Access API.":"Using the fallback implementation.");try{return yield t._getFromLocalDiskToStore(e),Promise.resolve()}catch(r){return Promise.reject(r)}})()}getFromHTTPRequest(o){var t=this;return(0,O.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(o).includes("url"))return Promise.reject("Must provide an url");const r=o.url,n=!o.overwrite||o.overwrite;try{return yield t._getFromHTTPRequest(r,n),Promise.resolve()}catch(i){return Promise.reject(i)}})()}connectedCallback(){this.parseAutoSave(void 0!==this.autoSave&&this.autoSave),this.parseTypeOrm(void 0!==this.typeOrm&&this.typeOrm),this.parseWasmPath(void 0!==this.wasmPath?this.wasmPath:"/assets"),this.parseSaveText(void 0!==this.saveText?this.saveText:"Save"),this.parsePickText(void 0!==this.pickText?this.pickText:"Pick a database"),void 0!==this.buttonOptions&&this.parseButtonOptions(this.buttonOptions),this.openStore("jeepSqliteStore","databases").then(o=>{this.isStore=o})}componentWillLoad(){}componentDidLoad(){var o=this;return(0,O.Z)(function*(){o._element=o.el.shadowRoot,o.isStore||console.log("jeep-sqlite isStore = false")})()}_createConnection(o,t,e){var r=this;return(0,O.Z)(function*(){let n={};const i=Object.keys(r._versionUpgrades);0!==i.length&&i.includes(o)&&(n=r._versionUpgrades[o]);const a=Object.keys(r._dbDict);let c;try{return c=a.length>0&&(a.includes("RW_"+o)||a.includes("RO_"+o))?a.includes("RW_"+o)?r._dbDict["RW_"+o]:r._dbDict["RO_"+o]:new Vn(o+"SQLite.db",t,n,r.store,r.innerAutoSave,r.innerWasmPath),r._dbDict[e?"RO_"+o:"RW_"+o]=c,Promise.resolve()}catch(f){return Promise.reject(f.message)}})()}_isConnection(o,t){var e=this;return(0,O.Z)(function*(){return Object.keys(e._dbDict).includes(t?"RO_"+o:"RW_"+o)?{result:!0}:{result:!1}})()}_closeConnection(o,t){var e=this;return(0,O.Z)(function*(){const r=Object.keys(e._dbDict),n=t?"RO_"+o:"RW_"+o;if(!r.includes(n))return Promise.reject(`CloseConnection: No available connection for ${o}`);const i=e._dbDict[n];try{if(i.isDBOpen())try{yield i.close()}catch(a){return Promise.reject(`CloseConnection: close ${o} failed ${a}`)}return delete e._dbDict[n],Promise.resolve()}catch(a){return Promise.reject(`CloseConnection: ${a.message}`)}})()}_open(o,t){var e=this;return(0,O.Z)(function*(){const r=Object.keys(e._dbDict),n=t?"RO_"+o:"RW_"+o;if(!r.includes(n))return Promise.reject(`Open: No available connection for ${o}`);const i=e._dbDict[n];try{return yield i.open(),Promise.resolve()}catch(a){return Promise.reject(`Open: ${a.message}`)}})()}_close(o,t){var e=this;return(0,O.Z)(function*(){const r=Object.keys(e._dbDict),n=t?"RO_"+o:"RW_"+o;if(!r.includes(n))return Promise.reject(`Close: No available connection for ${o}`);const i=e._dbDict[n];try{return yield i.close(),Promise.resolve()}catch(a){return Promise.reject(`Close: ${a.message}`)}})()}_saveToStore(o,t){var e=this;return(0,O.Z)(function*(){const r=Object.keys(e._dbDict),n=t?"RO_"+o:"RW_"+o;if(!r.includes(n))return Promise.reject(`SaveToStore: No available connection for ${o}`);const i=e._dbDict[n];try{return yield i.saveToStore(),Promise.resolve()}catch(a){return Promise.reject(`SaveToStore: ${a.message}`)}})()}_saveToLocalDisk(o){var t=this;return(0,O.Z)(function*(){try{const e=Object.keys(t._dbDict),r="RW_"+o;if(!e.includes(r))return Promise.reject(`_saveToLocalDisk: No available connection for ${o}`);const i=yield t._dbDict[r].exportDB();t._blob=yield t.uint2blob(i);const a=`${o}SQLite.db`;return t._opts={fileName:a,extensions:[".db"]},t._buttonSaveEl=document.createElement("button"),t._buttonSaveEl.setAttribute("id","saveButton"),t._buttonSaveEl.innerHTML=`${t.innerSaveText} ${a}`,t._element.appendChild(t._buttonSaveEl),t._buttonSaveEl.addEventListener("click",t.saveFile.bind(t)),Promise.resolve()}catch(e){return Promise.reject(`_saveToLocalDisk: ${e.message}`)}})()}_getFromLocalDiskToStore(o){var t=this;return(0,O.Z)(function*(){return t._buttonPickEl=document.createElement("button"),t._buttonPickEl.setAttribute("id","pickButton"),t._buttonPickEl.innerHTML=`${t.innerPickText}`,t._element.appendChild(t._buttonPickEl),t._buttonPickEl.addEventListener("click",t.pickDatabase.bind(t)),t._overwrite=o,Promise.resolve()})()}pickDatabase(){var o=this;return(0,O.Z)(function*(){try{const t=yield function Ts(){return cn.apply(this,arguments)}({extensions:[".db"]});let e=yield o.blob2uint(t);const r=o.removePathSuffix(t.name),n=o.setPathSuffix(t.name);(yield Fe.isDBInStore(n,o.store))?o._overwrite?(yield Fe.removeDBFromStore(n,o.store),yield Fe.saveDBToStore(n,e,o.store)):o.PickDatabaseEnded.emit({message:`Error: cannot overwrite ${n}`}):yield Fe.saveDBToStore(n,e,o.store),o._element.removeChild(o._buttonPickEl),o.PickDatabaseEnded.emit({db_name:r})}catch(t){o.PickDatabaseEnded.emit({message:t.message?t.message:t})}})()}saveFile(){var o=this;return(0,O.Z)(function*(){try{yield function Ps(){return un.apply(this,arguments)}(o._blob,[o._opts]);const t=o._opts.fileName;o._element.removeChild(o._buttonSaveEl),o.SaveDatabaseEnded.emit({db_name:t})}catch(t){o.SaveDatabaseEnded.emit({message:t.message?t.message:t})}})()}_getVersion(o,t){var e=this;return(0,O.Z)(function*(){const r=Object.keys(e._dbDict),n=t?"RO_"+o:"RW_"+o;if(!r.includes(n))return Promise.reject(`Open: No available connection for ${o}`);const i=e._dbDict[n];try{const a=yield i.getVersion(),c={};return c.version=a,Promise.resolve(c)}catch(a){return Promise.reject(`Open: ${a.message}`)}})()}_beginTransaction(o){var t=this;return(0,O.Z)(function*(){const e=Object.keys(t._dbDict),r="RW_"+o;if(!e.includes(r))return Promise.reject(`BeginTransaction: No available connection for ${o}`);const n=t._dbDict[r];let i={};return i={changes:{changes:yield n.beginTransaction()}},Promise.resolve(i)})()}_commitTransaction(o){var t=this;return(0,O.Z)(function*(){const e=Object.keys(t._dbDict),r="RW_"+o;if(!e.includes(r))return Promise.reject(`CommitTransaction: No available connection for ${o}`);const n=t._dbDict[r];let i={};return i={changes:{changes:yield n.commitTransaction()}},Promise.resolve(i)})()}_rollbackTransaction(o){var t=this;return(0,O.Z)(function*(){const e=Object.keys(t._dbDict),r="RW_"+o;if(!e.includes(r))return Promise.reject(`RollbackTransaction: No available connection for ${o}`);const n=t._dbDict[r];let i={};return i={changes:{changes:yield n.rollbackTransaction()}},Promise.resolve(i)})()}_isTransactionActive(o){var t=this;return(0,O.Z)(function*(){const e=Object.keys(t._dbDict),r="RW_"+o;if(!e.includes(r))return Promise.reject(`IsTransactionActive: No available connection for ${o}`);let i={};return i={result:t._dbDict[r].isTransActive()},Promise.resolve(i)})()}_execute(o,t,e,r){var n=this;return(0,O.Z)(function*(){const i=Object.keys(n._dbDict),a="RW_"+o;if(!i.includes(a))return Promise.reject(`Execute: No available connection for ${o}`);const c=n._dbDict[a];if(r)return Promise.reject("Execute: not allowed in read-only mode");let f={};const u=t.substring(0,6);if(n.innerAutoSave&&"COMMIT"===u&&n.innerTypeOrm)return f={changes:{changes:0}},Promise.resolve(f);try{return f={changes:{changes:yield c.executeSQL(t,e)}},Promise.resolve(f)}catch(y){return Promise.reject(`Execute: ${y.message}`)}})()}_executeSet(o,t,e,r,n){var i=this;return(0,O.Z)(function*(){const a=Object.keys(i._dbDict),c="RW_"+o;if(!a.includes(c))return Promise.reject(`ExecuteSet: No available connection for ${o}`);const f=i._dbDict[c];if(r)return Promise.reject("ExecuteSet: not allowed in read-only mode");for(const u of t)if(!("statement"in u)||!("values"in u))return Promise.reject("ExecuteSet: Must provide a set as Array of {statement,values}");try{const u=yield f.execSet(t,e,n);return Promise.resolve({changes:{changes:u.changes,lastId:u.lastId,values:u.values}})}catch(u){return Promise.reject(`ExecuteSet: ${u.message}`)}})()}_run(o,t,e,r,n,i){var a=this;return(0,O.Z)(function*(){const c=Object.keys(a._dbDict),f="RW_"+o;if(!c.includes(f))return Promise.reject(`Run: No available connection for ${o}`);const u=a._dbDict[f];if(n)return Promise.reject("Run: not allowed in read-only mode");let y={};const m=t.substring(0,6);if(a.innerAutoSave&&"COMMIT"===m)return y={changes:{changes:0}},Promise.resolve(y);try{const v=yield u.runSQL(t,e,r,i);return y={changes:{changes:v.changes,lastId:v.lastId,values:v.values}},Promise.resolve(y)}catch(v){return Promise.reject(`Run: ${v.message}`)}})()}_query(o,t,e,r){var n=this;return(0,O.Z)(function*(){const i=Object.keys(n._dbDict),a=r?"RO_"+o:"RW_"+o;if(!i.includes(a))return Promise.reject(`Query: No available connection for ${o}`);const c=n._dbDict[a];let f=[];const u=t.substring(0,6);if(n.innerAutoSave&&"COMMIT"===u)return Promise.resolve({values:f});try{return f=yield c.selectSQL(t,e),Promise.resolve({values:f})}catch(y){return Promise.reject(`Query failed: ${y.message}`)}})()}_getTableList(o,t){var e=this;return(0,O.Z)(function*(){const r=Object.keys(e._dbDict),n=t?"RO_"+o:"RW_"+o;if(!r.includes(n))return Promise.reject(`GetTableList: No available connection for ${o}`);const i=e._dbDict[n];let a=[];try{return a=yield i.getTableNames(),Promise.resolve({values:a})}catch(c){return Promise.reject(`GetTableList failed: ${c.message}`)}})()}_isDBExists(o,t){var e=this;return(0,O.Z)(function*(){const r=Object.keys(e._dbDict),n=t?"RO_"+o:"RW_"+o;if(!r.includes(n))return Promise.reject(`IsDBExists: No available connection for ${o}`);const i=e._dbDict[n];try{const c={result:yield i.isDBExists(o+"SQLite.db")};return Promise.resolve(c)}catch(a){return Promise.reject(`IsDBExists: ${a.message}`)}})()}_isDBOpen(o,t){var e=this;return(0,O.Z)(function*(){const r=Object.keys(e._dbDict),n=t?"RO_"+o:"RW_"+o;if(!r.includes(n))return Promise.reject(`IsDBOpen: No available connection for ${o}`);const i=e._dbDict[n];try{const c={result:yield i.isDBOpen(o+"SQLite.db")};return Promise.resolve(c)}catch(a){return Promise.reject(`IsDBOpen: ${a.message}`)}})()}_deleteDatabase(o,t){var e=this;return(0,O.Z)(function*(){const r=Object.keys(e._dbDict),n="RW_"+o;if(!r.includes(n))return Promise.reject(`DeleteDatabase: No available connection for ${o}`);const i=e._dbDict[n];if(t)return Promise.reject("DeleteDatabase: not allowed in read-only mode");try{return yield i.deleteDB(o+"SQLite.db"),Promise.resolve()}catch(a){return Promise.reject(`DeleteDatabase: ${a.message}`)}})()}_isTableExists(o,t,e){var r=this;return(0,O.Z)(function*(){const n=Object.keys(r._dbDict),i=e?"RO_"+o:"RW_"+o;if(!n.includes(i))return Promise.reject(`IsTableExists: No available connection for ${o}`);const a=r._dbDict[i];try{const f={result:yield a.isTable(t)};return Promise.resolve(f)}catch(c){return Promise.reject(`IsTableExists: ${c.message}`)}})()}_createSyncTable(o,t){var e=this;return(0,O.Z)(function*(){const r=Object.keys(e._dbDict),n="RW_"+o;if(!r.includes(n))return Promise.reject(`CreateSyncTable: No available connection for ${o}`);const i=e._dbDict[n];if(t)return Promise.reject("CreateSyncTable: not allowed in read-only mode");try{const a=yield i.createSyncTable();return Promise.resolve({changes:{changes:a}})}catch(a){return Promise.reject(`CreateSyncTable: ${a.message}`)}})()}_getSyncDate(o,t){var e=this;return(0,O.Z)(function*(){const r=Object.keys(e._dbDict),n=t?"RO_"+o:"RW_"+o;if(!r.includes(n))return Promise.reject(`GetSyncDate: No available connection for ${o}`);const i=e._dbDict[n];try{const a=yield i.getSyncDate();return Promise.resolve({syncDate:a})}catch(a){return Promise.reject(`GetSyncDate: ${a.message}`)}})()}_setSyncDate(o,t,e){var r=this;return(0,O.Z)(function*(){const n=Object.keys(r._dbDict),i="RW_"+o;if(!n.includes(i))return Promise.reject(`SetSyncDate: No available connection for ${o}`);const a=r._dbDict[i];if(e)return Promise.reject("SetSyncDate: not allowed in read-only mode");try{const c=yield a.setSyncDate(t);return c.result?Promise.resolve():Promise.reject(`SetSyncDate: ${c.message}`)}catch(c){return Promise.reject(`SetSyncDate: ${c.message}`)}})()}_isJsonValid(o){return(0,O.Z)(function*(){const t=JSON.parse(o);return(yield We.isJsonSQLite(t))?Promise.resolve({result:!0}):Promise.reject("IsJsonValid: Stringify Json Object not Valid")})()}_importFromJson(o){var t=this;return(0,O.Z)(function*(){var e,r;const n=JSON.parse(o);if(!(yield We.isJsonSQLite(n)))return Promise.reject("ImportFromJson: Stringify Json Object not Valid");const a=n,c=`${a.database}SQLite.db`,f=null!==(e=a.version)&&void 0!==e?e:1,u=a.mode,y=null!==(r=a.overwrite)&&void 0!==r&&r,m=new Vn(c,f,{},t.store,t.innerAutoSave,t.innerWasmPath);try{y&&"full"===u&&Fe.isDBInStore(c,t.store)&&(yield Fe.removeDBFromStore(c,t.store)),yield m.open();const v=yield m.getTableNames();if("full"===u&&v.length>0){const w=yield m.getVersion();if(f<w)return Promise.reject(`ImportFromJson: Cannot import a version lower than ${w}`);if(w===f)return Promise.resolve({changes:{changes:0}})}const g=yield m.importJson(a,t.importProgress);return yield m.close(),Promise.resolve({changes:{changes:g}})}catch(v){return Promise.reject(`ImportFromJson: ${v.message}`)}})()}_exportToJson(o,t,e){var r=this;return(0,O.Z)(function*(){const n=Object.keys(r._dbDict),i=e?"RO_"+o:"RW_"+o;if(!n.includes(i))return Promise.reject(`ExportToJson: No available connection for ${o}`);const a=r._dbDict[i];try{const c=yield a.exportJson(t,r.exportProgress);return Object.keys(c).includes("message")?Promise.reject(`ExportToJson: ${c.message}`):Promise.resolve({export:c})}catch(c){return Promise.reject(`ExportToJson: ${c.message}`)}})()}_deleteExportedRows(o,t){var e=this;return(0,O.Z)(function*(){const r=Object.keys(e._dbDict),n="RW_"+o;if(!r.includes(n))return Promise.reject(`ExportToJson: No available connection for ${o}`);const i=e._dbDict[n];if(t)return Promise.reject("SetSyncDate: not allowed in read-only mode");try{yield i.deleteExportedRows()}catch(a){return Promise.reject(`DeleteExportedRows: ${a.message}`)}})()}_copyFromAssets(o){var t=this;return(0,O.Z)(function*(){const e=yield t.loadJSON("/assets/databases/databases.json");if(null==e)return Promise.reject("CopyFromAssets: no databases.json file in /assets/databases folder");if(t.databaseList=JSON.parse(e),!Object.keys(t.databaseList).includes("databaseList"))return Promise.reject("CopyFromAssets: no key databaseList in databases.json");try{for(const n of t.databaseList.databaseList)".db"===n.substring(n.length-3)&&(yield t.copyDatabase(`/assets/databases/${n}`,o)),".zip"===n.substring(n.length-4)&&(yield t.unzipDatabase(`/assets/databases/${n}`,o));return Promise.resolve()}catch(n){return Promise.reject(`CopyFromAssets: ${n.message}`)}})()}_getFromHTTPRequest(o,t){var e=this;return(0,O.Z)(function*(){try{let r;return".db"===o.substring(o.length-3)&&(yield e.copyDatabase(o,t),r="db"),".zip"===o.substring(o.length-4)&&(yield e.unzipDatabase(o,t),r="zip"),e.HTTPRequestEnded.emit({message:r}),Promise.resolve()}catch(r){return Promise.reject(`GetFromHTTPRequest: ${r.message}`)}})()}_isDatabase(o){var t=this;return(0,O.Z)(function*(){try{const r={result:yield Fe.isDBInStore(o+"SQLite.db",t.store)};return Promise.resolve(r)}catch(e){return Promise.reject(`IsDatabase: ${e.message}`)}})()}_getDatabaseList(){var o=this;return(0,O.Z)(function*(){try{const e={values:yield Fe.getDBListFromStore(o.store)};return Promise.resolve(e)}catch(t){return Promise.reject(`GetDatabaseList: ${t.message}`)}})()}_checkConnectionsConsistency(o,t){var e=this;return(0,O.Z)(function*(){const r={result:!1},n=[];o.forEach((i,a)=>{n.push(`${t[a]}_${i}`)});try{let i=new Set(Object.keys(e._dbDict));const a=new Set(n);if(0===a.size)return yield e._resetDbDict(Object.keys(e._dbDict)),Promise.resolve(r);if(i.size<a.size)return yield e._resetDbDict(Object.keys(e._dbDict)),Promise.resolve(r);if(i.size>a.size){const c={};for(const f of i)if(!Array.from(a.keys()).includes(f)){let u=!1;"RO_"===f.substring(0,3)&&(u=!0),c.database=f.substring(3),c.readonly=u,yield e._closeConnection(c.database,c.readonly)}}return i=new Set(Object.keys(e._dbDict)),i.size===a.size&&0===(yield e.symmetricDifference(i,a)).size?(r.result=!0,Promise.resolve(r)):(yield e._resetDbDict(Object.keys(e._dbDict)),Promise.resolve(r))}catch(i){return Promise.reject(`CheckConnectionsConsistency: ${i.message}`)}})()}_resetDbDict(o){var t=this;return(0,O.Z)(function*(){try{for(const e of o){const r={};let n=!1;"RO_"===e.substring(0,3)&&(n=!0),r.database=e.substring(3),r.readonly=n,yield t._closeConnection(r.database,r.readonly)}}catch(e){return Promise.reject(`ResetDbDict: ${e.message}`)}})()}symmetricDifference(o,t){return(0,O.Z)(function*(){let e=new Set;o.forEach(n=>{e.add(n.substring(3))});let r=new Set;t.forEach(n=>{r.add(n.substring(3))});for(const n of r)e.has(n)?e.delete(n):e.add(n);return e})()}unzipDatabase(o,t){var e=this;return(0,O.Z)(function*(){return new Promise((r,n)=>{var i=new XMLHttpRequest;i.open("GET",o,!0),i.responseType="arraybuffer",i.onerror=()=>{n(new Error("unzipDatabase: failed"))},i.onload=()=>{Yn.exports.loadAsync(i.response).then(function(){var a=(0,O.Z)(function*(c){const f=Object.keys(c.files);try{for(const u of f)yield e.retrieveDBFromZip(c.files,u,t);r()}catch(u){n(new Error(`unzipDatabase Error: ${u.message}`))}});return function(c){return a.apply(this,arguments)}}())},i.send()})})()}retrieveDBFromZip(o,t,e){var r=this;return(0,O.Z)(function*(){return new Promise((n,i)=>{o[t].async("nodebuffer").then(function(){var a=(0,O.Z)(function*(c){try{const f=new Uint8Array(c),u=r.setPathSuffix(t);(yield Fe.isDBInStore(u,r.store))?e?(yield Fe.removeDBFromStore(u,r.store),yield Fe.saveDBToStore(u,f,r.store)):i(new Error(`retrieveDBFromZip: cannot overwrite ${u}`)):yield Fe.saveDBToStore(u,f,r.store),n()}catch(f){i(new Error(`retrieveDBFromZip:: ${f.message}`))}});return function(c){return a.apply(this,arguments)}}())})})()}copyDatabase(o,t){var e=this;return(0,O.Z)(function*(){return new Promise((r,n)=>{var a,i=new XMLHttpRequest;i.open("GET",o,!0),i.responseType="arraybuffer",i.onerror=()=>{n(new Error("CopyDatabase: failed"))},i.onload=()=>{a=new Uint8Array(i.response)},i.onloadend=(0,O.Z)(function*(){const c=e.setPathSuffix(o);(yield Fe.isDBInStore(c,e.store))?t?(yield Fe.removeDBFromStore(c,e.store),yield Fe.saveDBToStore(c,a,e.store)):n(new Error(`CopyDatabase Error: cannot overwrite ${c}`)):yield Fe.saveDBToStore(c,a,e.store),r()}),i.send()})})()}loadJSON(o){return(0,O.Z)(function*(){return new Promise((t,e)=>{var r=new XMLHttpRequest;r.overrideMimeType("application/json"),r.open("GET",o,!0),r.onerror=()=>{e(new Error("LoadJSON: failed"))},r.onreadystatechange=function(){404==r.status&&t(null),4==r.readyState&&200==r.status&&t(r.responseText)},r.send(null)})})()}openStore(o,t){var e=this;return(0,O.Z)(function*(){let r=!1;const n=e.setConfig(o,t);return e.store=Kn.createInstance(n),null!=e.store&&(e.storeName=o,r=!0),r})()}setConfig(o,t){return{name:o,storeName:t,driver:[Kn.INDEXEDDB],version:1}}removePathSuffix(o){return o.includes("SQLite.db")?o.split("SQLite.db")[0]:".db"===o.substring(o.length-3)?o.slice(0,o.lastIndexOf(".")):o}setPathSuffix(o){let t=o.slice(o.lastIndexOf("/")+1);return".db"===o.substring(o.length-3)&&(o.includes("SQLite.db")||(t=o.slice(o.lastIndexOf("/")+1,-3)+"SQLite.db")),t}blob2uint(o){return(0,O.Z)(function*(){return new Response(o).arrayBuffer().then(t=>new Uint8Array(t))})()}uint2blob(o){return(0,O.Z)(function*(){const t=new Blob([o.buffer]);return Promise.resolve(t)})()}render(){}static get assetsDirs(){return["assets"]}get el(){return(0,Yt.g)(this)}static get watchers(){return{autoSave:["parseAutoSave"],typeOrm:["parseTypeOrm"],wasmPath:["parseWasmPath"],pickText:["parsePickText"],saveText:["parseSaveText"],buttonOptions:["parseButtonOptions"]}}};Xn.style=":host{display:block;--jeep-sqlite-top:10%;--jeep-sqlite-right:1%;--jeep-sqlite-font-size:2em;--jeep-sqlite-padding:2%;--jeep-sqlite-background-color:#a9a9a9;--jeep-sqlite-color:#ffffff}#fileElem{display:none}#pickButton{position:absolute;top:var(--jeep-sqlite-top);right:var(--jeep-sqlite-right);font-size:var(--jeep-sqlite-font-size);padding:var(--jeep-sqlite-padding);background-color:var(--jeep-sqlite-background-color);color:var(--jeep-sqlite-color)}#saveButton{position:absolute;top:var(--jeep-sqlite-top);right:var(--jeep-sqlite-right);font-size:var(--jeep-sqlite-font-size);padding:var(--jeep-sqlite-padding);background-color:var(--jeep-sqlite-background-color);color:var(--jeep-sqlite-color)}"},1902:()=>{}}]);