"use strict";(self.webpackChunkLogIn=self.webpackChunkLogIn||[]).push([[6488],{6488:(T,g,o)=>{o.r(g),o.d(g,{LoginPageModule:()=>U});var u=o(6814),i=o(95),l=o(1537),c=o(4573),d=o(5861),t=o(6689),m=o(2640),p=o(3511),h=o(9193),v=o(1269),f=o(6471),L=o(4904),P=o(7947);const C=[{path:"",component:(()=>{class r{constructor(n,e,s,a,M){this.userSvc=n,this.translationSvc=e,this.utilsSvc=s,this.changeDetectorRef=a,this.authHTTP=M,this.logForm=new i.cw({email:new i.NI("",[i.kI.required]),password:new i.NI("",[i.kI.required])}),this.translationSvc.setLanguage("es").subscribe()}ngOnInit(){this.UsersList=this.userSvc.UsersList}onUserList(){var n=this;return(0,d.Z)(function*(){try{const e=yield n.userSvc.fetchUsers();return n.UsersList=e,n.changeDetectorRef.detectChanges(),!0}catch(e){return console.error("Error fetching usernames:",e),n.UsersList=[],n.changeDetectorRef.detectChanges(),!1}})()}changeLanguage(n){this.translationSvc.setLanguage(n)}isUserLoggedIn(){var n=this;return(0,d.Z)(function*(){try{if(null!=n.logForm.value.email&&null!=n.logForm.value.password){const e=yield n.userSvc.isUserLoggedIn(n.logForm.value.email,n.logForm.value.password);if(e&&n.userSvc.lastUser?.email&&n.userSvc.lastUser?.password){console.log(e);let s=!1;return n.authHTTP.loginHTTP().subscribe({next:a=>{console.log("Login successful HTTP",a),n.utilsSvc.routerLink("/home"),n.logForm.reset(),console.log("Access granted"),s=!0},error:a=>{console.error("Login failed",a),s=!1}}),s}return n.logForm.reset(),console.log("NO se ha podido iniciar sesi\xf3n"),!1}return console.log("Error el formulario no es v\xe1lido",n.logForm.value.email),!1}catch(e){return console.error("Error checking login status:",e),!1}})()}static#t=this.\u0275fac=function(e){return new(e||r)(t.Y36(m.K),t.Y36(p.D),t.Y36(h.f),t.Y36(t.sBO),t.Y36(v.O))};static#n=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-login"]],decls:25,vars:27,consts:[[1,"ion-padding"],["title","Log In","type","login"],[1,"login-header"],[3,"formGroup","ngSubmit"],["intype","select","type","User",3,"control","label","SelectList","required","click"],["intype","text","type","Password",3,"control","label","required"],["type","submit","expand","block",3,"disabled"],[1,"signup-text"],["href","#","routerLink","/signin","type","button"]],template:function(e,s){1&e&&(t.TgZ(0,"ion-content",0),t._UZ(1,"app-header",1),t.TgZ(2,"div",2)(3,"h1"),t._uU(4,"Loging"),t.qZA(),t.TgZ(5,"p"),t._uU(6,"select your email and enter password"),t.qZA()(),t.TgZ(7,"ion-list")(8,"form",3),t.NdJ("ngSubmit",function(){return s.isUserLoggedIn()}),t.TgZ(9,"app-input",4),t.NdJ("click",function(){return s.onUserList()}),t.ALo(10,"async"),t.ALo(11,"translate"),t.qZA(),t._UZ(12,"app-input",5),t.ALo(13,"async"),t.ALo(14,"translate"),t.qZA()(),t.TgZ(15,"ion-button",6),t._uU(16),t.ALo(17,"async"),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"p",7),t._uU(20,"Don't have an account? "),t.TgZ(21,"a",8),t._uU(22),t.ALo(23,"async"),t.ALo(24,"translate"),t.qZA()()()),2&e&&(t.xp6(8),t.Q6J("formGroup",s.logForm),t.xp6(1),t.s9C("label",t.lcZ(10,11,t.lcZ(11,13,"UserName"))),t.Q6J("control",s.logForm.controls.email)("SelectList",s.UsersList)("required",!0),t.xp6(3),t.s9C("label",t.lcZ(13,15,t.lcZ(14,17,"Password"))),t.Q6J("control",s.logForm.controls.password)("required",!0),t.xp6(3),t.Q6J("disabled",s.logForm.invalid),t.xp6(1),t.Oqu(t.lcZ(17,19,t.lcZ(18,21,"Enter"))),t.xp6(6),t.Oqu(t.lcZ(23,23,t.lcZ(24,25,"Register"))))},dependencies:[i._Y,i.JL,l.YG,l.W2,l.q_,l.Fo,c.rH,f.G,L.a,i.sg,u.Ov,P.X],styles:["ion-content[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]{text-align:center;margin-top:6em}ion-content[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2em;margin-bottom:.5em;font-weight:400;color:var(--ion-color-light-contrast)}ion-content[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1em;margin-bottom:2em;color:var(--ion-color-medium)}ion-content[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{padding:1em}ion-content[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-top:2em;--background: #2dd36f;--border-radius: 20px;--padding-vertical: 15px;--padding-horizontal: 30px;--box-shadow: 0 4px 8px rgba(45, 211, 111, .2)}ion-content[_ngcontent-%COMP%]   .signup-text[_ngcontent-%COMP%]{text-align:center;margin-top:2em;color:var(--ion-color-light-contrast);font-size:1em}ion-content[_ngcontent-%COMP%]   .signup-text[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--ion-color-primary);text-decoration:none}ion-content[_ngcontent-%COMP%]   .validators[_ngcontent-%COMP%]{font-size:14px;color:var(--ion-color-danger);padding-bottom:5px;text-align:left;padding-left:10px}"]})}return r})()}];let O=(()=>{class r{static#t=this.\u0275fac=function(e){return new(e||r)};static#n=this.\u0275mod=t.oAB({type:r});static#e=this.\u0275inj=t.cJS({imports:[c.Bz.forChild(C),c.Bz]})}return r})();var Z=o(822),y=o(2898);let U=(()=>{class r{static#t=this.\u0275fac=function(e){return new(e||r)};static#n=this.\u0275mod=t.oAB({type:r});static#e=this.\u0275inj=t.cJS({imports:[u.ez,i.u5,l.Pc,O,Z.K,i.UX,y.D]})}return r})()}}]);